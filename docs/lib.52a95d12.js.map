{"version":3,"file":"lib.52a95d12.js","mappings":"qOAcO,SAASA,EAAYC,EAAWC,EAAWC,GAChD,OAAIF,IAAM,EAAIC,IAAM,EAAIA,IACf,GACED,IAAM,EAAIC,EAAI,EAAIC,IAAM,EAAID,GAC9B,IAECD,GAAK,EAAIE,IAAM,EAAID,KAAO,EAAIC,EAAID,EAE9C,CAEO,SAASE,EAAWC,GAAuB,2BAAXC,EAAI,iCAAJA,EAAI,kBACzC,MAAqB,mBAAPD,EAAoBA,EAAE,aAAIC,GAAQD,CAClD,CAEO,SAASE,EAAUN,EAAW,GAAsB,mBAArBO,EAAG,KAAEC,EAAG,KAC5C,OAAOD,GAAOP,GAAKA,GAAKQ,CAC1B,CAEO,SAASC,EAAQT,EAAW,EAAsBU,GAAa,mBAAlCH,EAAG,KAAEC,EAAG,KAC1C,OAAOG,KAAKH,IAAIG,KAAKJ,IAAIP,EAAGQ,GAAMD,EACpC,C,8NCjBsE,IAEhEK,EAAM,WAsBV,cASY,IACNC,EATJC,EAAO,EAAPA,QACAC,EAAQ,EAARA,SACAC,EAAS,EAATA,UACAC,EAAQ,EAARA,SACAC,EAAO,EAAPA,QACAC,EAAQ,EAARA,SACAC,EAAS,EAATA,UACAC,EAAW,EAAXA,aAAW,0CA1BS,IAAI,wBACW,IAAC,uBAChB,KAAE,wBACiB,KAAE,yBACD,KAAE,2BACa,KAAE,wBAIvD,CACFC,gBAAiB,CAAC,EAAG,GACrBC,eAAgB,EAChBC,gBAAiB,EACjBC,aAAc,EACdC,cAAe,EACfC,aAAc,EACdC,cAAe,IAaf,IAEIf,EADqB,iBAAZC,EACEe,SAASC,cAAchB,GAEvBA,CAIf,CAFE,MAAOiB,GACPlB,EAAW,IACb,CACKA,GAAcA,aAAoBmB,cACrCnB,EAAWgB,SAASI,cAAc,QAEpCpB,EAASqB,MAAMC,QAAU,IACzBtB,EAASuB,UAAY,GACrBC,KAAKxB,SAAWA,EAChBwB,KAAKC,WAAa,IAAIC,IAAJ,CAAc,CAAEC,EAAG,EAAGvC,EAAG,EAAGwC,EAAG,EAAGC,EAAG,IAEvDL,KAAKM,YAAc,IAAIC,IAAJ,CAAe,CAChC9B,QAASuB,KAAKxB,SACdgC,aAAc,YACdC,cAAe,iC,IAAA,G,EAAA,E,gaAAA,2DAKZ,OALY,gCACb,WAGE,OAAO,IAAIP,IAAJ,CAAcF,KAAKU,OAAOC,UACnC,KAAC,EALgB,CAAeC,EAAAA,YAAnB,CAMZZ,KAAKC,WAAWY,WAErBb,KAAKc,YAAYpC,GACjBsB,KAAKe,aAAapC,GAClBqB,KAAKgB,WAAWnC,GAChBmB,KAAKiB,YAAYrC,GACjBoB,KAAKkB,YAAYpC,GACjBkB,KAAKmB,aAAapC,GAClBiB,KAAKoB,eAAepC,EACtB,CAwlBC,OAxlBA,kCACD,WACE,OAAOgB,KAAKxB,QACd,GAAC,0BACD,WACE,OAAOwB,KAAKC,UACd,GAAC,yBACD,WACE,OAAOD,KAAKqB,SACd,GAAC,yBACD,SAAY3C,GACV,GAAIA,EAAU,CACZ,IASI4C,EARFrC,EAKEP,EALFO,gBACAC,EAIER,EAJFQ,eACAC,EAGET,EAHFS,gBACAC,EAEEV,EAFFU,aACAC,EACEX,EADFW,cAEIkC,EAAcnC,EAAeC,EAkB7BmC,GAdJF,EADEC,GAFmBrC,EAAiBC,EAG9BD,EACCqC,GAAe,EAAI,IAGpBpC,EAAkBoC,EAMlBjD,KAAKJ,IAAIgB,EAAgBE,IAIZmC,EACvBvB,KAAKxB,SAASqB,MAAMC,QAAU,IAC9BE,KAAKxB,SAASqB,MAAMyB,MAAQ,GAAH,OAAMA,EAAK,MACpCtB,KAAKxB,SAASqB,MAAM2B,OAAS,GAAH,OAAMA,EAAM,MACtCxB,KAAKqB,UAAY,CACfpC,gBAAAA,EACAC,eAAAA,EACAC,gBAAAA,EACAC,aAAAA,EACAC,cAAAA,EACAC,aAAcgC,EACd/B,cAAeiC,GAEjBxB,KAAKyB,OACP,CACF,GAAC,yBACD,SAAYtB,GAERA,GACgB,iBAATA,EAAE,IACO,iBAATA,EAAE,IACTA,EAAE,IAAMA,EAAE,GAGVH,KAAK0B,UAAYvB,EAKnBH,KAAK0B,UAAY,iBAAM,CAAC,EAAG,EAAE,CAC/B,GAAC,yBACD,WACE,OAAO5D,EAAWkC,KAAK0B,UACzB,GAAC,0BACD,SAAa9D,GAAc,WAEvBA,GACgB,iBAATA,EAAE,IACO,iBAATA,EAAE,IACTA,EAAE,IAAMA,EAAE,IACVA,EAAE,GAAK,EAEPoC,KAAK2B,WAAa/D,EAKpBoC,KAAK2B,WAAa,iBAAM,CAAC,EAAG,EAAI,EAAKC,cAAc,CACrD,GAAC,0BACD,WACE,OAAO9D,EAAWkC,KAAK2B,WACzB,GAAC,4BACD,SAAeE,GACb7B,KAAK8B,gBAAgBD,GAAMA,EAAG,IAC9B7B,KAAK+B,gBAAgBF,GAAMA,EAAG,GAChC,GAAC,4BACD,SAAejE,GACb,MAAO,CAACoC,KAAKgC,gBAAgBpE,GAAIoC,KAAKiC,kBACxC,GAAC,6BACD,SAAgB7B,GAAc,WAE1BA,GACgB,iBAATA,EAAE,IACO,iBAATA,EAAE,IACTA,EAAE,IAAMA,EAAE,GAEVJ,KAAKkC,aAAa,GAAK9B,EAIzBJ,KAAKkC,aAAa,GAAK,SAACtE,GACtB,MAAyC,EAAKuE,cAAtCjD,EAAc,EAAdA,eAAgBI,EAAY,EAAZA,aAClB8C,EAAK9D,KAAKH,KAAKmB,EAAe1B,EAAIsB,GAAkB,EAAG,GAC7D,MAAO,EAAEkD,EAAIA,EACf,CACF,GAAC,6BACD,SAAgBxE,GACd,OAAOE,EAAWkC,KAAKkC,aAAa,GAAItE,GAAKoC,KAAKC,WAAWrC,GAAK,EACpE,GAAC,6BACD,SAAgByC,GAAc,WAE1BA,GACgB,iBAATA,EAAE,IACO,iBAATA,EAAE,IACTA,EAAE,IAAMA,EAAE,GAEVL,KAAKkC,aAAa,GAAK7B,EAIzBL,KAAKkC,aAAa,GAAK,SAACtE,GACtB,MAA2C,EAAKuE,cAAxChD,EAAe,EAAfA,gBAAiBI,EAAa,EAAbA,cACnB8C,EAAK/D,KAAKH,KAAKoB,EAAgB3B,EAAIuB,GAAmB,EAAG,GAC/D,MAAO,EAAEkD,EAAIA,EACf,CACF,GAAC,6BACD,SAAgBzE,GACd,OAAOE,EAAWkC,KAAKkC,aAAa,GAAItE,GAAKoC,KAAKC,WAAWrC,GAAK,EACpE,GAAC,yBACD,SAAYA,GAAY,WAEpBoC,KAAKsC,UADU,iBAAN1E,GAAkBA,EAAI,EACdA,EAOF,WACf,MAOI,EAAKuE,cANPjD,EAAc,EAAdA,eACAC,EAAe,EAAfA,gBACAC,EAAY,EAAZA,aACAC,EAAa,EAAbA,cACAC,EAAY,EAAZA,aACAC,EAAa,EAAbA,cAEF,OACEjB,KAAKH,IACH,EACAG,KAAKH,IACHe,EAAiBI,EACjBH,EAAkBI,GAEpBjB,KAAKJ,IACHkB,EAAeF,EACfG,EAAgBF,KAEf,CAET,CACF,GAAC,yBACD,WACE,OAAOrB,EAAWkC,KAAKsC,UACzB,GAAC,0BACD,WAAiC,IAApBC,IAAc,UAAH,+CACtBvC,KAAKwC,WAAaD,CACpB,GAAC,0BACD,WACE,OAAOvC,KAAKwC,UACd,GAAC,uBACD,SAAUC,GACR,OAAOzC,KAAK0C,WAA4C,IAAhC1C,KAAK0C,SAASC,QAAQF,EAChD,GAAC,wBACD,SAAW5D,GAEPmB,KAAK0C,SADH7D,GAKY,CAAC,QAAS,YAC5B,GAAC,oBACD,SAAOsB,GAGL,OAAOH,KAAK4C,UAAU,CAAEzC,EAAAA,GAC1B,GAAC,sBACD,SAASA,GAGP,OAAOH,KAAK6C,YAAY,CAAE1C,EAAAA,GAC5B,GAAC,mBACD,SAAMvC,EAAWkF,GAEf,OAAO9C,KAAK4C,UAAU,CAAEhF,EAAAA,GAAKkF,EAC/B,GAAC,qBACD,SAAQlF,EAAWkF,GAEjB,OAAO9C,KAAK6C,YAAY,CAAEjF,EAAAA,GAAKkF,EACjC,GAAC,uBACD,SAAU1C,EAAWC,GAEnB,OAAOL,KAAK4C,UAAU,CAAExC,EAAAA,EAAGC,EAAAA,GAC7B,GAAC,yBACD,SAAYD,EAAWC,GAErB,OAAOL,KAAK6C,YAAY,CAAEzC,EAAAA,EAAGC,EAAAA,GAC/B,GAAC,wBACD,SAAWD,GAET,OAAOJ,KAAK4C,UAAU,CAAExC,EAAAA,GAC1B,GAAC,0BACD,SAAaA,GAEX,OAAOJ,KAAK6C,YAAY,CAAEzC,EAAAA,GAC5B,GAAC,wBACD,SAAWC,GAET,OAAOL,KAAK4C,UAAU,CAAEvC,EAAAA,GAC1B,GAAC,0BACD,SAAaA,GAEX,OAAOL,KAAK6C,YAAY,CAAExC,EAAAA,GAC5B,GAAC,uBACD,SACE0C,EACAD,EACAE,GAEA,MAAuDhD,KAAKiD,eAAc,IAAlE9C,EAAG+C,OAAE,IAAG,IAAC,MAAEtF,EAAGuF,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAC5ClD,EAAe4C,EAAf5C,EAAGvC,EAAYmF,EAAZnF,EAAGwC,EAAS2C,EAAT3C,EAAGC,EAAM0C,EAAN1C,EAaf,MAZiB,iBAANF,IACTA,GAAK+C,GAEU,iBAANtF,IACTA,GAAKuF,GAEU,iBAAN/C,IACTA,GAAKgD,GAEU,iBAAN/C,IACTA,GAAKgD,GAEArD,KAAK6C,YAAY,CAAE1C,EAAAA,EAAGvC,EAAAA,EAAGwC,EAAAA,EAAGC,EAAAA,GAAKyC,EAAOE,EACjD,GAAC,yBACD,SACED,EACAD,EACAE,GAEA,IAAIM,EAASR,EACTS,EAAWP,EACVA,GAAYQ,MAAMC,QAAQX,KAC7BS,EAAWT,EACXQ,OAASI,GAEX,IAAWC,EAA4BZ,EAA/B5C,EAAUyD,EAAqBb,EAAxBnF,EAAUiG,EAAcd,EAAjB3C,EAAU0D,EAAOf,EAAV1C,EACvB0D,EAA8B,CAAC,EAIrC,GAHkB,iBAAPJ,IACTI,EAAc5D,EAAI/B,EAAQuF,EAAI3D,KAAKgE,gBAEnB,iBAAPJ,EAAiB,CAC1B,IAAMhG,EAAKmG,EAAcnG,EAAIQ,EAAQwF,EAAI5D,KAAKiE,gBAC9C,GAAIT,MAAMC,QAAQH,GAAS,CACzB,MAAiBtD,KAAKkE,cAAcZ,EAAQ1F,GAAE,eAAvCuG,EAAE,KAAEC,EAAE,KACb,EAAiCpE,KAAKC,WAAU,IAAxCG,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAC5BU,EAAc3D,EAAIhC,GACD,iBAAPyF,EAAkBA,EAAKT,GAAMe,EACrCnE,KAAKgC,gBAAgBpE,IAEvBmG,EAAc1D,EAAIjC,GACD,iBAAP0F,EAAkBA,EAAKT,GAAMe,EACrCpE,KAAKiC,gBAAgBrE,GAEzB,KACoB,iBAAPiG,IACTE,EAAc3D,EAAIhC,EAAQyF,EAAI7D,KAAKgC,gBAAgBpE,KAEnC,iBAAPkG,IACTC,EAAc1D,EAAIjC,EAAQ0F,EAAI9D,KAAKiC,gBAAgBrE,IAGzD,KACoB,iBAAPiG,IACTE,EAAc3D,EAAIhC,EAAQyF,EAAI7D,KAAKgC,oBAEnB,iBAAP8B,IACTC,EAAc1D,EAAIjC,EAAQ0F,EAAI9D,KAAKiC,oBAGvC,OAAOjC,KAAKqE,cAAcN,EAAeR,EAC3C,GAAC,2BACD,SAAcR,GAAsD,WAA1BC,EAAsB,UAAH,6CAAG,CAAC,EAC/D,GAAgC,iBAArBA,EAAQsB,UAAyBtB,EAAQsB,UAAY,EAI9D,OAFAtE,KAAKC,WAAa,IAAIC,IAAJ,CAAc6C,GAChC/C,KAAKM,YAAYiE,KAAKxB,GACfyB,QAAQC,QAAQ1B,GAEzB,IAAQ5C,EAAe4C,EAAf5C,EAAGvC,EAAYmF,EAAZnF,EAAGwC,EAAS2C,EAAT3C,EAAGC,EAAM0C,EAAN1C,EACjB,EAAuDL,KAAKiD,eAAc,IAAlE9C,EAAG+C,OAAE,IAAG,IAAC,MAAEtF,EAAGuF,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAC5CqB,EAA2B,CAAC,EAC5BC,EAA0B,CAAC,EAqBjC,MApBiB,iBAANxE,IACTuE,EAAWvE,GAAKH,KAAKC,WAAWE,EAAIA,GAAK+C,EAEzCyB,EAAUxE,EAAI,MAEC,iBAANvC,IACT8G,EAAW9G,GAAKoC,KAAKC,WAAWrC,EAAIA,GAAKuF,EAEzCwB,EAAU/G,EAAI,MAEC,iBAANwC,IACTsE,EAAWtE,GAAKJ,KAAKC,WAAWG,EAAIA,GAAKgD,EAEzCuB,EAAUvE,EAAI,GAEC,iBAANC,IACTqE,EAAWrE,GAAKL,KAAKC,WAAWI,EAAIA,GAAKgD,EAEzCsB,EAAUtE,EAAI,GAETL,KAAKM,YACTsE,MAAMF,E,qWAAY,CAAF,CACfC,UAAAA,EACAE,QAAQ,EACRP,SAAU,IACVQ,OAAQC,EAAAA,cACL/B,IAEJgC,MAAK,SAACtE,GAKL,OAJK,EAAKuE,mBAER,EAAK3E,YAAYiE,KAAK,EAAKtE,WAAWY,SAEjCH,CACT,GACJ,GAAC,8BACD,WAAmB,WAEjB,OAAOV,KAAKM,YAAYuE,SAASK,KAAI,SAACxE,GAEpC,MAKI,EAAKuC,eAAc,IAJrB9C,EAAG+C,OAAE,IAAG,IAAC,MACTtF,EAAGuF,OAAE,IAAG,IAAC,MACT/C,EAAGgD,OAAE,IAAG,IAAC,MACT/C,EAAGgD,OAAE,IAAG,IAAC,EAEX8B,OAAOC,KAAK1E,GAAO2E,SAAQ,SAAC5C,GAC1B,IAAM6C,EAAM5E,EAAM+B,GACN,MAARA,EACF,EAAKxC,WAAWE,EAAI+C,EAAKoC,EACR,MAAR7C,EACT,EAAKxC,WAAWrC,EAAIuF,EAAKmC,EACR,MAAR7C,EACT,EAAKxC,WAAWG,EAAIgD,EAAKkC,EACR,MAAR7C,IACT,EAAKxC,WAAWI,EAAIgD,EAAKiC,EAE7B,GACF,IAAGC,MACL,GAAC,6BACD,WACE,OAAOvF,KAAKM,YAAYkF,eAC1B,GAAC,mBACD,WAA4B,IAAtBlB,EAAmB,UAAH,6CAAG,EACjBnE,EAAI/B,EAAQ,EAAG4B,KAAKgE,eACpBpG,EAAIQ,EAAQ,EAAG4B,KAAKiE,gBACpB7D,EAAIhC,EAAQ,EAAG4B,KAAKgC,gBAAgBpE,IACpCyC,EAAIjC,EAAQ,EAAG4B,KAAKiC,gBAAgBrE,IAC1CoC,KAAKqE,cAAc,CAAElE,EAAAA,EAAGvC,EAAAA,EAAGwC,EAAAA,EAAGC,EAAAA,GAAK,CAAEiE,SAAAA,GACvC,GAAC,2BACD,SAAcxB,EAAiBlF,GAAoC,IAAzB6H,EAAkB,UAAH,8CACvD,EAMIzF,KAAKmC,cALPlD,EAAe,EAAfA,gBACAC,EAAc,EAAdA,eACAC,EAAe,EAAfA,gBACAG,EAAY,EAAZA,aACAC,EAAa,EAAbA,cAEF,EAA4CS,KAAKiD,eAAc,IAAvDrF,EAAGuF,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EACjCqC,EAAK9H,EAAIuF,EACf,UAAiBlE,EAAe,GAAzB0G,EAAE,KAAEC,EAAE,KACTzB,GAA0B,iBAAbrB,EAAM,GAAkBA,EAAM,GAAK6C,IAAOA,EAAKvC,GAC5DgB,GAA0B,iBAAbtB,EAAM,GAAkBA,EAAM,GAAK8C,IAAOA,EAAKvC,GAChE,GAAIoC,EAAQ,CASV,IAAMI,EAAK3G,EAAiB,EACtB4G,EAAK3G,EAAkB,EACvB4G,EAAKzG,EAAe6D,EACpB6C,EAAKzG,EAAgB4D,EAC3BgB,EACE/F,EAAQ2H,GAAMF,EAAKE,IAAOL,EAAK,GAAI,CAAC,EAAGK,IACrCrI,EAAYyG,EAAK4B,EAAIL,EAAItH,EAAQyH,EAAKE,EAAI,CAAC,EAAG,MAAQ,EAC1D3B,EACEhG,EAAQ4H,GAAMF,EAAKE,IAAON,EAAK,GAAI,CAAC,EAAGM,IACrCtI,EAAY0G,EAAK4B,EAAIN,EAAItH,EAAQ0H,EAAKE,EAAI,CAAC,EAAG,MAAQ,CAC5D,CAGA,MAAO,CAFP7B,GAAM,EAAIuB,EACVtB,GAAM,EAAIsB,EAEZ,GAAC,wBACD,SACEO,EACAC,EACAC,EACAC,GAEA,IADAtD,EAAkB,UAAH,6CAAG,GAElB,EAAqC9C,KAAKiD,eAAc,IAAlD9C,EAAAA,OAAC,IAAG,IAAC,MAAEvC,EAAAA,OAAC,IAAG,IAAC,MAAEwC,EAAAA,OAAC,IAAG,IAAC,MAAEC,EAAAA,OAAC,IAAG,IAAC,EAC1BgG,EAASrG,KAAKgE,cACpB,GAAIhE,KAAKsG,UAAU,UAAW,CAE5B,IAAIC,EAAKnI,EAAQ+B,EAAGkG,GACpBlG,EAAIoG,GAAKC,EAAAA,EAAAA,IAAcrG,EAAIoG,EAAI,CAAEpI,IAAK,MAEtCoI,EAAKnI,EAAS+B,GAAK8F,EAAQI,GAC3BlG,EAAIoG,GAAKE,EAAAA,EAAAA,IAAetG,EAAIoG,EAAI,CAAEpI,IAAK,KACzC,MACEgC,EAAI/B,EAAS+B,GAAK8F,EAAQI,GAE5B,IAAMK,EAAS1G,KAAKiE,eACpB,GAAIjE,KAAKsG,UAAU,SAAU,CAE3B,IAAIK,EAAKvI,EAAQR,EAAG8I,GACpB9I,EAAI+I,GAAKH,EAAAA,EAAAA,IAAc5I,EAAI+I,EAAI,CAAExI,IAAK,EAAGyI,KAAM,IAE/CD,EAAKvI,EAASR,GAAKsI,EAAQQ,GAC3B9I,EAAI+I,GAAKF,EAAAA,EAAAA,IAAe7I,EAAI+I,EAAI,CAAExI,IAAK,EAAGyI,KAAM,GAClD,MACEhJ,EAAIQ,EAASR,GAAKsI,EAAQQ,GAE5B,MAAiB1G,KAAKkE,cAAcpB,EAAOlF,GAAE,eAAtCuG,EAAE,KAAEC,EAAE,KACb,GAAIpE,KAAKsG,UAAU,SAAU,CAE3B,IAAMO,EAAO7G,KAAKqB,UAAUnC,eACxBkD,EAAKhE,EAAQgC,EAAGJ,KAAKgC,mBACzB5B,EAAIgC,GAAKoE,EAAAA,EAAAA,IAAcpG,EAAIgC,EAAI,CAAEjE,IAAK0I,IAEtCzE,EAAKhE,EAASgC,GAAK+D,EAAKgC,EAASnG,KAAKgC,gBAAgBpE,IACtDwC,EAAIgC,GAAKqE,EAAAA,EAAAA,IAAerG,EAAIgC,EAAI,CAAEjE,IAAK0I,IAEvC,IAAMC,EAAO9G,KAAKqB,UAAUlC,gBACxBkD,EAAKjE,EAAQiC,EAAGL,KAAKiC,mBACzB5B,EAAIgC,GAAKmE,EAAAA,EAAAA,IAAcnG,EAAIgC,EAAI,CAAElE,IAAK2I,IAEtCzE,EAAKjE,EAASiC,GAAK+D,EAAKgC,EAASpG,KAAKiC,gBAAgBrE,IACtDyC,EAAIgC,GAAKoE,EAAAA,EAAAA,IAAepG,EAAIgC,EAAI,CAAElE,IAAK2I,GACzC,MACE1G,EAAIhC,EAASgC,GAAK+D,EAAKgC,EAASnG,KAAKgC,gBAAgBpE,IACrDyC,EAAIjC,EAASiC,GAAK+D,EAAKgC,EAASpG,KAAKiC,gBAAgBrE,IAEvDoC,KAAKqE,cAAc,CAAElE,EAAAA,EAAGvC,EAAAA,EAAGwC,EAAAA,EAAGC,EAAAA,GAAK,CAAEiE,SAAU,GACjD,GAAC,yBACD,WAA2D,IAA/CxB,EAAkB,UAAH,6CAAG,GAAI+B,EAAkB,UAAH,8CAC/C,EAAqC7E,KAAKiD,eAAc,IAAlD9C,EAAAA,OAAC,IAAG,IAAC,MAAEvC,EAAAA,OAAC,IAAG,IAAC,MAAEwC,EAAAA,OAAC,IAAG,IAAC,MAAEC,EAAAA,OAAC,IAAG,IAAC,EAEhC,GAAIL,KAAKsG,UAAU,UAAW,CAC5B,IAAMC,EAAKnI,EAAQ+B,EAAGH,KAAKgE,eAC3B7D,EAAIoG,GAAKC,EAAAA,EAAAA,IAAcrG,EAAIoG,EAAI,CAAEpI,IAAK,KACxC,CACA,GAAI6B,KAAKsG,UAAU,SAAU,CAC3B,IAAMK,EAAKvI,EAAQR,EAAGoC,KAAKiE,gBAC3BrG,EAAI+I,GAAKH,EAAAA,EAAAA,IAAc5I,EAAI+I,EAAI,CAAExI,IAAK,EAAGyI,KAAM,GACjD,CACA,GAAI5G,KAAKsG,UAAU,aAAc,CAC/B,IAAMO,EAAO7G,KAAKqB,UAAUnC,eACtBkD,EAAKhE,EAAQgC,EAAGJ,KAAKgC,mBAC3B5B,EAAIgC,GAAKoE,EAAAA,EAAAA,IAAcpG,EAAIgC,EAAI,CAAEjE,IAAK0I,IACtC,IAAMC,EAAO9G,KAAKqB,UAAUlC,gBACtBkD,EAAKjE,EAAQiC,EAAGL,KAAKiC,mBAC3B5B,EAAIgC,GAAKmE,EAAAA,EAAAA,IAAcnG,EAAIgC,EAAI,CAAElE,IAAK2I,GACxC,CACA9G,KAAK6C,YAAY,CAAE1C,EAAAA,EAAGvC,EAAAA,EAAGwC,EAAAA,EAAGC,EAAAA,GAAKyC,EAAO,CAAE+B,OAAAA,GAC5C,GAAC,sBACD,WAA+B,IAAtB/B,EAAkB,UAAH,6CAAG,GAInBK,EAAKnD,KAAKiD,eAAerF,GAAK,EAE9B8H,EAAKtH,EAAQ4B,KAAK4B,cAAe5B,KAAKiE,gBAEtC0C,EAAKvI,EAAQ,EAAG4B,KAAKiE,gBAG3B,GAAKyB,EAAKiB,GAAMxD,GAAMwD,GAAQjB,EAAKiB,GAAMxD,GAAMwD,EAC7C,GAAI3G,KAAK+G,eAAgB,CAEvB,MAAiB/G,KAAKkE,cAAcpB,EAAO4C,EAAI1F,KAAK+G,gBAAe,eAA5D5C,EAAE,KAAEC,EAAE,KACb,EAAiCpE,KAAKiD,eAAc,IAA5C7C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAC5BrD,KAAK6C,YACH,CAAE1C,EAAG,EAAGvC,EAAG8H,EAAItF,EAAGgD,EAAKe,EAAI9D,EAAGgD,EAAKe,GACnC,CAAES,QAAQ,GAEd,MAEE7E,KAAK6C,YAAY,CAAEjF,EAAG8H,GAAM5C,EAAO,CAAE+B,QAAQ,SAI3C7E,KAAK+G,eAEP/G,KAAK6C,YAAY,CAAE1C,EAAG,EAAGvC,EAAG+I,EAAIvG,EAAG,EAAGC,EAAG,GAAK,CAAEwE,QAAQ,IAGxD7E,KAAK6C,YAAY,CAAEjF,EAAG+I,GAAM7D,EAAO,CAAE+B,QAAQ,GAGnD,GAAC,yBACD,SACEP,EACA0C,EACAvE,EACAwE,GAMA,WACMC,EACJlH,KAAKqB,UAAkB,MAARoB,EAAc,iBAAmB,mBAC5C0E,EAAU,IAAMnH,KAAK4B,cACrBwF,EAAQpH,KAAKiD,eAAeR,IAAQ,EACpC4E,EAAUrH,KAAKsH,iBAAyB,MAAR7E,EAAc,EAAI,GAClD8E,EAAOP,EAAU,EAAI,GAAK,EAE1BQ,EACJlJ,KAAKH,IAAI,EAAGG,KAAKJ,IAAII,KAAKmJ,IAAIT,GAAUG,EAAUD,IAAcK,EAE5DG,EAAYpJ,KAAKH,IAAI,IAAKG,KAAKJ,IAAI,KAAMoG,IAC/C,GAAIrG,EAAUmJ,EAAQI,EAAUH,GAE9BrH,KAAKqE,eAAc,UACd5B,EAAM2E,EAAQI,GACjB,CAAE1C,OAAQ6C,EAAAA,YAAarD,SAAUoD,QAE9B,CAEL,IAAME,EAAUxJ,EAAQgJ,EAAQI,EAAUH,GAAWD,EACjDS,EAAW,EACf,GAAI7H,KAAKsG,UAAU,aAAc,CAE/B,IAAMwB,GACH7J,EAAUmJ,EAAOC,GACd/I,KAAKyJ,KAAK,EAAIzJ,KAAKmJ,IAAIG,EAAUJ,IACjC,IACF,EAAIlJ,KAAKmJ,IAAID,GAAaE,GAE9BG,EAAWvJ,KAAKJ,IAAI,GAAK4J,EAAUZ,EAAY,GAAKK,CACtD,CACA,GAA0B,mBAAfN,EAETA,EAAWxE,EAAKmF,EAASC,GAAU,SAACG,GAGlC,MAAO,CACL1D,UAFS,EAAIhG,KAAKyJ,KAAK,EAAIzJ,KAAKmJ,IAAIO,EAASR,KAE9BE,EACf5C,OAAQ6C,EAAAA,YAEZ,QACK,CAEL,IAAMK,EAAS1J,KAAKH,KAAKyJ,EAAUC,GAAYN,EAAM,GAAKA,EAEpDU,EAAK,EAAI3J,KAAKyJ,KAAK,EAAIzJ,KAAKmJ,IAAIO,EAASR,IAChC,IAAXQ,EAEFhI,KAAKqE,eAAc,UAAG5B,EAAMrE,EAAQgJ,EAAQY,EAAQX,KAGpDrH,KAAKqE,eAAc,UACd5B,EAAM2E,EAAQY,GACjB,CACE1D,SAAU2D,EAAKP,EACf5C,OAAQ6C,EAAAA,cAEV3C,MAAK,WAEL,EAAKX,eAAc,UAAG5B,EAAMrE,EAAQgJ,EAAQY,EAAQX,IACtD,GAEJ,CACF,CACF,KAAC,EA5pBS,GAkrBZ,UC9rBO,IAAMa,EAAc,6jDAmFdC,EAAY,kVChFnBC,EACJ,8IACK,SAASC,EACdC,EACAC,GAEA,GAAID,EAAK,CACP,IAAIE,EAAU,GACdrD,OAAOC,KAAKmD,GAAKlD,SAAQ,SAACzH,GACxB,IAAM6E,EAAM7E,EAAE6K,QAAQ,WAAY,OAAOC,cACzC,GAAe,IAAXH,EAAI3K,IAAa2K,EAAI3K,GAGlB,CACL,IAAM+K,EACc,iBAAXJ,EAAI3K,IACX,SAASgL,KAAKnG,IACd2F,EAAUQ,KAAK,IAAD,OAAKnG,IACf,KACA,GACA6C,EAAM,GAAH,OAAMiD,EAAI3K,IAAE,OAAG+K,GACxBH,GAAW,GAAJ,OAAO/F,EAAG,YAAI6C,EAAG,IAC1B,MAVEgD,EAAIzI,MAAMgJ,YAAYpG,EAAK,GAW/B,IACI+F,IACFF,EAAIzI,MAAM2I,SAAWA,EAEzB,CACA,OAAOF,CACT,CA+EO,SAASQ,EACdC,EACAtK,GAEA,IAAIuK,EAAO,KAaX,OAZIvK,IACFuK,EAAOX,EAAS7I,SAASI,cAAc,QAAS,CAC9CqJ,aAAc,OACd3H,MAAO,EACPE,OAAQ,EACR0H,QAAS,eACTC,OAAQJ,EAAa,QAAU,QAC/BK,WAAY,OACZtJ,QAAS,KAEXrB,EAAQ4K,YAAYL,IAEfA,CACT,CAEO,SAASM,EACdC,EACAR,EACAS,EACAC,EACAhL,GAEA,IAAMiL,EAAUrB,EAAS7I,SAASI,cAAc,OAAQ,CACtD+J,SAAU,WACVT,QAAS,OACT5H,MAAO,OACPE,OAAQ,OACRoI,eAAgB,SAChBC,WAAY,SACZC,SAAU,SACVC,KAAM,EACNC,UAAWjB,IAAeQ,EAAUE,EAAU,EAC9CQ,WAAYlB,GAAcQ,EAAU,EAAIE,IAO1C,OALID,GAQC,SAAuB/K,GAC5B,IAAMyL,EAAU7B,EAAS7I,SAASI,cAAc,QAAS,CACvD+J,SAAU,WACVQ,IAAK,MACLC,KAAM,MACNJ,WAAY,GACZC,YAAa,GACb3I,MAAO,GACPE,OAAQ,GACR0H,QAAS,iBAEXgB,EAAQnK,UAAYmI,EACpBzJ,EAAQ4K,YAAYa,EACtB,CApBIG,CAAcX,GAEhBjL,EAAQ4K,YAAYK,GAEbA,CACT,C,8NCvJe,SAAS,EAACY,GACvB,MAA0CA,GAAS,CAAC,EAA5CZ,EAAO,EAAPA,QAASa,EAAM,EAANA,OAAQC,EAAG,EAAHA,IAAKxH,EAAO,EAAPA,QAE9B,YAAsB,IAAXuH,GACTD,EAAMC,OAAS,MACRE,EAAAA,EAAAA,IAAUD,GACdxF,MAAK,SAACsD,GASL,OARAgC,EAAMC,OAAS,IAAIhM,E,qWAAO,EACxBE,QAAS6J,GACNtF,IAELsH,EAAMhJ,MAAQgH,EAAIlJ,aAClBkL,EAAM9I,OAAS8G,EAAIjJ,cACnBqK,EAAQ3J,UAAY,GACpB2J,EAAQL,YAAYf,IACb,CACT,IAAE,OACK,WDuJN,IAAqB7J,EACpBiM,ECtJAhB,EAAQ3J,UAAY,GDqJAtB,ECpJRiL,GDqJZgB,EAAQrC,EAAS7I,SAASI,cAAc,OAAQ,CACpD+J,SAAU,WACVQ,IAAK,MACLC,KAAM,MACNxH,UAAW,2BACXtB,MAAO,OACPqJ,MAAO,OACPC,SAAU,OACV1B,QAAS,OACT2B,cAAe,SACfjB,eAAgB,SAChBC,WAAY,SACZ/J,QAAS,OAELC,UAAY,yDAAH,OAEToI,EAAS,uEAIf1J,EAAQ4K,YAAYqB,ECxKhB,KAEGlG,QAAQC,SACjB,C,qBCxBe,SAASqG,EAAsCpL,GAC5D,KAAIM,KAAK+K,UAIL/K,KAAKgL,UAAYhL,KAAKgL,SAASC,WAAnC,CAGA,MAAyBvL,EAAjBuG,MAAO9F,OAAC,IAAG,IAAC,EACpB,GAAIH,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAGF,IAAMkG,GAAanL,KAAKoL,aAAepL,KAAKqL,cAE5C,GAAa,IADA/M,KAAKgN,MAAMtL,KAAKuL,WAAaJ,GAC1B,CACd,IAAQZ,GACLvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GADhDb,OAER,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAGEwG,MAAMtL,GACRoK,EAAOmB,cAEPnB,EAAOoB,WAAWxL,EAAG,EAAG,EAAG,EAE/B,CACF,CACF,KAAO,CACL,IAAQoK,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAGEwG,MAAMtL,GACRoK,EAAOmB,cAEPnB,EAAOoB,WAAWxL,EAAG,EAAG,EAAG,EAE/B,CACF,CArCA,CAsCF,CC7Ce,SAAS+F,EAAqCxG,GAC3D,KAAIM,KAAK+K,UAIL/K,KAAKgL,UAAYhL,KAAKgL,SAASC,WAAnC,CAIA,MAAyBvL,EAAjBwG,MAAOtI,OAAC,IAAG,IAAC,EACpB,GAAIoC,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAGF,IAAMkG,GAAanL,KAAKoL,aAAepL,KAAKqL,cAE5C,GAAa,IADA/M,KAAKgN,MAAMtL,KAAKuL,WAAaJ,GAC1B,CACd,IAAQZ,GACLvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GADhDb,OAER,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAGEwG,MAAM7N,GACR2M,EAAOmB,cAEPnB,EAAOoB,WAAW,EAAG/N,EAAG,EAAG,EAE/B,CACF,CACF,KAAO,CACL,IAAQ2M,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAGEwG,MAAM7N,GACR2M,EAAOmB,cAEPnB,EAAOoB,WAAW,EAAG/N,EAAG,EAAG,EAE/B,CACF,CAtCA,CAuCF,CC7Ce,SAASiO,EAAqCnM,GAAW,WACtE,IAAIM,KAAK+K,SAGT,GAAI/K,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAEF,IAAQsF,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACR,GAAyB,WAArBvK,KAAK8L,aAA4BvB,EAAQ,CAC3C,GAAIA,EAAOtF,kBACT,OAEF,MAAwCvF,EAAhCoI,SAAAA,OAAQ,IAAG,IAAC,EAAEiE,EAAkBrM,EAAlBqM,cACtB,GAAIjE,EAAW,GAAKiE,EAAe,CACjC,IAAM9E,EAAa,SACjBxE,EACAmF,EACAC,EACAmE,GAEA,GAAI,aAAgBd,EAAS,CAC3B,IAAMC,GAAa,EAAKC,aAAe,EAAKC,cAE5C,GAAgB,IAAZzD,EAAe,CACjB,MAA6BoE,EAAOpE,EAAUC,GAAtCvD,EAAQ,EAARA,SAAUQ,EAAM,EAANA,OAElBN,QAAQyH,IAAI,CAEV1B,EAAOlG,eAAc,UAChB5B,GAAO8H,EAAOtH,eAAeR,IAAQ,GAAKmF,GAC7C,CACEtD,SAAAA,EACAQ,OAAAA,EACAoH,OAAQ,SAACC,GAGP,IAAMC,EAAI9N,KAAKmJ,IAAIG,GACbyE,EAAK/N,KAAKmJ,IAAIG,EAAUC,GAC9B,OAAOvJ,KAAKJ,IAAImO,EAAKF,EAAUC,GAAKA,CACtC,IAIJ,EAAK/H,cAAc,EAAKkH,WAAa1D,EAAU,CAC7CvD,SAAAA,EACAQ,OAAAA,EACAoH,OAAQ,SAACC,GAGP,IAAMC,EAAI9N,KAAKmJ,IAAIG,GACb0E,EAAIhO,KAAKmJ,IAAII,GACbwE,EAAK/N,KAAKmJ,IAAIG,EAAUC,GAC9B,OAAOvJ,KAAKH,IAAIkO,EAAKF,EAAWC,EAAG,GAAKE,CAC1C,MAEDtH,MAAK,WAEF,aAAgBkG,GAClB,EAAK7G,cAAc8G,EAEvB,GACF,KAAO,CAEL,IAAMoB,EAAO,EAAKhB,WAAaJ,EACzB5D,EAAOgF,EAAO,EAAI,GAAK,EAEvBvE,EAAS1J,KAAKH,KAAK0J,EAAW0E,GAAQhF,EAAM,GAAKA,EACvD,EAA6ByE,EAAOhE,GAA5B1D,EAAQ,EAARA,SAAUQ,EAAM,EAANA,OACH,IAAXkD,EAEF,EAAK3D,cAAc8G,GAEnB,EAAK9G,cAAc,EAAKkH,WAAavD,EAAQ,CAC3C1D,SAAAA,EACAQ,OAAAA,IACCE,MAAK,WAEF,aAAgBkG,GAClB,EAAK7G,cAAc8G,EAEvB,GAEJ,CACF,CACF,EAEA,EAAyCY,EAAc,MAA/CzH,EAAQ,EAARA,SAAUkI,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SAC5B,GAAwB,aAApBzM,KAAK0M,WAA2B,CAClC,IAAMC,EAASpC,EAAOvI,kBAEF,IAAd2K,EAAO,IAA0B,IAAdA,EAAO,IAC9BpC,EAAOqC,YAAYtI,EAAUkI,EAAU,KAEzCjC,EAAOqC,YAAYtI,EAAUmI,EAAU,IAAKxF,EAC9C,KAAO,CACLsD,EAAOqC,YAAYtI,EAAUkI,EAAU,IAAKvF,GAC5C,IAAM4F,EAAStC,EAAOtI,kBAEF,IAAd4K,EAAO,IAA0B,IAAdA,EAAO,IAC9BtC,EAAOqC,YAAYtI,EAAUmI,EAAU,IAE3C,CACF,CACA,MACF,CACA,GAAyB,aAArBzM,KAAK8L,YAA4B,CACnC,GAAIvB,GAAUA,EAAOtF,kBACnB,OAOF,YAJIjF,KAAK8M,aAA+B,SAAhBpN,EAAEqN,YACxB/M,KAAKgN,QACLhN,KAAK8L,YAAc,QAGvB,CACA,IACMmB,EAAiB,IADVjN,KAAKqL,cACS,GAAKrL,KAAKuL,WAAavL,KAAKqL,cACvDrL,KAAKkN,MACHD,EAAQjN,KAAKoL,aAAe9M,KAAK6O,KAAKF,GAAS3O,KAAK8O,MAAMH,GAW9D,KAAO,CACL,IAAQ1C,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEF,MAAwCvF,EAAhCoI,SAAAA,OAAQ,IAAG,IAAC,EAAEiE,EAAkBrM,EAAlBqM,cACtB,GAAIjE,EAAW,GAAKiE,EAAe,CAEjC,MAAyCA,EAAc,MAA/CzH,EAAQ,EAARA,SAAUkI,EAAQ,EAARA,SAAUC,EAAQ,EAARA,SAC5BlC,EAAOqC,YAAYtI,EAAUkI,EAAU,KACvCjC,EAAOqC,YAAYtI,EAAUmI,EAAU,IACzC,CACF,CACF,CACF,CCpJe,SAASY,IACtB,IAAIrN,KAAK+K,SAGT,GAAI/K,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAEF,IAAQsF,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACR,GAAIA,GAAUA,EAAOtF,kBACnB,OAE6B,mBAApBjF,KAAKsN,YACdtN,KAAKsN,YAET,KAAO,CACL,IAAQ/C,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,GAAUA,EAAOtF,kBACnB,OAE6B,mBAApBjF,KAAKsN,YACdtN,KAAKsN,YAET,CACF,CCxBe,SAASC,IACtB,IAAIvN,KAAK+K,SAGT,GAAI/K,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAEF,IAAQsF,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACR,GAAIA,GAAUA,EAAOtF,kBACnB,OAEyB,mBAAhBjF,KAAKwN,QACdxN,KAAKwN,QAET,KAAO,CACL,IAAQjD,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,GAAUA,EAAOtF,kBACnB,OAEyB,mBAAhBjF,KAAKwN,QACdxN,KAAKwN,QAET,CACF,CCvBe,SAASC,EAAyC/N,GAC/D,IAAIM,KAAK+K,SAAT,CAGA,IAAMjI,EAAQpD,EAAEoD,MAAM,GACtB,GAAI9C,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAGF,IAAMkG,GAAanL,KAAKoL,aAAepL,KAAKqL,cAE5C,GAAa,IADA/M,KAAKgN,MAAMtL,KAAKuL,WAAaJ,GAC1B,CACd,IAAQZ,GACLvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GADhDb,OAER,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEFsF,EAAO3L,SAASkE,EAClB,CACF,CACF,KAAO,CACL,IAAQyH,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEFsF,EAAO3L,SAASkE,EAClB,CACF,CA3BA,CA4BF,C,qlBC9Be,SAAS4K,EAA4ChO,GAClE,IAAIM,KAAK+K,SAAT,CAGyB,IAArB/K,KAAK2N,aAAqBjO,EAAEkO,QAAQrI,OAAS,IAE/CvF,KAAK2N,YAAc,GAErB,IAAIE,EAAY,EAChB,GAAI7N,gBAAgBkL,EAAS,CAC3B2C,GAAa7N,KAAK8N,mBAClB,IAAQvD,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACFhF,GAAUvF,KAAKwL,SAAW,IAAIjG,OACpC,GAAIgF,EAAQ,CACVsD,GAAatD,EAAOuD,mBAMpB,MAA0CvD,EAAOtH,eAAc,IAAvD7C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAAK0K,GAAI,YACrC,EAAyBxD,EAAOjD,iBAAgB,eAAzCqF,EAAM,KAAEE,EAAM,KAEftD,EAAgC,IAAtBvJ,KAAKoL,aACf4C,EAAShO,KAAKoL,eAAiB7F,EAAS,EACtB,aAApBvF,KAAK0M,YAEJzO,EAAUmF,EAAIuJ,KACbtJ,GAAMwJ,EAAO,KAAOmB,GAAY3K,GAAMwJ,EAAO,KAAOtD,IAGtDgB,EAAOlG,cAAc,GACjBjE,EAAGhC,EAAQgF,EAAIuJ,GAAStM,EAAGgD,GAAO0K,GACpC,CAAEzJ,SAAU,KAKbrG,EAAUoF,EAAIwJ,KACbzJ,GAAMuJ,EAAO,KAAOqB,GAAY5K,GAAMuJ,EAAO,KAAOpD,IAGtDgB,EAAOlG,cAAc,GACjBjE,EAAGgD,EAAI/C,EAAGjC,EAAQiF,EAAIwJ,IAAYkB,GACpC,CAAEzJ,SAAU,GAIpB,CACF,KAAO,CAEL,IAAQiG,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACJA,IACFsD,GAAatD,EAAOuD,mBAExB,CACID,EAAY,GAAK7N,KAAKgL,WAGxBhL,KAAKgL,SAASiD,aAAc,EAC5BjO,KAAKgL,SAASkD,mBAAoB,EAClClO,KAAKgL,SAASmD,mBAAoB,EAClCnO,KAAKgL,SAASoD,YAAc,KACxBpO,KAAKgL,SAASqD,gBAChBC,aAAatO,KAAKgL,SAASqD,eAC3BrO,KAAKgL,SAASqD,cAAgB,MA9DlC,CAiEF,CCnEA,IAAME,EAAW,GACXC,EAAa,IACbC,EAAc,SAClB1B,EAAiB,KAGd,mBAFF2B,EAAE,KAAEC,EAAE,oBACNC,EAAE,KAAEC,EAAE,KAEP,MAAkB,aAAd9B,EACKzO,KAAKmJ,IAAIiH,EAAKE,GAAM,EAAItQ,KAAKmJ,IAAIkH,EAAKE,IAAOH,EAAKE,GAAM,EAExDtQ,KAAKmJ,IAAIkH,EAAKE,GAAM,EAAIvQ,KAAKmJ,IAAIiH,EAAKE,IAAOD,EAAKE,GAAM,CAEnE,EAEe,SAASC,EAA2CpP,GACjE,IAAIM,KAAK+K,SAAT,CAGyB,IAArB/K,KAAK2N,aAA0C,IAArBjO,EAAEkO,QAAQrI,SAEtCvF,KAAK2N,YAAc,GAErB3N,KAAK+O,UAAiC,IAArBrP,EAAEkO,QAAQrI,QAAqC,IAArBvF,KAAK2N,YAChD,cAA2BjO,EAAEoD,MAAK,GAAxBkM,GAAF,KAAQ,MAAElM,EAAK,KACfiK,EAA4DrN,EAA5DqN,UAAS,EAAmDrN,EAAjDuG,MAAAA,OAAK,IAAG,IAAC,IAAwCvG,EAAtCwG,MAAAA,OAAK,IAAG,IAAC,IAA6BxG,EAA3ByG,OAAAA,OAAM,IAAG,IAAC,IAAiBzG,EAAf0G,OAAAA,OAAM,IAAG,IAAC,EAC/D,GAAIpG,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAEF,MACGjF,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,EADhDb,EAAM,EAANA,OAAQb,EAAO,EAAPA,QAEVnE,GAAUvF,KAAKwL,SAAW,IAAIjG,OACpC,GAAIgF,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEF,MAAiCsF,EAAOtH,eAAc,IAA9C7C,EAAGgD,OAAE,IAAG,IAAC,MAAE/C,EAAGgD,OAAE,IAAG,IAAC,EAC5B,EAAyBkH,EAAOjD,iBAAgB,eAAzCqF,EAAM,KAAEE,EAAM,KAEfoC,EAAuB,IAAdtC,EAAO,IAA0B,IAAdA,EAAO,GAEnCuC,EAAuB,IAAdrC,EAAO,IAA0B,IAAdA,EAAO,GACzC,GAAyB,SAArB7M,KAAK8L,cAEP9L,KAAK8L,YAAc,SACf9L,KAAK+O,WAAW,CAElB,IAAMxF,EAAgC,IAAtBvJ,KAAKoL,aACf4C,EAAShO,KAAKoL,eAAiB7F,EAAS,EACxC4J,EAAYV,EAAYzO,KAAK0M,WAAYsC,EAAQlM,GAEvD,GAAwB,aAApB9C,KAAK0M,WACP,GAAI1M,KAAK8M,aAAe1J,GAAMuJ,EAAO,IAAMwC,EACzCnP,KAAK8L,YAAc,eACd,CAGL,IAAMsD,EAASH,EAAS7I,EAAS,EAAkB,OAAd2G,EAC/BsC,EAAWJ,EAAS7I,EAAS,EAAkB,SAAd2G,GAKpC1J,GAAMwJ,EAAO,IAAMuC,IAAWpB,GAC9B3K,GAAMwJ,EAAO,IAAMwC,IAAa9F,KAEjCvJ,KAAK8L,YAAc,UAEvB,MAEA,GAAI9L,KAAK8M,aAAezJ,GAAMwJ,EAAO,IAAMsC,EACzCnP,KAAK8L,YAAc,eACd,CAGL,IAAMwD,EAAWJ,EAAS/I,EAAS,EAAkB,SAAd4G,EACjCwC,EAAYL,EAAS/I,EAAS,EAAkB,UAAd4G,GAIrC3J,GAAMuJ,EAAO,IAAM2C,IAAatB,GAChC5K,GAAMuJ,EAAO,IAAM4C,IAAchG,KAElCvJ,KAAK8L,YAAc,UAEvB,CAEJ,CAGF,GAAyB,WAArB9L,KAAK8L,YAA0B,CACjC,IAAMX,GAAanL,KAAKoL,aAAepL,KAAKqL,cAEtCkB,GAAO/F,EAAAA,EAAAA,IAAcxG,KAAKuL,WAAaJ,EAAW,CACtDhN,IAAK6B,KAAKqL,gBAERmE,EAAUrJ,EACVsJ,EAAUrJ,EAOd,GALwB,aAApBpG,KAAK0M,WACP+C,GAAWlD,EAEXiD,GAAWjD,EAETvM,KAAK+O,UAAW,CAClB,IAAIW,EAAS,EACW,aAApB1P,KAAK0M,YACPgD,EAASD,EAETD,EAAUP,EAAS,EAAIO,EAIvBE,GAFAD,EAAUrR,EAAQqR,EAAUpM,EAAIwJ,GAAUxJ,IAI1CqM,EAASF,EAITC,EAAUP,EAAS,EAAIO,EAEvBC,GAJAF,EAAUpR,EAAQoR,EAAUpM,EAAIuJ,GAAUvJ,GAO5CmH,EAAOoB,WAAW,EAAG,EAAG6D,EAASC,EAAS3M,GAE1C9C,KAAKqE,cACH8G,GAAY1E,EAAAA,EAAAA,IAAeiJ,EAAQ,CAAEvR,IAAK6B,KAAKqL,gBAC/C,CAAE/G,SAAU,GAEhB,MACEiG,EAAOoB,WAAW1F,EAAOC,EAAOsJ,EAASC,EAAS3M,GACrC,IAATyJ,GAEFvM,KAAKqE,cAAc8G,EAAW,CAAE7G,SAAU,IAG9C,MACF,CACF,KAC2B,SAArBtE,KAAK8L,cACP9L,KAAK8L,YACH9L,KAAK8M,aAAe2B,EAAYzO,KAAK0M,WAAYsC,EAAQlM,GACrD,WACA,WAGV,GAAyB,aAArB9C,KAAK8L,YAA4B,CACnC,MAAiCpM,EAAzBiQ,MAAAA,OAAK,IAAG,IAAC,IAAgBjQ,EAAdkQ,MAAAA,OAAK,IAAG,IAAC,EAC5B,EAAqD5P,KAAK6P,WAAa,CAAC,EAAC,IAAjEvO,MAAAA,OAAK,IAAG,IAAC,OAAEE,OAAAA,QAAM,IAAG,KAAC,QAAE4I,KAAAA,QAAI,IAAG,KAAC,QAAED,IAAAA,QAAG,IAAG,KAAC,GAC1CvM,GAAIU,KAAKJ,IACbI,KAAKH,IACH,IACwB,aAApB6B,KAAK0M,WACHiD,EAAQrO,EACRsO,EAAQpO,KAAW,GACzB+M,GAEF,GAEIuB,GACJtB,GAAe5Q,GAAI2Q,IAAa,EAAIC,IAAgB,EAAID,GACtDnO,GAAI,EACJC,GAAI,EACR,GAAIqJ,EAAS,CACX,IAAI7F,GAAK,EACLC,GAAK,EACLF,GAAK,EACT,GAAI8F,EAAQ7J,MAAM+C,UAAW,CAC3B,IAAMmN,GAASrG,EAAQ7J,MAAM+C,UAAUoN,MAAM,KAC7C,GAAiBD,GAAO,GAAGC,MAAM,KAAK,GAAGA,MAAM,KAAI,iBAA5CC,GAAE,MAAEC,GAAE,MACPC,GAAKJ,GAAO,GAAGC,MAAM,KAAK,GAChCnM,GAAKuM,WAAWH,IAChBnM,GAAKsM,WAAWF,IAChBtM,GAAKwM,WAAWD,GAClB,CACA/P,GAAIyD,GAAKsC,GAAUrD,EAAM,IAAMe,GAAKuG,GAAO9I,EAAQ,KAAO,EAAI1D,GAAIgG,IAClEvD,GAAIyD,GAAKsC,GAAUtD,EAAM,IAAMgB,GAAKqG,GAAM3I,GAAS,KAAO,EAAI5D,GAAIgG,GACpE,CAEA,YADA5D,KAAKqQ,gBAAgBjQ,GAAGC,GAAGzC,GAAGkS,GAAG,EAEnC,CAEA,IAAMQ,GAAc,EAAE,EAAI/K,GAAUvF,KAAKqL,cAAe,GAEpDkF,GAAKnS,EAAQ4B,KAAKuL,WAAY+E,IAC9BzS,GACF0S,IAAK/J,EAAAA,EAAAA,IAAcxG,KAAKuL,WAAagF,GAAI,CAAEpS,IAAK6B,KAAKqL,gBAEvDkF,GAAKnS,EACFP,IAAyB,aAApBmC,KAAK0M,WAA4BtG,EAASD,EAChDmK,IAEFzS,GAAI0S,IAAK9J,EAAAA,EAAAA,IAAe5I,GAAI0S,GAAI,CAAEpS,IAAK6B,KAAKqL,gBAC5CrL,KAAKqE,cAAcxG,GAAG,CAAEyG,SAAU,GACpC,KAAO,CACL,IAAQiG,IAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,GAAQ,CACV,GAAIA,GAAOtF,kBACT,OAEEjF,KAAK+O,UAEPxE,GAAOoB,WAAW,EAAG,EAAGxF,EAAQC,EAAQtD,GAGxCyH,GAAOoB,WAAW1F,EAAOC,EAAOC,EAAQC,EAAQtD,EAEpD,CACF,CAhMA,CAiMF,CCpNe,SAAS0N,EAA0C9Q,GAChE,IAAIM,KAAK+K,SAAT,CAGA,IAAI0F,EAAS,GAIb,GAHIzQ,gBAAgBkL,IAClBuF,EAASzQ,KAAK8L,aAES,IAArBpM,EAAEkO,QAAQrI,OAEZvF,KAAK2N,YAAc,EACf3N,gBAAgBkL,IAClBlL,KAAK8L,YAAc,aAEhB,GAAyB,IAArB9L,KAAK2N,YAAmB,CAEjC,GAAI3N,gBAAgBkL,GAEH,YAAXuF,EAAsB,CACxB,IACMxD,EAAiB,IADVjN,KAAKqL,cACS,GAAKrL,KAAKuL,WAAavL,KAAKqL,cACvDrL,KAAKkN,MAAM5O,KAAKgN,MAAM2B,GACxB,CAEF,MACF,CACA,IAAMnK,EAAQpD,EAAEoD,MAAM,GACtB,GAAI9C,gBAAgBkL,EAAS,CAC3B,GAAIlL,KAAKiF,kBACP,OAEF,GAAe,aAAXwL,EAEF,YADAzQ,KAAKqQ,gBAAgB,EAAG,EAAG,EAAG,EAAG,KAGnC,IAAQ9F,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEFsF,EAAOmB,YAAY5I,EAAO9C,KAAK+O,UACjC,CAEA,IAAM2B,EAAO1Q,KAAKqL,cACd4B,EAAQjN,KAAKoL,aACF,YAAXqF,IACFxD,EAAiB,IAATyD,EAAa,GAAK1Q,KAAKuL,WAAavL,KAAKqL,eAGnDrL,KAAKkN,MAAM5O,KAAKgN,MAAM2B,GACxB,KAAO,CACL,IAAQ1C,GAAWvK,KAAK4L,QAAU,CAAC,GAA3BrB,OACR,GAAIA,EAAQ,CACV,GAAIA,EAAOtF,kBACT,OAEFsF,EAAOmB,YAAY5I,EAAO9C,KAAK+O,UACjC,CACF,CAvDA,CAwDF,CClDe,SAAS4B,EAEtBlS,GAGA,IAAMmS,EAAU,IAAIC,IAAJ,CAAYpS,GAU5B,OATAmS,EAAQE,GAAG,eAAgBpD,EAAanJ,KAAKvE,OAC7C4Q,EAAQE,GAAG,cAAehC,EAAYvK,KAAKvE,OAC3C4Q,EAAQE,GAAG,aAAcN,EAAWjM,KAAKvE,OACzC4Q,EAAQE,GAAG,QAASjF,EAAMtH,KAAKvE,OAC/B4Q,EAAQE,GAAG,UAAWzD,EAAQ9I,KAAKvE,OACnC4Q,EAAQE,GAAG,YAAavD,EAAUhJ,KAAKvE,OACvC4Q,EAAQE,GAAG,YAAarD,EAAUlJ,KAAKvE,OACvC4Q,EAAQE,GAAG,SAAUhG,EAAOvG,KAAKvE,OACjC4Q,EAAQE,GAAG,QAAS5K,EAAM3B,KAAKvE,OACxB4Q,CACT,C,qkBC4dA,QAxea,WAwBX,cAkBY,WAjBCtI,EAAG,EAAdyI,UAAS,IACTC,UAAAA,OAAS,IAAG,KAAE,MACdC,YAAAA,OAAW,IAAG,IAAC,MACflE,UAAAA,OAAS,IAAG,eAAY,MACxBtD,QAAAA,OAAO,IAAG,KAAE,MACZD,WAAAA,OAAU,IAAG,GAAI,MACjB0H,aAAAA,OAAY,IAAG,GAAI,MACnBC,OAAAA,OAAM,IAAG,GAAI,MACbC,WAAAA,OAAU,IAAG,GAAI,MACjBC,aAAAA,OAAY,IAAG,GAAI,MACnBC,cAAAA,OAAa,IAAG,UAAO,EACvBC,EAAU,EAAVA,WACAC,EAAK,EAALA,MACAC,EAAS,EAATA,UACAC,EAAQ,EAARA,SACAC,EAAQ,EAARA,SAAQ,IACR3O,QAAAA,OAAO,IAAG,GAAC,EAAC,4CAxCmB,OAAI,yBACJ,OAAI,wBACL,OAAI,yBACH,OAAI,uBAClB,IAAC,yBACI,eAAY,wBACP,OAAI,wBACb,IAAI,2BACD,IAAK,6BACH,IAAK,0BACC,OAAI,qBACL,OAAI,yBACA,OAAI,wBACL,OAAI,4BACA,OAAI,sBACf,OAAI,4BACN,IAAC,yBACJ,IAAC,0BACW,OAAI,uBACV,OAAI,yBACV,IAAK,0BACJ,IAAC,0BACmC,QAoBxD,IZc2BoG,EAAoB3K,EAC3CmT,EYfEb,EAAa/Q,KAAK6R,WZ3BrB,SAAyBpT,GAC9B,IAAI6J,EACJ,IAEIA,EADqB,iBAAZ7J,EACHe,SAASC,cAAchB,GAEvBA,CAIV,CAFE,MAAOiB,GACP4I,EAAM,IACR,CAmBA,OAlBKA,GAASA,aAAe3I,aAa3B0I,EAASC,EAAK,CACZY,QAAS,SAEXZ,EAAIvI,UAAY,KAfhBuI,EAAMD,EAAS7I,SAASI,cAAc,OAAQ,CAC5C+J,SAAU,QACVS,KAAM,MACND,IAAK,MACL2H,OAAQ,OACRxQ,MAAO,OACPE,OAAQ,OACRsI,SAAU,SACVZ,QAAS,SAEX1J,SAASuS,KAAK1I,YAAYf,IAOrBA,CACT,CYHyC0J,CAAgB1J,GACrDtI,KAAKiS,WZasB7I,EYbKkI,EZae7S,EYbAsS,EZc3Ca,EAAWvJ,EAAS7I,SAASI,cAAc,OAAQ,CACvD+J,SAAU,WACVQ,IAAK,EACLC,KAAM,EACN9I,MAAO,OACPE,OAAQ,OACR4H,WAAAA,IAEF3K,EAAQ4K,YAAYuI,GACbA,GYtBL,IAAMM,EAAalS,KAAKmS,WZGrB,SAAyBpJ,EAAqBtK,GACnD,IAAMyT,EAAY7J,EAAS7I,SAASI,cAAc,OAAQ,CACxDsJ,QAAS,OACT2B,cAAe9B,EAAa,SAAW,QAGzC,OADAtK,EAAQ4K,YAAY6I,GACbA,CACT,CYVyCE,CACrB,aAAdrF,EACAgE,GAEIsB,EAAarS,KAAKsS,WZqBrB,SACLvJ,EACAmI,EACAzS,GAEA,IAAI4T,EAAY,KAehB,OAdInB,IACFmB,EAAYhK,EAAS7I,SAASI,cAAc,OAAQ,CAClD+J,SAAU,WACV4I,OAAQxJ,EAAa,MAAQ,OAC7ByJ,MAAOzJ,EAAa,OAAS,OAC7BzH,MAAOyH,EAAa,OAAS,OAC7BvH,OAAQuH,EAAa,OAAS,OAC9BG,QAAS,OACT2B,cAAe9B,EAAa,SAAW,MACvCa,eAAgB,SAChBC,WAAY,WAEdpL,EAAQ4K,YAAYgJ,IAEfA,CACT,CY1CyCI,CACrB,aAAd1F,EACAmE,GAAgBF,EAAUzL,OAAS,EACnCwL,GAEIH,EAAW5Q,KAAKgL,SAAW0H,EAAAA,MAAkB1S,KAAM,CAAC+Q,IAC1D/Q,KAAKwL,QAAUwF,EAAU9L,KAAI,SAACsF,EAAKyC,GACjC,IAAM3C,EAAe,CACnBZ,QAASJ,EACG,IAAV2D,EACc,aAAdF,EACAvD,EACAC,EACAyI,GAEFG,UAAWvJ,EAAkC,aAAdiE,EAA0BsF,GACzD7H,IAAAA,EACAlJ,MAAO,EACPE,OAAQ,EACRwB,QAAS,GACPlE,SAAW8R,EAAQ3F,eAEfvH,EADA,EAAEiP,OAAOC,UAAWD,OAAOC,WAE/B7T,UAAY6R,EAAQ3F,eAAwBvH,EAAZ,CAAC,GAAK,KACnCV,IAOP,OAJKmO,GAEH1G,EAAUH,GAAOtF,MAAK,SAAC6N,GAAI,OAAKA,GAAQ,EAAKC,cAAc7F,EAAM,IAE5D3C,CACT,IAEAtK,KAAKM,YAAc,IAAIC,IAAJ,CAAe,CAChC9B,QAASyT,EACT1R,aAAc,YACdC,cAAe,iC,IAAA,G,EAAA,E,gaAAA,2DAKZ,OALY,gCACb,WACE,MAAO,YAAP,OAAiC,aAAdsM,EAA2B,IAAM,IAAG,YACrD/M,KAAKU,MAAMyK,UAAS,MAExB,KAAC,EALgB,CAAevK,EAAAA,YAAnB,CAMZ,CAAEuK,UAAWnL,KAAKuL,eAEvBvL,KAAK+S,SAAWtJ,EAChBzJ,KAAK0M,WAAaK,EAClB/M,KAAK8M,YAAcsE,EACnBpR,KAAKgT,cAAgB3B,EACrBrR,KAAKiT,YAAc1B,GAAc,KACjCvR,KAAKwN,OAASgE,GAAS,KACvBxR,KAAKsN,WAAamE,GAAa,KAC/BzR,KAAKkT,UAAYxB,GAAY,KAC7B1R,KAAKkN,MAAM+D,EAAa,CAAE3M,SAAU,IAEpC,IAAM6O,EAAS,WACb,EAAKC,YACL,EAAKN,gBACe,mBAAbnB,GAA2BA,GACpC,EACM0B,EAAc,SAAC3T,GACnBA,EAAE4T,iBACF5T,EAAE6T,0BACJ,EACAC,OAAOC,iBAAiB,SAAUN,GAClCK,OAAOC,iBAAiB,cAAeJ,GACvCrT,KAAK0T,cAAgB,WACnBF,OAAOG,oBAAoB,SAAUR,GACrCK,OAAOG,oBAAoB,cAAeN,EAC5C,CACF,CAiVC,OAjVA,iCACD,WACE,GAAKrT,KAAK6R,YAAe7R,KAAKmS,YAAenS,KAAKwL,QAAlD,CAIA,MACExL,KAAK6R,WAAW+B,wBADVxJ,EAAI,EAAJA,KAAMD,EAAG,EAAHA,IAAK7I,EAAK,EAALA,MAAOE,EAAM,EAANA,OAE1BxB,KAAK6P,UAAY,CAAEzF,KAAAA,EAAMD,IAAAA,EAAK7I,MAAAA,EAAOE,OAAAA,GACrC,IAAM+D,EAASvF,KAAKwL,QAAQjG,OACxBA,EAAS,GACX8C,EAASrI,KAAKmS,WAAY,CACxB7Q,MACsB,aAApBtB,KAAK0M,WACDpL,EACAA,EAAQiE,GAAUA,EAAS,GAAKvF,KAAK+S,SAC3CvR,OACsB,aAApBxB,KAAK0M,WACDlL,EAAS+D,GAAUA,EAAS,GAAKvF,KAAK+S,SACtCvR,GAfV,CAkBF,GAAC,2BACD,SAAcyL,GAAgB,WAC5B,GAAKjN,KAAK6P,WAAc7P,KAAKwL,QAA7B,CAGA,MAAqCxL,KAAK6P,UAAlCzF,EAAI,EAAJA,KAAMD,EAAG,EAAHA,IAAK7I,EAAK,EAALA,MAAOE,EAAM,EAANA,OACpB2R,EAAS,SAAC7I,GACd,GAAIA,GAASA,EAAMC,QAAoB,IAAVjJ,GAA0B,IAAXE,EAAc,CACxD8I,EAAMC,OAAOzJ,YAAY,CACvB7B,gBAAiB,CAACmL,EAAO9I,EAAQ,EAAG6I,EAAM3I,EAAS,GACnDtC,eAAgBoC,EAChBnC,gBAAiBqC,EACjBpC,aAAckL,EAAMhJ,MACpBjC,cAAeiL,EAAM9I,SAEvB,IAAQjC,EAAkB+K,EAAMC,OAAOpI,cAA/B5C,cACgB,aAApB,EAAKmN,YAA6BnN,EAAgBiC,GACpD6G,EAASiC,EAAMZ,QAAS,CACtBG,WAAY,cAGlB,CACF,EACqB,iBAAVoD,EACTkG,EAAOnT,KAAKwL,QAAQyB,IAEpBjN,KAAKwL,QAAQnG,QAAQ8N,EAtBvB,CAwBF,GAAC,yBACD,WACE,IAAKnT,KAAK6P,UACR,OAAO,EAET,MAA0B7P,KAAK6P,UAAvBvO,EAAK,EAALA,MAAOE,EAAM,EAANA,OACTqS,EAAyB,aAApB7T,KAAK0M,WAA4BlL,EAASF,EACrD,OAAc,IAAPuS,EAAW,EAAIA,EAAK7T,KAAK+S,QAClC,GAAC,mBACD,SACE9F,EACAjK,GAIA,WACA,IAAKhD,KAAKwL,SAAmC,IAAxBxL,KAAKwL,QAAQjG,OAChC,OAAOf,QAAQC,UAEjB,IAAMqP,EAASxV,KAAKH,IAAIG,KAAKJ,IAAI+O,EAAOjN,KAAKwL,QAAQjG,OAAS,GAAI,GAC5DwO,EAAW/T,KAAKoL,eAAiB0I,EACvC,GAAIC,EAAU,CACZ,IAAmBC,GAAYhU,KAAKwL,QAAQxL,KAAKoL,eAAiB,CAAC,GAA3DiH,UACJ2B,GACF3L,EAAS2L,EAAS,CAChB1S,MAAO,EACPE,OAAQ,EACR1B,QAAS,KAGb,IAAmBmU,GAAYjU,KAAKwL,QAAQsI,IAAW,CAAC,GAAhDzB,UACJ4B,GACF5L,EAAS4L,EAAS,CAChB3S,MAAO,EACPE,OAAQ,EACR1B,QAAS,IAGbE,KAAKoL,aAAe0I,EACpBrJ,EAAUzK,KAAKwL,QAAQsI,IAAS9O,MAE9B,SAAC6N,GAAI,OAAKA,GAAQ,EAAKC,cAAcgB,EAAO,GAEhD,CACA,IAAMvI,GAAcuI,EAAS9T,KAAKqL,cAClC,OAAOrL,KAAKqE,cAAckH,EAAYvI,GAASgC,MAAK,SAACrH,GAInD,OAHIoW,GAAsC,mBAAnB,EAAKb,WAC1B,EAAKA,YAEAvV,CACT,GACF,GAAC,kBACD,SAAKqF,GACH,OAAOhD,KAAKkN,MAAMlN,KAAKoL,aAAe,EAAGpI,EAC3C,GAAC,kBACD,SAAKA,GACH,OAAOhD,KAAKkN,MAAMlN,KAAKoL,aAAe,EAAGpI,EAC3C,GAAC,2BACD,SACEmI,GAMA,WALAnI,EAII,UAAH,6CAAG,CAAC,EAECkR,EAAQ/I,EAAYnL,KAAKuL,WAC/B,OAAc,IAAV2I,GAAgBlU,KAAKM,YAGO,iBAArB0C,EAAQsB,UAAyBtB,EAAQsB,UAAY,GAE9DtE,KAAKuL,WAAaJ,EAClBnL,KAAKM,YAAYiE,KAAK,CAAE4G,UAAAA,IACjB3G,QAAQC,QAAQ,CAAE0G,UAAAA,MAE3BnL,KAAKuL,WAAaJ,EACXnL,KAAKM,YACTsE,MACC,CAAEuG,UAAW+I,GAAO,GAElBvP,UAAW,CAAEwG,UAAW,GACxBtG,QAAQ,EACRP,SAAU,IACVQ,OAAQC,EAAAA,cACL/B,IAGNgC,MAAK,SAACtE,GAOL,OANK,EAAKuE,mBAEJ,EAAK3E,aACP,EAAKA,YAAYiE,KAAK,CAAE4G,UAAW,EAAKI,aAGrC7K,CACT,KA5BO8D,QAAQC,QAAQ,CAAE0G,UAAWnL,KAAKuL,YA6B7C,GAAC,8BACD,WAAmB,WACjB,OAAKvL,KAAKM,YAIHN,KAAKM,YAAYuE,SAASK,KAAI,SAACxE,GAEpC,EAAK6K,YAAc7K,EAAMyK,SAC3B,IAAG5F,OANM,CAOX,GAAC,6BACD,WACE,QAAKvF,KAAKM,aAGHN,KAAKM,YAAYkF,eAC1B,GAAC,qBACD,WAEMxF,KAAKgL,WACPhL,KAAKgL,SAASmJ,UACdnU,KAAKgL,SAAW,MAEdhL,KAAK0T,gBACP1T,KAAK0T,gBACL1T,KAAK0T,cAAgB,MAEvB1T,KAAK+K,UAAW,EAChB/K,KAAKM,YAAc,KACnBN,KAAK6P,UAAY,KACjB7P,KAAKiT,YAAc,KACnBjT,KAAKwL,QAAU,KACfxL,KAAKwN,OAAS,KACdxN,KAAKsN,WAAa,KAClBtN,KAAKkT,UAAY,KACjBlT,KAAKmS,WAAa,KAClBnS,KAAKiS,UAAY,KACjBjS,KAAKsS,WAAa,KACdtS,KAAK6R,YAAc7R,KAAK6R,WAAWuC,aACrCpU,KAAK6R,WAAWuC,WAAWC,YAAYrU,KAAK6R,YAC5C7R,KAAK6R,WAAa,KAEtB,GAAC,2BACD,WAA0C,IAA5BT,IAAsB,UAAH,+CAC1BpR,KAAK6R,aAGV7R,KAAK8M,YAAcsE,EACrB,GAAC,6BACD,WAA8C,IAA9BC,IAAwB,UAAH,+CAC9BrR,KAAK6R,aAGV7R,KAAKgT,cAAgB3B,EACvB,GAAC,2BACD,WAAkD,IAApCE,EAA8B,UAAH,6CAAG,KACrCvR,KAAK6R,aAGV7R,KAAKiT,YAAc1B,EACrB,GAAC,kBACD,WAAO,WACL,GAAKvR,KAAK6R,YAAe7R,KAAK+K,SAA9B,CAGA/K,KAAK+K,UAAW,EAChB1C,EAASrI,KAAK6R,WAAY,CACxB3I,QAAS,UAGXlJ,KAAKoT,YAILpT,KAAK8S,gBAED9S,KAAKM,cACPN,KAAKuL,YAAcvL,KAAKoL,aAAepL,KAAKqL,cAC5CrL,KAAKM,YAAYiE,KAAK,CAAE4G,UAAWnL,KAAKuL,cAE1C,IAAInL,EAAI,EACJC,EAAI,EACJzC,EAAI,IACR,GAAIoC,KAAKiT,aAAejT,KAAK6P,UAAW,CACtC,MAAqC7P,KAAKiT,YAAlC7I,EAAI,EAAJA,KAAMD,EAAG,EAAHA,IAAK7I,EAAK,EAALA,MAAOE,EAAM,EAANA,OAC1B,EAKIxB,KAAK6P,WAAa,CAAC,EAAC,IAJtBzF,KAAMkK,OAAK,IAAG,IAAC,MACfnK,IAAKoK,OAAI,IAAG,IAAC,MACbjT,MAAOkT,OAAM,IAAG,IAAC,MACjBhT,OAEFpB,EAAIgK,EAAO9I,EAAQ,GAAKgT,EAAQE,EAAS,GACzCnU,EAAI8J,EAAM3I,EAAS,GAAK+S,QAHP,IAAG,IAAC,GAGoB,GACzC3W,EAAI0D,EAAQkT,GAAU,GACxB,CACAxU,KAAKqQ,gBAAgBjQ,EAAGC,EAAGzC,EAAG,EAAG,GACjC6W,YAAW,WACT,EAAKpE,gBAAgB,EAAG,EAAG,EAAG,EAAG,KAAKrL,MAAK,WACrC,EAAKsN,YACPjK,EAAS,EAAKiK,WAAY,CACxBpJ,QAAS,QAGf,GACF,GAAG,EAxCH,CAyCF,GAAC,mBACD,WAAQ,WACN,GAAKlJ,KAAK6R,aAAc7R,KAAK+K,SAA7B,CAGA/K,KAAK+K,UAAW,EAChB,IAAI3K,EAAI,EACJC,EAAI,EACJzC,EAAI,IACR,GAAIoC,KAAKiT,aAAejT,KAAK6P,UAAW,CACtC,MAAqC7P,KAAKiT,YAAlC7I,EAAI,EAAJA,KAAMD,EAAG,EAAHA,IAAK7I,EAAK,EAALA,MAAOE,EAAM,EAANA,OAC1B,EAKIxB,KAAK6P,WAAa,CAAC,EAAC,IAJtBzF,KAAMkK,OAAK,IAAG,IAAC,MACfnK,IAAKoK,OAAI,IAAG,IAAC,MACbjT,MAAOkT,OAAM,IAAG,IAAC,MACjBhT,OAEFpB,EAAIgK,EAAO9I,EAAQ,GAAKgT,EAAQE,EAAS,GACzCnU,EAAI8J,EAAM3I,EAAS,GAAK+S,QAHP,IAAG,IAAC,GAGoB,GACzC3W,EAAI0D,EAAQkT,GAAU,GACxB,CAEA,IAAQjK,GAAYvK,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GAAjEb,OACJA,GACFA,EAAO9I,QAELzB,KAAKsS,YACPjK,EAASrI,KAAKsS,WAAY,CACxBpJ,QAAS,SAGblJ,KAAKqQ,gBAAgBjQ,EAAGC,EAAGzC,EAAG,EAAG,KAAKoH,MAAK,WACrC,EAAKgO,cACP,EAAKmB,UACI,EAAKtC,YACdxJ,EAAS,EAAKwJ,WAAY,CACxB3I,QAAS,QAGf,GAnCA,CAoCF,GAAC,6BACD,SACE9I,EACAC,EACAzC,EACAkS,GAEA,IADAxL,EAAmB,UAAH,6CAAG,EAEbsN,EAAW5R,KAAKiS,UACtB,GAAIL,EAAU,CACZ,IAAQlI,GACL1J,KAAKwL,SAAWxL,KAAKwL,QAAQxL,KAAKoL,eAAkB,CAAC,GADhD1B,QAaR,GAXIA,GACFrB,EAASqB,EAAS,CAChBI,SAAU,UACVlH,UAAW,aAAF,OAAexC,EAAC,cAAMC,EAAC,qBAAazC,EAAC,KAC9CqJ,WAAY3C,EAAW,EAAI,aAAH,OAAgBA,EAAQ,MAAO,KAG3D+D,EAASuJ,EAAU,CACjB9R,QAASgQ,EACT7I,WAAY3C,EAAW,EAAI,WAAH,OAAcA,EAAQ,MAAO,KAEnDA,EAAW,EACb,OAAO,IAAIE,SAAc,SAACC,GACxBmN,EAAS8C,gBAAkB,SAAChV,GAEtBA,EAAE+Q,SAAWmB,GAA+B,YAAnBlS,EAAEc,eAC7BoR,EAAS8C,gBAAkB,KACvBhL,GACFrB,EAASqB,EAAS,CAChBI,SAAU,SACV7C,WAAY,SAGhBoB,EAASuJ,EAAU,CACjB3K,WAAY,SAEdxC,IAEJ,CACF,GAEJ,CACA,OAAOD,QAAQC,SACjB,KAAC,EAxcU,G,mQCHE,SAASkQ,GAAa,GASxB,IARXC,EAAI,EAAJA,KACAC,EAAO,EAAPA,QACAC,EAAQ,EAARA,SACGC,GAAU,YAMP9H,EAAS4H,EAAcD,EAAKjS,QAAQkS,GAAjB,EACnBG,EAAU,IAAI9J,E,uWAAQ,EAC1B8F,UAAW4D,EACX3D,YAAahE,EACbwE,UAAW,WACW,mBAAbqD,GAA2BA,GACpC,EACAtD,MAAO,WACLwD,EAAQhI,OACV,GACG+H,IAELC,EAAQC,MACV,C","sources":["webpack:///../src/entity/utils.ts","webpack:///../src/entity/index.ts","webpack:///../src/svgIcon.ts","webpack:///../src/dom.ts","webpack:///../src/image.ts","webpack:///../src/events/rotate.ts","webpack:///../src/events/scale.ts","webpack:///../src/events/swipe.ts","webpack:///../src/events/longTap.ts","webpack:///../src/events/singleTap.ts","webpack:///../src/events/doubleTap.ts","webpack:///../src/events/pointerStart.ts","webpack:///../src/events/pointerMove.ts","webpack:///../src/events/pointerEnd.ts","webpack:///../src/events/index.ts","webpack:///../src/gallery.ts","webpack:///../src/index.ts"],"sourcesContent":["/*\n * @Author: Huangjs\n * @Date: 2023-06-26 09:46:00\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-07-28 15:49:45\n * @Description: ******\n */\n\n// 解决0.1+0.2不等于0.3的问题\nexport function fixDecimal(value: number, places: number = 15) {\n  const multiple = Math.pow(10, places);\n  return Math.round(value * multiple) / multiple;\n}\n// 算出双击时offset的比例\nexport function ratioOffset(v: number, k: number, t: number) {\n  if (v <= (1 - k) / (2 * k)) {\n    return -1 / 2;\n  } else if (v >= (1 + k - 2 * t) / (2 * k)) {\n    return 1 / 2;\n  } else {\n    return (v - (1 - t) / (2 * k)) / (1 - t / k);\n  }\n}\n// 传入的a是函数，就返回函数执行结果，否则直接返回a\nexport function effectuate(fn: any, ...args: any) {\n  return typeof fn === 'function' ? fn(...args) : fn;\n}\n// 判断v是否在min和max之间\nexport function isBetween(v: number, [min, max]: number[]) {\n  return min <= v && v <= max;\n}\n// 若v在min和max之间，则返回v值，否则，返回边缘值min或max\nexport function between(v: number, [min, max]: number[], _?: boolean) {\n  return Math.max(Math.min(v, max), min);\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 15:34:16\n * @Description: ******\n */\n\nimport Transition, {\n  TAProperty,\n  TAIOptions,\n  easeOutQuad,\n  easeOutQuart,\n  type EaseFn,\n} from '@huangjs888/transition';\nimport Transform, { type TransformRaw } from '@huangjs888/transform';\nimport { revokeDamping, performDamping } from '@huangjs888/damping';\nimport { between, isBetween, effectuate, ratioOffset } from './utils';\n\nclass Entity {\n  _element: HTMLElement;\n  _transform: Transform; // 当前手势操作之后的变换对象\n  _transition: Transition; // 当前渐变对象\n  _dblAdjust: boolean = true;\n  _dblScale: number | (() => number) = 0; // 双击放大比例和是否调整放大时的中心点\n  _damping: Damping[] = []; // 可以进行阻尼的变换\n  _rotation: number[] | (() => number[]) = []; // 旋转范围\n  _scalation: number[] | (() => number[]) = []; // 缩放范围\n  _translation: (number[] | ((v: number) => number[]))[] = []; // 平移范围\n  _sizeInfo: SizeInfo & {\n    elementWidth: number;\n    elementHeight: number;\n  } = {\n    containerCenter: [0, 0],\n    containerWidth: 0,\n    containerHeight: 0,\n    naturalWidth: 0,\n    naturalHeight: 0,\n    elementWidth: 0,\n    elementHeight: 0,\n  };\n  constructor({\n    element,\n    sizeInfo,\n    dblAdjust,\n    dblScale,\n    damping,\n    rotation,\n    scalation,\n    translation,\n  }: IOption) {\n    let _element: HTMLElement | null | undefined;\n    try {\n      if (typeof element === 'string') {\n        _element = document.querySelector(element) as HTMLElement;\n      } else {\n        _element = element;\n      }\n    } catch (e) {\n      _element = null;\n    }\n    if (!_element || !(_element instanceof HTMLElement)) {\n      _element = document.createElement('div');\n    }\n    _element.style.opacity = '0';\n    _element.innerHTML = '';\n    this._element = _element;\n    this._transform = new Transform({ a: 0, k: 1, x: 0, y: 0 });\n    // 创建过渡\n    this._transition = new Transition({\n      element: this._element,\n      propertyName: 'transform',\n      propertyValue: new (class extends TAProperty {\n        toString() {\n          // 这里注意，在不存在任何过渡动画的时候，这里的this.value应该和上面的this._transform内的每项值应该是相等的\n          // 但是由于 0.1+0.2!==0.3 的问题，导致经过各种计算后，其值并不是完全相等，存在极小的精度问题\n          return new Transform(this.value).toString();\n        }\n      })(this._transform.toRaw()),\n    });\n    this.setSizeInfo(sizeInfo); // 设置尺寸\n    this.setDblAdjust(dblAdjust); // 设置双击是否调整中心点\n    this.setDamping(damping); // 设置[]，则全都不阻尼\n    this.setDblScale(dblScale); // 设置1，则不进行双击缩放，但可双击归位\n    this.setRotation(rotation); // 设置相同数字（比如0），则不允许旋转，该数字为初始旋转\n    this.setScalation(scalation); // 设置相同数字（比如1），则不允许缩放，该数为初始缩放\n    this.setTranslation(translation); // 设置相同数字（比如0），则不允许平移，该数为初始位置\n  }\n  getElement() {\n    return this._element;\n  }\n  getTransform() {\n    return this._transform;\n  }\n  getSizeInfo() {\n    return this._sizeInfo;\n  }\n  setSizeInfo(sizeInfo?: SizeInfo) {\n    if (sizeInfo) {\n      const {\n        containerCenter,\n        containerWidth,\n        containerHeight,\n        naturalWidth,\n        naturalHeight,\n      } = sizeInfo;\n      const aspectRatio = naturalWidth / naturalHeight;\n      const boxAspectRatio = containerWidth / containerHeight;\n      let width = naturalWidth;\n      if (aspectRatio >= boxAspectRatio) {\n        width = containerWidth;\n      } else if (aspectRatio >= 1 / 2.2) {\n        // 0.4545454545...\n        //微信 iphone 横竖屏和微信 android 竖屏时\n        width = containerHeight * aspectRatio;\n      } /* else if (aspectRatio >= 0.4) {\n        // 微信 android 横屏时\n        width = containerHeight * aspectRatio;\n      } */ else {\n        // 微信 iphone 是取 containerWidth 和 naturalWidth 最小值\n        width = Math.min(containerWidth, naturalWidth);\n        // 微信 android 直接是取 containerWidth;\n        // width = containerWidth;\n      }\n      const height = width / aspectRatio;\n      this._element.style.opacity = '1';\n      this._element.style.width = `${width}px`;\n      this._element.style.height = `${height}px`;\n      this._sizeInfo = {\n        containerCenter,\n        containerWidth,\n        containerHeight,\n        naturalWidth,\n        naturalHeight,\n        elementWidth: width,\n        elementHeight: height,\n      };\n      this.reset();\n    }\n  }\n  setRotation(a?: number[]) {\n    if (\n      a &&\n      typeof a[0] === 'number' &&\n      typeof a[1] === 'number' &&\n      a[1] >= a[0]\n    ) {\n      // 最大范围 -Infinity 到 + Infinity\n      this._rotation = a;\n      return;\n    }\n    // 测微信得到的结论，是不给旋转的\n    // 如果设置不合理，则取默认\n    this._rotation = () => [0, 0];\n  }\n  getRotation() {\n    return effectuate(this._rotation);\n  }\n  setScalation(k?: number[]) {\n    if (\n      k &&\n      typeof k[0] === 'number' &&\n      typeof k[1] === 'number' &&\n      k[1] >= k[0] &&\n      k[0] > 0\n    ) {\n      this._scalation = k; // 最大范围 0 到 +Infinity (不等于0)\n      return;\n    }\n    // 测微信得到的结论，最小值为1，最大值永远是双击值放大值的2倍\n    // 如果设置不合理，则取默认\n    this._scalation = () => [1, 2 * this.getDblScale()];\n  }\n  getScalation() {\n    return effectuate(this._scalation);\n  }\n  setTranslation(xy?: number[][]) {\n    this.setXTranslation(xy && xy[0]);\n    this.setYTranslation(xy && xy[1]);\n  }\n  getTranslation(k?: number) {\n    return [this.getXTranslation(k), this.getYTranslation()];\n  }\n  setXTranslation(x?: number[]) {\n    if (\n      x &&\n      typeof x[0] === 'number' &&\n      typeof x[1] === 'number' &&\n      x[1] >= x[0]\n    ) {\n      this._translation[0] = x; // 最大范围 -Infinity 到 + Infinity\n      return;\n    }\n    // 测微信得到的结论，边界范围是元素按照当前比例缩放后宽度和容器宽度之差，左右各一半的范围\n    this._translation[0] = (k: number) => {\n      const { containerWidth, elementWidth } = this.getSizeInfo();\n      const bx = Math.max((elementWidth * k - containerWidth) / 2, 0);\n      return [-bx, bx];\n    };\n  }\n  getXTranslation(k?: number) {\n    return effectuate(this._translation[0], k || this._transform.k || 1);\n  }\n  setYTranslation(y?: number[]) {\n    if (\n      y &&\n      typeof y[0] === 'number' &&\n      typeof y[1] === 'number' &&\n      y[1] >= y[0]\n    ) {\n      this._translation[1] = y; // 最大范围 -Infinity 到 +Infinity\n      return;\n    }\n    // 测微信得到的结论，边界范围是元素按照当前比例缩放后高度和容器高度之差，上下各一半的范围\n    this._translation[1] = (k: number) => {\n      const { containerHeight, elementHeight } = this.getSizeInfo();\n      const by = Math.max((elementHeight * k - containerHeight) / 2, 0);\n      return [-by, by];\n    };\n  }\n  getYTranslation(k?: number) {\n    return effectuate(this._translation[1], k || this._transform.k || 1);\n  }\n  setDblScale(k?: number) {\n    if (typeof k === 'number' && k > 0) {\n      this._dblScale = k;\n      return;\n    }\n    // 测微信得到的结论，双击放大比例是\n    // 1，容器宽/元素宽 和 容器高/元素高 的最大值\n    // 2，元素实际宽/容器宽 和 元素实际高/容器高 的最小值\n    // 3，在1、2两个值和数值2这三个之中的最大值\n    this._dblScale = () => {\n      const {\n        containerWidth,\n        containerHeight,\n        naturalWidth,\n        naturalHeight,\n        elementWidth,\n        elementHeight,\n      } = this.getSizeInfo();\n      return (\n        Math.max(\n          2,\n          Math.max(\n            containerWidth / elementWidth,\n            containerHeight / elementHeight,\n          ),\n          Math.min(\n            naturalWidth / containerWidth,\n            naturalHeight / containerHeight,\n          ),\n        ) || 1\n      );\n    };\n  }\n  getDblScale() {\n    return effectuate(this._dblScale);\n  }\n  setDblAdjust(aj: boolean = true) {\n    this._dblAdjust = aj;\n  }\n  getDblAdjust() {\n    return this._dblAdjust;\n  }\n  isDamping(key: Damping) {\n    return this._damping && this._damping.indexOf(key) !== -1;\n  }\n  setDamping(damping?: Damping[]) {\n    if (damping) {\n      this._damping = damping;\n      return;\n    }\n    // 如果不设置，默认只对缩放比例和位移进行阻尼\n    this._damping = ['scale', 'translate'];\n  }\n  rotate(a: number) {\n    // 负数顺时针，正数逆时针\n    // 在原来的基础上再旋转 a\n    return this.transform({ a });\n  }\n  rotateTo(a: number) {\n    // 负数顺时针，正数逆时针\n    // 直接旋转到 a\n    return this.transformTo({ a });\n  }\n  scale(k: number, point?: number[]) {\n    // 在原来的基础上相对 point 点缩放 k\n    return this.transform({ k }, point);\n  }\n  scaleTo(k: number, point?: number[]) {\n    // 直接相对 point 点缩放到 k\n    return this.transformTo({ k }, point);\n  }\n  translate(x: number, y: number) {\n    // 在原来的基础上平移 x, y\n    return this.transform({ x, y });\n  }\n  translateTo(x: number, y: number) {\n    // 直接平移到 x, y\n    return this.transformTo({ x, y });\n  }\n  translateX(x: number) {\n    // 在原来的基础上横向平移 x\n    return this.transform({ x });\n  }\n  translateXTo(x: number) {\n    // 直接横向平移到 x\n    return this.transformTo({ x });\n  }\n  translateY(y: number) {\n    // 在原来的基础上竖向平移  y\n    return this.transform({ y });\n  }\n  translateYTo(y: number) {\n    // 直接竖向平移到 y\n    return this.transformTo({ y });\n  }\n  transform(\n    transformRaw: TransformRaw,\n    point?: number[] | TAIOptions,\n    options?: TAIOptions,\n  ) {\n    const { a: ta = 0, k: tk = 1, x: tx = 0, y: ty = 0 } = this.getTransform();\n    let { a, k, x, y } = transformRaw;\n    if (typeof a === 'number') {\n      a += ta;\n    }\n    if (typeof k === 'number') {\n      k *= tk;\n    }\n    if (typeof x === 'number') {\n      x += tx;\n    }\n    if (typeof y === 'number') {\n      y += ty;\n    }\n    return this.transformTo({ a, k, x, y }, point, options);\n  }\n  transformTo(\n    transformRaw: TransformRaw,\n    point?: number[] | TAIOptions,\n    options?: TAIOptions,\n  ) {\n    let _point = point;\n    let _options = options;\n    if (!options && !Array.isArray(point)) {\n      _options = point;\n      _point = undefined;\n    }\n    const { a: _a, k: _k, x: _x, y: _y } = transformRaw;\n    const _transformRaw: TransformRaw = {};\n    if (typeof _a === 'number') {\n      _transformRaw.a = between(_a, this.getRotation());\n    }\n    if (typeof _k === 'number') {\n      const k = (_transformRaw.k = between(_k, this.getScalation()));\n      if (Array.isArray(_point)) {\n        const [ox, oy] = this.computeOffset(_point, k);\n        const { x: tx = 0, y: ty = 0 } = this._transform;\n        _transformRaw.x = between(\n          (typeof _x === 'number' ? _x : tx) + ox,\n          this.getXTranslation(k),\n        );\n        _transformRaw.y = between(\n          (typeof _y === 'number' ? _y : ty) + oy,\n          this.getYTranslation(k),\n        );\n      } else {\n        if (typeof _x === 'number') {\n          _transformRaw.x = between(_x, this.getXTranslation(k));\n        }\n        if (typeof _y === 'number') {\n          _transformRaw.y = between(_y, this.getYTranslation(k));\n        }\n      }\n    } else {\n      if (typeof _x === 'number') {\n        _transformRaw.x = between(_x, this.getXTranslation());\n      }\n      if (typeof _y === 'number') {\n        _transformRaw.y = between(_y, this.getYTranslation());\n      }\n    }\n    return this.transitionRun(_transformRaw, _options);\n  }\n  transitionRun(transformRaw: TransformRaw, options: TAIOptions = {}) {\n    if (typeof options.duration === 'number' && options.duration <= 0) {\n      // 这里移动时不需要动画，可以直接进行绑定赋值\n      this._transform = new Transform(transformRaw);\n      this._transition.bind(transformRaw);\n      return Promise.resolve(transformRaw);\n    }\n    const { a, k, x, y } = transformRaw;\n    const { a: ta = 0, k: tk = 1, x: tx = 0, y: ty = 0 } = this.getTransform();\n    const deltaValue: TransformRaw = {};\n    const precision: TransformRaw = {};\n    if (typeof a === 'number') {\n      deltaValue.a = (this._transform.a = a) - ta;\n      // 角度精度按照屏幕尺寸一般暂时设置为0.001\n      precision.a = 0.001;\n    }\n    if (typeof k === 'number') {\n      deltaValue.k = (this._transform.k = k) - tk;\n      // 缩放精度按照屏幕尺寸一般暂时设置为0.001\n      precision.k = 0.001;\n    }\n    if (typeof x === 'number') {\n      deltaValue.x = (this._transform.x = x) - tx;\n      // 像素精度都在1px\n      precision.x = 1;\n    }\n    if (typeof y === 'number') {\n      deltaValue.y = (this._transform.y = y) - ty;\n      // 像素精度都在1px\n      precision.y = 1;\n    }\n    return this._transition\n      .apply(deltaValue, {\n        precision,\n        cancel: true,\n        duration: 500,\n        easing: easeOutQuart,\n        ...options,\n      })\n      .then((value) => {\n        if (!this.isTransitioning()) {\n          // 在最后一个动画的最后一帧结束重新绑定一下过渡值，目的是为了让_transition里的value和_transform保持一致\n          this._transition.bind(this._transform.toRaw());\n        }\n        return value;\n      });\n  }\n  transitionCancel() {\n    // cancel返回值是动画未执行的部分\n    return this._transition.cancel().map((value) => {\n      // 取消动画时应该把this._transform内的值减掉还未执行的部分\n      const {\n        a: ta = 0,\n        k: tk = 1,\n        x: tx = 0,\n        y: ty = 0,\n      } = this.getTransform();\n      Object.keys(value).forEach((key) => {\n        const val = value[key];\n        if (key === 'a') {\n          this._transform.a = ta - val;\n        } else if (key === 'k') {\n          this._transform.k = tk - val;\n        } else if (key === 'x') {\n          this._transform.x = tx - val;\n        } else if (key === 'y') {\n          this._transform.y = ty - val;\n        }\n      });\n    }).length;\n  }\n  isTransitioning() {\n    return this._transition.transitioning();\n  }\n  reset(duration: number = 0) {\n    const a = between(0, this.getRotation()); // 初始角度a\n    const k = between(1, this.getScalation()); // 初始比例k\n    const x = between(0, this.getXTranslation(k)); // 初始位移x\n    const y = between(0, this.getYTranslation(k)); //初始位移y\n    this.transitionRun({ a, k, x, y }, { duration });\n  }\n  computeOffset(point: number[], k: number, adjust: boolean = false) {\n    const {\n      containerCenter,\n      containerWidth,\n      containerHeight,\n      elementWidth,\n      elementHeight,\n    } = this.getSizeInfo();\n    const { k: tk = 1, x: tx = 0, y: ty = 0 } = this.getTransform();\n    const dk = k / tk;\n    const [cx, cy] = containerCenter;\n    let ox = (typeof point[0] === 'number' ? point[0] : cx) - (cx + tx);\n    let oy = (typeof point[1] === 'number' ? point[1] : cy) - (cy + ty);\n    if (adjust) {\n      // 思路：对元素进行划线分界\n      // 1，在元素上边的时候，用元素实际高度一半(eh/2)的基础上在除以双击比例 k 即 eh/2k 作为上分界线，分界线到元素上边缘区域内点击，全部视为在元素上边缘线上点击，即放大后元素上边缘会紧贴在容器上边缘\n      // 2，在元素下边的时候，先用容器的高(ch)比上元素实际高(eh)，即ch/eh（但是这个比例值只能在1和2之间（即只针对元素高小于容器高且大于容器高一半的情况）），用这个比例减去1/2k，得到的结果乘以元素实际高(eh)，再以此作为下分界线，分界线到元素下边缘区域内点击，全部视为在元素下边缘线上点击，即放大后元素下边缘会紧贴在容器下边缘\n      // 3，找出元素在不受偏移量和边界限制的影响下，点击元素中心点放大后，元素上下各存在一条界线正好与容器边缘重合，计算出该界线到中心点的距离，该距离一定是在元素中心点到元素边缘之间即0,ew/2之间，并且两条界线等距\n      // 4，在1，2中算出的上下分界线之间内点击，计算均匀分布对应到在3中算出的上下界线之间内点击，分界线中点处对应元素中点处，最后得到对应的偏移量oy\n      // 5，元素左右计算方式如同上下方式一样得到ox\n      // 测微信得到的结论\n      // 这个偏移量需要要向着边缘点发散\n      const cw = containerWidth / 1;\n      const ch = containerHeight / 1;\n      const ew = elementWidth / tk;\n      const eh = elementHeight / tk;\n      ox =\n        between(ew - (cw - ew) / (dk - 1), [0, ew]) *\n          ratioOffset(ox / ew, dk, between(cw / ew, [1, 2])) || 0;\n      oy =\n        between(eh - (ch - eh) / (dk - 1), [0, eh]) *\n          ratioOffset(oy / eh, dk, between(ch / eh, [1, 2])) || 0;\n    }\n    ox *= 1 - dk;\n    oy *= 1 - dk;\n    return [ox, oy];\n  }\n  moveBounce(\n    angle: number,\n    scale: number,\n    deltaX: number,\n    deltaY: number,\n    point: number[] = [],\n  ) {\n    let { a = 0, k = 1, x = 0, y = 0 } = this.getTransform();\n    const aRange = this.getRotation();\n    if (this.isDamping('rotate')) {\n      // 先把当前值反算出阻尼之前的原值\n      let ba = between(a, aRange);\n      a = ba + revokeDamping(a - ba, { max: 180 });\n      // 再对总值进行总体阻尼计算\n      ba = between((a += angle), aRange);\n      a = ba + performDamping(a - ba, { max: 180 });\n    } else {\n      a = between((a += angle), aRange);\n    }\n    const kRange = this.getScalation();\n    if (this.isDamping('scale')) {\n      // 先把当前值反算出阻尼之前的原值\n      let bk = between(k, kRange);\n      k = bk * revokeDamping(k / bk, { max: 2, mode: 1 });\n      // 再对总值进行总体阻尼计算\n      bk = between((k *= scale), kRange);\n      k = bk * performDamping(k / bk, { max: 2, mode: 1 });\n    } else {\n      k = between((k *= scale), kRange);\n    }\n    const [ox, oy] = this.computeOffset(point, k);\n    if (this.isDamping('scale')) {\n      // 先把当前值反算出阻尼之前的原值\n      const xMax = this._sizeInfo.containerWidth;\n      let bx = between(x, this.getXTranslation());\n      x = bx + revokeDamping(x - bx, { max: xMax });\n      // 再对总值进行总体阻尼计算\n      bx = between((x += ox + deltaX), this.getXTranslation(k));\n      x = bx + performDamping(x - bx, { max: xMax });\n      // 先把当前值反算出阻尼之前的原值\n      const yMax = this._sizeInfo.containerHeight;\n      let by = between(y, this.getYTranslation());\n      y = by + revokeDamping(y - by, { max: yMax });\n      // 再对总值进行总体阻尼计算\n      by = between((y += oy + deltaY), this.getYTranslation(k));\n      y = by + performDamping(y - by, { max: yMax });\n    } else {\n      x = between((x += ox + deltaX), this.getXTranslation(k));\n      y = between((y += oy + deltaY), this.getYTranslation(k));\n    }\n    this.transitionRun({ a, k, x, y }, { duration: 0 });\n  }\n  resetBounce(point: number[] = [], cancel: boolean = false) {\n    let { a = 0, k = 1, x = 0, y = 0 } = this.getTransform();\n    // 若允许阻尼，首先应该先把当前值反算出阻尼之前的原值\n    if (this.isDamping('rotate')) {\n      const ba = between(a, this.getRotation());\n      a = ba + revokeDamping(a - ba, { max: 180 });\n    }\n    if (this.isDamping('scale')) {\n      const bk = between(k, this.getScalation());\n      k = bk * revokeDamping(k / bk, { max: 2, mode: 1 });\n    }\n    if (this.isDamping('translate')) {\n      const xMax = this._sizeInfo.containerWidth;\n      const bx = between(x, this.getXTranslation());\n      x = bx + revokeDamping(x - bx, { max: xMax });\n      const yMax = this._sizeInfo.containerHeight;\n      const by = between(y, this.getYTranslation());\n      y = by + revokeDamping(y - by, { max: yMax });\n    } // 重置之前是双指移动，是不允许取消动画的\n    this.transformTo({ a, k, x, y }, point, { cancel });\n  }\n  dblScale(point: number[] = []) {\n    // 这三个比例都是用保留三位小数的结果进行比较\n    // 其实这里的3应该用1/屏幕的宽高算出的小数位数\n    // 此刻比例和位移\n    const tk = this.getTransform().k || 1;\n    // 双击变化的比例\n    const dk = between(this.getDblScale(), this.getScalation());\n    // 再次双击恢复的比例（初始比例）\n    const bk = between(1, this.getScalation());\n    // 双击变化（如果设置的双击比例大于初始比例并且此刻比例小于或等于初始比例\n    // 或者设置的双击比例小于初始比例且此刻比例大于或等于初始比例）\n    if ((dk > bk && tk <= bk) || (dk < bk && tk >= bk)) {\n      if (this.getDblAdjust()) {\n        // 需要调整的情况，自己算偏移量，并且旋转置为0\n        const [ox, oy] = this.computeOffset(point, dk, this.getDblAdjust());\n        const { x: tx = 0, y: ty = 0 } = this.getTransform();\n        this.transformTo(\n          { a: 0, k: dk, x: tx + ox, y: ty + oy },\n          { cancel: false },\n        );\n      } else {\n        // 交给transformTo\n        this.transformTo({ k: dk }, point, { cancel: false });\n      }\n    } else {\n      // 再次双击恢复\n      if (this.getDblAdjust()) {\n        // 需要调整的情况，置为初始状态\n        this.transformTo({ a: 0, k: bk, x: 0, y: 0 }, { cancel: false });\n      } else {\n        // 交给transformTo\n        this.transformTo({ k: bk }, point, { cancel: false });\n      }\n    }\n  }\n  swipeBounce(\n    duration: number,\n    stretch: number,\n    key: 'x' | 'y',\n    transition?: (\n      key: 'x' | 'y',\n      xySwipe: number,\n      xyBounce: number,\n      option: (v: number) => { duration: number; easing: EaseFn },\n    ) => void,\n  ) {\n    const maxBounce =\n      this._sizeInfo[key === 'x' ? 'containerWidth' : 'containerHeight'];\n    const xyScale = 1.2 * this.getDblScale();\n    const xyPos = this.getTransform()[key] || 0;\n    const xyRange = this.getTranslation()[key === 'x' ? 0 : 1];\n    const sign = stretch > 0 ? 1 : -1;\n    // 对距离进行优化(最大值是当前双击比例下图片宽度)\n    const _stretch =\n      Math.max(1, Math.min(Math.abs(stretch), xyScale * maxBounce)) * sign;\n    // 对时间进行优化\n    const _duration = Math.max(800, Math.min(2500, duration));\n    if (isBetween(xyPos + _stretch, xyRange)) {\n      // 如果加上惯性滑动距离之后图片未超出边界，则图片直接移动\n      this.transitionRun(\n        { [key]: xyPos + _stretch },\n        { easing: easeOutQuad, duration: _duration },\n      );\n    } else {\n      // 根据边界算出到达边界要走的的距离，有可能松开时已经超出边界，此时xySwipe是需要减掉的超出部分距离\n      const xySwipe = between(xyPos + _stretch, xyRange) - xyPos;\n      let xyBounce = 0;\n      if (this.isDamping('translate')) {\n        // 计算速度时，如果松开时超出边界，xySwipe视作0，其实得到的就是初始速度\n        const velocity =\n          (isBetween(xyPos, xyRange)\n            ? Math.sqrt(1 - Math.abs(xySwipe / _stretch))\n            : 1) *\n          ((2 * Math.abs(_stretch)) / _duration);\n        // 根据到达边界时速度的大小计算出将要Damping的距离（一个与速度成正比计算方式，最大值不能超过容器宽度的1/4）\n        xyBounce = Math.min(30 * velocity, maxBounce / 4) * sign;\n      }\n      if (typeof transition === 'function') {\n        // 交给调用者去计算分配如何transition，并使用回调计算transition配置\n        transition(key, xySwipe, xyBounce, (xyMove: number) => {\n          // 根据实际走的距离xyMove算出时间占比\n          const kt = 1 - Math.sqrt(1 - Math.abs(xyMove / _stretch));\n          return {\n            duration: kt * _duration,\n            easing: easeOutQuad,\n          };\n        });\n      } else {\n        // 如果松开时超出边界，相当于在xyBounce里减掉超出的部分得到的结果，如果超出很多，远远大于xyBounce，则直接就是0\n        const xyMove = Math.max((xySwipe + xyBounce) * sign, 0) * sign;\n        // 整个减速运动中，移动xyMove的时间占比\n        const kt = 1 - Math.sqrt(1 - Math.abs(xyMove / _stretch));\n        if (xyMove === 0) {\n          // 如果swipe抬起没有移动的距离，则直接归位\n          this.transitionRun({ [key]: between(xyPos + xyMove, xyRange) });\n        } else {\n          // 先移动xyMove距离\n          this.transitionRun(\n            { [key]: xyPos + xyMove },\n            {\n              duration: kt * _duration,\n              easing: easeOutQuad,\n            },\n          ).then(() => {\n            // 移动后归位\n            this.transitionRun({ [key]: between(xyPos + xyMove, xyRange) });\n          });\n        }\n      }\n    }\n  }\n}\n\nexport type Damping = 'rotate' | 'scale' | 'translate';\nexport type SizeInfo = {\n  containerCenter: number[];\n  containerWidth: number;\n  containerHeight: number;\n  naturalWidth: number;\n  naturalHeight: number;\n};\nexport type IOption = {\n  element?: HTMLElement | string;\n  sizeInfo?: SizeInfo; // 容器尺寸和元素实际尺寸\n  dblAdjust?: boolean; // 双击中心点是否调整\n  dblScale?: number; // 双击放大比例\n  damping?: Damping[]; // 哪些操作超出边界可以进行阻尼效果，如果对rotate,scale,translate设置了无边界限制(Infinity)，则阻尼无效\n  scalation?: number[]; // 缩放范围 [0.1, 10]，最小比例0.1和最大比例10\n  translation?: number[][]; // 平移范围 [[-10, 20], [-20, 10]]，x最小-10，最大20，y最小-20，最大10\n  rotation?: number[]; // 旋转范围 [-10, 20]，逆时针可旋转20度和顺时针可旋转10度\n};\n\nexport default Entity;\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 13:44:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-07-28 13:51:09\n * @Description: ******\n */\nexport const loadingIcon = `\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 80 80\">\n    <defs>\n      <linearGradient\n        x1=\"94.0869141%\"\n        y1=\"0%\"\n        x2=\"94.0869141%\"\n        y2=\"90.559082%\"\n        id=\"linearGradient-1\"\n      >\n        <stop stop-color=\"#fff\" stop-opacity=\"0\" offset=\"0%\" />\n        <stop stop-color=\"#fff\" stop-opacity=\"0.3\" offset=\"100%\" />\n      </linearGradient>\n      <linearGradient\n        x1=\"100%\"\n        y1=\"8.67370605%\"\n        x2=\"100%\"\n        y2=\"90.6286621%\"\n        id=\"linearGradient-2\"\n      >\n        <stop stop-color=\"#fff\" offset=\"0%\" />\n        <stop stop-color=\"#fff\" stop-opacity=\"0.3\" offset=\"100%\" />\n      </linearGradient>\n    </defs>\n    <g\n      stroke=\"none\"\n      stroke-width=\"1\"\n      fill=\"none\"\n      fill-rule=\"evenodd\"\n      opacity=\"0.9\"\n    >\n      <g>\n        <path\n          d=\"M40,0 C62.09139,0 80,17.90861 80,40 C80,62.09139 62.09139,80 40,80 L40,73 C58.2253967,73 73,58.2253967 73,40 C73,21.7746033 58.2253967,7 40,7 L40,0 Z\"\n          fill=\"url(#linearGradient-1)\"\n        />\n        <path\n          d=\"M40,0 L40,7 C21.7746033,7 7,21.7746033 7,40 C7,58.2253967 21.7746033,73 40,73 L40,80 C17.90861,80 0,62.09139 0,40 C0,17.90861 17.90861,0 40,0 Z\"\n          fill=\"url(#linearGradient-2)\"\n        />\n        <circle id=\"Oval\" fill=\"#fff\" cx=\"40.5\" cy=\"3.5\" r=\"3.5\" />\n      </g>\n      <animateTransform\n        attributeName=\"transform\"\n        begin=\"0s\"\n        dur=\"1s\"\n        type=\"rotate\"\n        values=\"0 40 40;360 40 40\"\n        repeatCount=\"indefinite\"\n      />\n    </g>\n  </svg>\n`;\nexport const loadingIcon2 = `\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\n    <circle\n      cx=\"16\"\n      cy=\"16\"\n      r=\"14\"\n      fill=\"none\"\n      stroke=\"#666\"\n      stroke-width=\"4\"\n    />\n    <circle\n      cx=\"16\"\n      cy=\"16\"\n      r=\"14\"\n      fill=\"none\"\n      stroke=\"#fff\"\n      stroke-width=\"4\"\n      stroke-dasharray=\"30\"\n      stroke-dashoffset=\"30\"\n      stroke-linecap=\"round\"\n    />\n    <animateTransform\n      attributeName=\"transform\"\n      dur=\"1s\"\n      type=\"rotate\"\n      from=\"0\" to=\"360\"\n      repeatCount=\"indefinite\"\n    />\n  </svg>\n`;\nexport const errorIcon = `\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" fill=\"#fff\">\n    <path\n      d=\"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.763-15.864l.11 7.596h1.305l.11-7.596h-1.525zm.759 10.967c.512 0 .902-.383.902-.882 0-.5-.39-.882-.902-.882a.878.878 0 00-.896.882c0 .499.396.882.896.882z\" />\n  </svg>\n`;\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 17:24:30\n * @Description: ******\n */\n\nimport { loadingIcon, errorIcon } from './svgIcon';\n\nconst autoPxReg =\n  /^(?:-border(?:-top|-right|-bottom|-left)?(?:-width|)|(?:-margin|-padding)?(?:-top|-right|-bottom|-left)?|(?:-min|-max)?(?:-width|-height))$/;\nexport function setStyle(\n  ele: HTMLElement,\n  css: { [key: string]: string | number | undefined },\n) {\n  if (ele) {\n    let cssText = '';\n    Object.keys(css).forEach((k: string) => {\n      const key = k.replace(/([A-Z])/g, '-$1').toLowerCase();\n      if (css[k] !== 0 && !css[k]) {\n        // 删除\n        ele.style.setProperty(key, '');\n      } else {\n        const suffix =\n          typeof css[k] === 'number' &&\n          /^[a-z]/.test(key) &&\n          autoPxReg.test(`-${key}`)\n            ? 'px'\n            : '';\n        const val = `${css[k]}${suffix}`;\n        cssText += `${key}:${val};`;\n      }\n    });\n    if (cssText) {\n      ele.style.cssText += cssText;\n    }\n  }\n  return ele;\n}\n\nexport function createContainer(element?: HTMLElement | string) {\n  let ele: HTMLElement | null | undefined;\n  try {\n    if (typeof element === 'string') {\n      ele = document.querySelector(element) as HTMLElement;\n    } else {\n      ele = element;\n    }\n  } catch (e) {\n    ele = null;\n  }\n  if (!ele || !(ele instanceof HTMLElement)) {\n    ele = setStyle(document.createElement('div'), {\n      position: 'fixed',\n      left: '0px',\n      top: '0px',\n      zIndex: '9999',\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      display: 'none',\n    });\n    document.body.appendChild(ele);\n  } else {\n    setStyle(ele, {\n      display: 'none',\n    });\n    ele.innerHTML = '';\n  }\n  return ele;\n}\n\nexport function createSubstance(isVertical: boolean, element: HTMLElement) {\n  const substance = setStyle(document.createElement('div'), {\n    display: 'flex',\n    flexDirection: isVertical ? 'column' : 'row',\n  });\n  element.appendChild(substance);\n  return substance;\n}\n\nexport function createBackdrop(background: string, element: HTMLElement) {\n  const backdrop = setStyle(document.createElement('div'), {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    background,\n  });\n  element.appendChild(backdrop);\n  return backdrop;\n}\n\nexport function createIndicator(\n  isVertical: boolean,\n  hasIndicator: boolean,\n  element: HTMLElement,\n) {\n  let indicator = null;\n  if (hasIndicator) {\n    indicator = setStyle(document.createElement('div'), {\n      position: 'absolute',\n      bottom: isVertical ? '0px' : '16px',\n      right: isVertical ? '16px' : 'auto',\n      width: isVertical ? 'auto' : '100%',\n      height: isVertical ? '100%' : 'auto',\n      display: 'none',\n      flexDirection: isVertical ? 'column' : 'row',\n      justifyContent: 'center',\n      alignItems: 'center',\n    });\n    element.appendChild(indicator);\n  }\n  return indicator;\n}\n\nexport function createItemIndicator(\n  isVertical: boolean,\n  element: HTMLElement | null,\n) {\n  let item = null;\n  if (element) {\n    item = setStyle(document.createElement('span'), {\n      borderRadius: '100%',\n      width: 7,\n      height: 7,\n      display: 'inline-block',\n      margin: isVertical ? '5px 0' : '0 5px',\n      background: '#fff',\n      opacity: 0.6,\n    });\n    element.appendChild(item);\n  }\n  return item;\n}\n\nexport function createItemWrapper(\n  isFirst: boolean,\n  isVertical: boolean,\n  hasLoading: boolean,\n  itemGap: number,\n  element: HTMLElement,\n) {\n  const wrapper = setStyle(document.createElement('div'), {\n    position: 'relative',\n    display: 'flex',\n    width: '100%',\n    height: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    overflow: 'hidden',\n    flex: 1,\n    marginTop: isVertical && !isFirst ? itemGap : 0,\n    marginLeft: isVertical || isFirst ? 0 : itemGap,\n  });\n  if (hasLoading) {\n    createLoading(wrapper);\n  }\n  element.appendChild(wrapper);\n\n  return wrapper;\n}\n\nexport function createLoading(element: HTMLElement) {\n  const loading = setStyle(document.createElement('span'), {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -16,\n    marginLeft: -16,\n    width: 32,\n    height: 32,\n    display: 'inline-block',\n  });\n  loading.innerHTML = loadingIcon;\n  element.appendChild(loading);\n}\n\nexport function createError(element: HTMLElement) {\n  const error = setStyle(document.createElement('div'), {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate3d(-50%,-50%,0)',\n    width: '100%',\n    color: '#fff',\n    fontSize: '14px',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    opacity: 0.88,\n  });\n  error.innerHTML = `\n    <span style=\"width: 72px;height: 72px;\">\n      ${errorIcon}\n    </span>\n    <span style=\"margin-top:16px;\">图片加载失败</span>\n  `;\n  element.appendChild(error);\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-07-28 17:26:59\n * @Description: ******\n */\n\nimport loadImage from '@huangjs888/load-image';\nimport Entity, { type IOption } from './entity';\nimport { createError } from './dom';\n\nexport default function (image: Image) {\n  const { wrapper, entity, url, options } = image || {};\n  // 未定义表示还未加载过图片，null表示已经加载了，只是还没加载完或加载失败\n  if (typeof entity === 'undefined') {\n    image.entity = null;\n    return loadImage(url)\n      .then((ele) => {\n        image.entity = new Entity({\n          element: ele,\n          ...options,\n        });\n        image.width = ele.naturalWidth;\n        image.height = ele.naturalHeight;\n        wrapper.innerHTML = '';\n        wrapper.appendChild(ele);\n        return true;\n      })\n      .catch(() => {\n        // 这里可以加一个错误的提示\n        wrapper.innerHTML = '';\n        createError(wrapper);\n      });\n  }\n  return Promise.resolve();\n}\n\nexport type Image = {\n  wrapper: HTMLElement;\n  indicator?: HTMLElement | null;\n  entity?: Entity | null;\n  url: string;\n  width: number;\n  height: number;\n  options: IOption;\n};\n\nexport type ImageOption = IOption;\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 15:56:28\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function rotate(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  // 只有鼠标操作才可以，touch操作被放入到pointerMove中了\n  if (this._gesture && this._gesture.isTouch()) {\n    return;\n  }\n  const { angle: a = 0 } = e;\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    // diff===0表示目前没有进行任何move操作（使用Math.round，因为像素精确到1）\n    const translate = -this._activeIndex * this.getItemSize();\n    const diff = Math.round(this._translate - translate);\n    if (diff === 0) {\n      const { entity } =\n        (this._images && this._images[this._activeIndex]) || {};\n      if (entity) {\n        if (entity.isTransitioning()) {\n          return;\n        }\n        // 表示停止缩放，应该重置\n        if (isNaN(a)) {\n          entity.resetBounce();\n        } else {\n          entity.moveBounce(a, 1, 0, 0);\n        }\n      }\n    }\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      // 表示停止缩放，应该重置\n      if (isNaN(a)) {\n        entity.resetBounce();\n      } else {\n        entity.moveBounce(a, 1, 0, 0);\n      }\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 16:23:15\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function scale(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  // 只有鼠标操作才可以，touch操作被放入到pointerMove中了\n  if (this._gesture && this._gesture.isTouch()) {\n    return;\n  }\n  // const point = e.point[2];\n  const { scale: k = 1 } = e;\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    // diff===0表示目前没有进行任何move操作（使用Math.round，因为像素精确到1）\n    const translate = -this._activeIndex * this.getItemSize();\n    const diff = Math.round(this._translate - translate);\n    if (diff === 0) {\n      const { entity } =\n        (this._images && this._images[this._activeIndex]) || {};\n      if (entity) {\n        if (entity.isTransitioning()) {\n          return;\n        }\n        // 表示停止缩放，应该重置\n        if (isNaN(k)) {\n          entity.resetBounce();\n        } else {\n          entity.moveBounce(0, k, 0, 0 /* , point */);\n        }\n      }\n    }\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      // 表示停止缩放，应该重置\n      if (isNaN(k)) {\n        entity.resetBounce();\n      } else {\n        entity.moveBounce(0, k, 0, 0 /* , point */);\n      }\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-01 16:41:16\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport { type EaseFn } from '@huangjs888/transition';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function swipe(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    if (this._moveTarget === 'inside' && entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      const { velocity = 0, swipeComputed } = e;\n      if (velocity > 0 && swipeComputed) {\n        const transition = (\n          key: 'x' | 'y',\n          xySwipe: number,\n          xyBounce: number,\n          option: (v: number) => { duration: number; easing: EaseFn },\n        ) => {\n          if (this instanceof Gallery) {\n            const translate = -this._activeIndex * this.getItemSize();\n            // 不等于0，表示未达到边界\n            if (xySwipe !== 0) {\n              const { duration, easing } = option(xySwipe + xyBounce);\n              // 因为是两个过渡，这里同时触发，分别在before里设置先后发生，使两个过度连贯进行\n              Promise.all([\n                // 图片走到边界距离xySwipe\n                entity.transitionRun(\n                  { [key]: (entity.getTransform()[key] || 0) + xySwipe },\n                  {\n                    duration,\n                    easing,\n                    before: (progress) => {\n                      // 先走 xySwipe ，走完之后，后面就一直 1\n                      // 根据总路程 xySwipe + xyBounce，计算走 xySwipe 实际的进度\n                      const s = Math.abs(xySwipe);\n                      const sb = Math.abs(xySwipe + xyBounce);\n                      return Math.min(sb * progress, s) / s;\n                    },\n                  },\n                ),\n                // 外部走damping距离xyBounce\n                this.transitionRun(this._translate + xyBounce, {\n                  duration,\n                  easing,\n                  before: (progress) => {\n                    // 后走 xyBounce ，没走之前，前面一直 0\n                    // 根据总路程 xySwipe + xyBounce，计算走 xyBounce 的实际的进度\n                    const s = Math.abs(xySwipe);\n                    const b = Math.abs(xyBounce);\n                    const sb = Math.abs(xySwipe + xyBounce);\n                    return Math.max(sb * progress - s, 0) / b;\n                  },\n                }),\n              ]).then(() => {\n                // 外部归位\n                if (this instanceof Gallery) {\n                  this.transitionRun(translate);\n                }\n              });\n            } else {\n              // 已经Damping的部分，即超出部分的距离\n              const diff = this._translate - translate;\n              const sign = diff > 0 ? 1 : -1;\n              // 如果松开时超出边界，相当于在xyBounce里减掉超出的部分得到的结果，如果超出很多，远远大于xyBounce，则直接就是0\n              const xyMove = Math.max((xyBounce - diff) * sign, 0) * sign;\n              const { duration, easing } = option(xyMove);\n              if (xyMove === 0) {\n                // 外部直接归位\n                this.transitionRun(translate);\n              } else {\n                this.transitionRun(this._translate + xyMove, {\n                  duration,\n                  easing,\n                }).then(() => {\n                  // 外部归位\n                  if (this instanceof Gallery) {\n                    this.transitionRun(translate);\n                  }\n                });\n              }\n            }\n          }\n        };\n        // 按照0.003的减速度减速运行得到减速到0时的时间和x，y方向的分量距离\n        const { duration, stretchX, stretchY } = swipeComputed(0.003);\n        if (this._direction === 'vertical') {\n          const xRange = entity.getXTranslation();\n          // 竖向的时候固定x\n          if (!(xRange[0] === 0 && xRange[1] === 0)) {\n            entity.swipeBounce(duration, stretchX, 'x');\n          }\n          entity.swipeBounce(duration, stretchY, 'y', transition);\n        } else {\n          entity.swipeBounce(duration, stretchX, 'x', transition);\n          const yRange = entity.getYTranslation();\n          // 横向的时候固定y\n          if (!(yRange[0] === 0 && yRange[1] === 0)) {\n            entity.swipeBounce(duration, stretchY, 'y');\n          }\n        }\n      }\n      return;\n    }\n    if (this._moveTarget === 'closures') {\n      if (entity && entity.isTransitioning()) {\n        return;\n      }\n      // 如果滑动方向是向下的或向右的，执行关闭操作\n      if (this._swipeClose && e.direction === 'Down') {\n        this.close();\n        this._moveTarget = 'none';\n      }\n      return;\n    }\n    const size = this.getItemSize();\n    const index = size === 0 ? 0 : -this._translate / this.getItemSize();\n    this.slide(\n      index > this._activeIndex ? Math.ceil(index) : Math.floor(index),\n    );\n    // @@@2： 此处逻辑和touchstart手势函数里 @@@1 逻辑是处理里同一个问题（二选一，微信用的是@@@1效果）\n    // 这里是在真正要slide到上(下)一张时恢复到边界，那里是在手指放上去时直接恢复到边界\n    // 在非边缘图片damping恢复时，此时手指放上去后，恢复动画停止了\n    // 但是如果此时手指移动操作命中外部swipe到上(下)一张的逻辑，则内部图片的damping无法恢复到边界\n    // 因为此时swipe手势函数内正在执行上(下)一张图片过渡，touchend内reset不会被执行\n    /* if (entity) {\n        // 这里在slide时把内部图片reset\n        entity.reset();\n      } */\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      const { velocity = 0, swipeComputed } = e;\n      if (velocity > 0 && swipeComputed) {\n        // 按照0.003的减速度减速运行得到减速到0时的时间和x，y方向的分量距离\n        const { duration, stretchX, stretchY } = swipeComputed(0.003);\n        entity.swipeBounce(duration, stretchX, 'x');\n        entity.swipeBounce(duration, stretchY, 'y');\n      }\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-01 16:20:49\n * @Description: ******\n */\n\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function longTap(this: Gallery | SingleGallery) {\n  if (this._isClose) {\n    return;\n  }\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    if (entity && entity.isTransitioning()) {\n      return;\n    }\n    if (typeof this._longPress === 'function') {\n      this._longPress();\n    }\n  } else {\n    const { entity } = this._image || {};\n    if (entity && entity.isTransitioning()) {\n      return;\n    }\n    if (typeof this._longPress === 'function') {\n      this._longPress();\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-01 16:21:03\n * @Description: ******\n */\n\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function singleTap(this: Gallery | SingleGallery) {\n  if (this._isClose) {\n    return;\n  }\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    if (entity && entity.isTransitioning()) {\n      return;\n    }\n    if (typeof this._press === 'function') {\n      this._press();\n    }\n  } else {\n    const { entity } = this._image || {};\n    if (entity && entity.isTransitioning()) {\n      return;\n    }\n    if (typeof this._press === 'function') {\n      this._press();\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 12:30:28\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function doubleTap(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  const point = e.point[2];\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    // diff===0表示目前没有进行任何move操作（使用Math.round，因为像素精确到1）\n    const translate = -this._activeIndex * this.getItemSize();\n    const diff = Math.round(this._translate - translate);\n    if (diff === 0) {\n      const { entity } =\n        (this._images && this._images[this._activeIndex]) || {};\n      if (entity) {\n        if (entity.isTransitioning()) {\n          return;\n        }\n        entity.dblScale(point);\n      }\n    }\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      entity.dblScale(point);\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 13:51:40\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport { between, isBetween } from '../entity/utils';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function pointerStart(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  if (this._fgBehavior === 0 && e.pointer.length > 1) {\n    // 第一根手指放上去，紧接着再放一根手指（或者直接一下子放了两个手指），此时标记为2\n    this._fgBehavior = 2;\n  }\n  let stopCount = 0;\n  if (this instanceof Gallery) {\n    stopCount += this.transitionCancel();\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    const length = (this._images || []).length;\n    if (entity) {\n      stopCount += entity.transitionCancel();\n      // @@@1： 此处逻辑和swipe手势函数里 @@@2 逻辑是处理同一个问题（二选一，微信用的是这个效果）\n      // 这里是在手指放上去时直接恢复到边界，那边是在真正要slide到上(下)一张时恢复到边界\n      // 在非边缘图片damping恢复时，此时手指放上去后，恢复动画停止了\n      // 但是如果此时手指移动操作命中外部swipe到上(下)一张的逻辑，则内部图片的damping无法恢复到边界\n      // 因为此时swipe手势函数内正在执行上(下)一张图片过渡，touchend内reset不会被执行\n      const { x: tx = 0, y: ty = 0, ...rest } = entity.getTransform();\n      const [xRange, yRange] = entity.getTranslation();\n      // 是否是边缘图片\n      const isFirst = this._activeIndex === 0;\n      const isLast = this._activeIndex === length - 1;\n      if (this._direction === 'vertical') {\n        if (\n          !isBetween(tx, xRange) &&\n          ((ty <= yRange[0] && !isLast) || (ty >= yRange[1] && !isFirst))\n        ) {\n          // 非边缘图片，且y方向超出边界，x方向也超出边界的，x给予恢复到边界\n          entity.transitionRun(\n            { x: between(tx, xRange), y: ty, ...rest },\n            { duration: 0 },\n          );\n        }\n      } else {\n        if (\n          !isBetween(ty, yRange) &&\n          ((tx <= xRange[0] && !isLast) || (tx >= xRange[1] && !isFirst))\n        ) {\n          // 非边缘图片，且x方向超出边界，y方向也超出边界的，y给予恢复到边界\n          entity.transitionRun(\n            { x: tx, y: between(ty, yRange), ...rest },\n            { duration: 0 },\n          );\n        }\n      }\n    }\n  } else {\n    // 取消动画\n    const { entity } = this._image || {};\n    if (entity) {\n      stopCount += entity.transitionCancel();\n    }\n  }\n  if (stopCount > 0 && this._gesture) {\n    // 如果有动画停止，则阻止所有单指点击相关事件（就像是移动了一下一样）\n    // 曲线救国：这里使用注入设置，以达到阻止的目的\n    this._gesture._preventTap = true;\n    this._gesture._preventSingleTap = true;\n    this._gesture._preventDoubleTap = true;\n    this._gesture._firstPoint = null;\n    if (this._gesture._longTapTimer) {\n      clearTimeout(this._gesture._longTapTimer);\n      this._gesture._longTapTimer = null;\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 17:36:40\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport { revokeDamping, performDamping } from '@huangjs888/damping';\nimport { between } from '../entity/utils';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nconst minScale = 0.3; // swipeClose下拉最小缩放比例\nconst minOpacity = 0.01; // swipeClose下拉最小透明度\nconst isRightDown = (\n  direction: string,\n  [x0, y0]: number[],\n  [x1, y1]: number[],\n) => {\n  if (direction === 'vertical') {\n    return Math.abs(x0 - x1) > 4 * Math.abs(y0 - y1) && x0 - x1 <= 0;\n  } else {\n    return Math.abs(y0 - y1) > 4 * Math.abs(x0 - x1) && y0 - y1 <= 0;\n  }\n};\n\nexport default function pointerMove(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  if (this._fgBehavior === 0 && e.pointer.length === 1) {\n    // 第一根手指放上去，然后直接移动，此时标记为1\n    this._fgBehavior = 1;\n  }\n  this._onePoint = e.pointer.length === 1 || this._fgBehavior === 1;\n  const [_, point0, point] = e.point;\n  const { direction, angle = 0, scale = 1, deltaX = 0, deltaY = 0 } = e;\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    const { entity, wrapper } =\n      (this._images && this._images[this._activeIndex]) || {};\n    const length = (this._images || []).length;\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      const { x: tx = 0, y: ty = 0 } = entity.getTransform();\n      const [xRange, yRange] = entity.getTranslation();\n      // 如果x方向没有可以移动的范围，则判断向上还是向下使用deltaY的正负，否则使用direction值\n      const fixedX = xRange[0] === 0 && xRange[1] === 0;\n      // 如果y方向没有可以移动的范围，则判断向左还是向右使用deltaX的正负，否则使用direction值\n      const fixedY = yRange[0] === 0 && yRange[1] === 0;\n      if (this._moveTarget === 'none') {\n        // 多指或者不满足以下条件的，则做图片操作\n        this._moveTarget = 'inside';\n        if (this._onePoint) {\n          // 是否是边缘图片\n          const isFirst = this._activeIndex === 0;\n          const isLast = this._activeIndex === length - 1;\n          const rightDown = isRightDown(this._direction, point0, point);\n          // 单指行为时，根据图片位置，判断后续为外部swiper操作还是内部图片操作\n          if (this._direction === 'vertical') {\n            if (this._swipeClose && tx >= xRange[1] && rightDown) {\n              this._moveTarget = 'closures';\n            } else {\n              // 如果x的范围是[0,0]，则判断上下移动，直接根据deltaY的正负\n              // 否则需要根据移动方向（因为移动方向是按照45度分开的）\n              const upMove = fixedX ? deltaY < 0 : direction === 'Up';\n              const downMove = fixedX ? deltaY > 0 : direction === 'Down';\n              // 如果图片上边抵达或超出上边界，仍然向下滑动（不是第一张图）\n              // 或者下边抵达或超出下边界，仍然向上滑动（不是最后一张图），则为swiper，反之为图片操作\n              // 因为第一张图片和最后一张都是边缘图片（边缘图片向两边swipe时，是没有上一张或下一张的），无需外部swipe操作，直接走内部图片操作\n              if (\n                (ty <= yRange[0] && upMove && !isLast) ||\n                (ty >= yRange[1] && downMove && !isFirst)\n              ) {\n                this._moveTarget = 'outside';\n              }\n            }\n          } else {\n            if (this._swipeClose && ty >= yRange[1] && rightDown) {\n              this._moveTarget = 'closures';\n            } else {\n              // 如果y的范围是[0,0]，则判断左右移动，直接根据deltaX的正负\n              // 否则需要根据移动方向（因为移动方向是按照45度分开的）\n              const leftMove = fixedY ? deltaX < 0 : direction === 'Left';\n              const rightMove = fixedY ? deltaX > 0 : direction === 'Right';\n              // 如果图片左边抵达或超出左边界，仍然向右滑动（不是第一张图）\n              // 或者右边抵达或超出右边界，仍然向左滑动（不是最后一张图），则为swiper操作，反之为图片操作\n              if (\n                (tx <= xRange[0] && leftMove && !isLast) ||\n                (tx >= xRange[1] && rightMove && !isFirst)\n              ) {\n                this._moveTarget = 'outside';\n              }\n            }\n          }\n        }\n      }\n      // 进入内部图片操作\n      if (this._moveTarget === 'inside') {\n        const translate = -this._activeIndex * this.getItemSize();\n        // 计算出外部swiper移动的原始距离\n        const diff = revokeDamping(this._translate - translate, {\n          max: this.getItemSize(),\n        });\n        let _deltaX = deltaX;\n        let _deltaY = deltaY;\n        // 把swiper移动的原始距离加进去\n        if (this._direction === 'vertical') {\n          _deltaY += diff;\n        } else {\n          _deltaX += diff;\n        }\n        if (this._onePoint) {\n          let _delta = 0;\n          if (this._direction === 'vertical') {\n            _delta = _deltaY;\n            // 竖向的时候固定x\n            _deltaX = fixedX ? 0 : _deltaX;\n            // 内部图片，最多移动到边界\n            _deltaY = between(_deltaY + ty, yRange) - ty;\n            // 超出部分由外部swiper移动\n            _delta -= _deltaY;\n          } else {\n            _delta = _deltaX;\n            // 内部图片，最多移动到边界\n            _deltaX = between(_deltaX + tx, xRange) - tx;\n            // 横向的时候固定y\n            _deltaY = fixedY ? 0 : _deltaY;\n            // 超出部分由外部swiper移动\n            _delta -= _deltaX;\n          }\n          // 内部图片需要移动的距离\n          entity.moveBounce(0, 1, _deltaX, _deltaY, point);\n          // 外部swiper需要移动的距离\n          this.transitionRun(\n            translate + performDamping(_delta, { max: this.getItemSize() }),\n            { duration: 0 },\n          );\n        } else {\n          entity.moveBounce(angle, scale, _deltaX, _deltaY, point);\n          if (diff !== 0) {\n            // 多指移动前，将外部swiper移动的部分归位（内部image会把swiper的距离加进去）\n            this.transitionRun(translate, { duration: 0 });\n          }\n        }\n        return;\n      }\n    } else {\n      if (this._moveTarget === 'none') {\n        this._moveTarget =\n          this._swipeClose && isRightDown(this._direction, point0, point)\n            ? 'closures'\n            : 'outside';\n      }\n    }\n    if (this._moveTarget === 'closures') {\n      const { moveX = 0, moveY = 0 } = e;\n      const { width = 0, height = 0, left = 0, top = 0 } = this._rectSize || {};\n      const k = Math.min(\n        Math.max(\n          1 -\n            ((this._direction === 'vertical'\n              ? moveX / width\n              : moveY / height) || 0),\n          minScale,\n        ),\n        1,\n      );\n      const o =\n        minOpacity + ((k - minScale) * (1 - minOpacity)) / (1 - minScale);\n      let x = 0;\n      let y = 0;\n      if (wrapper) {\n        let _x = 0;\n        let _y = 0;\n        let _k = 1;\n        if (wrapper.style.transform) {\n          const styles = wrapper.style.transform.split('(');\n          const [xs, ys] = styles[1].split(')')[0].split(',');\n          const ks = styles[2].split(')')[0];\n          _x = parseFloat(xs);\n          _y = parseFloat(ys);\n          _k = parseFloat(ks);\n        }\n        x = _x + deltaX + (point[0] - (_x + left + width / 2)) * (1 - k / _k);\n        y = _y + deltaY + (point[1] - (_y + top + height / 2)) * (1 - k / _k);\n      }\n      this.originTransform(x, y, k, o, 0);\n      return;\n    }\n    // 非内部图片操作，均是外部swiper操作\n    const swiperRange = [(1 - length) * this.getItemSize(), 0];\n    // 先把当前值反算出阻尼之前的原值\n    let bt = between(this._translate, swiperRange);\n    let t =\n      bt + revokeDamping(this._translate - bt, { max: this.getItemSize() });\n    // 再对总值进行总体阻尼计算\n    bt = between(\n      (t += this._direction === 'vertical' ? deltaY : deltaX),\n      swiperRange,\n    );\n    t = bt + performDamping(t - bt, { max: this.getItemSize() });\n    this.transitionRun(t, { duration: 0 });\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      if (this._onePoint) {\n        // 实现单指move\n        entity.moveBounce(0, 1, deltaX, deltaY, point);\n      } else {\n        // 双指move\n        entity.moveBounce(angle, scale, deltaX, deltaY, point);\n      }\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 14:49:48\n * @Description: ******\n */\n\nimport { type GEvent } from '@huangjs888/gesture';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function pointerEnd(this: Gallery | SingleGallery, e: GEvent) {\n  if (this._isClose) {\n    return;\n  }\n  let target = '';\n  if (this instanceof Gallery) {\n    target = this._moveTarget;\n  }\n  if (e.pointer.length === 0) {\n    // 抬起最后一根手指时，重置以下参数\n    this._fgBehavior = 0;\n    if (this instanceof Gallery) {\n      this._moveTarget = 'none';\n    }\n  } else if (this._fgBehavior === 1) {\n    // 多指视作单指时，抬起非最后一根手指，不做任何操作\n    if (this instanceof Gallery) {\n      // 微信这种情况下是slide了，其实我觉得吧，可以不用，影响不大\n      if (target === 'outside') {\n        const size = this.getItemSize();\n        const index = size === 0 ? 0 : -this._translate / this.getItemSize();\n        this.slide(Math.round(index));\n      }\n    }\n    return;\n  }\n  const point = e.point[2];\n  if (this instanceof Gallery) {\n    if (this.isTransitioning()) {\n      return;\n    }\n    if (target === 'closures') {\n      this.originTransform(0, 0, 1, 1, 300);\n      return;\n    }\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      entity.resetBounce(point, this._onePoint);\n    }\n    // 只有在swiper的时候才会下一张\n    const size = this.getItemSize();\n    let index = this._activeIndex;\n    if (target === 'outside') {\n      index = size === 0 ? 0 : -this._translate / this.getItemSize();\n    }\n    // Math.round代表移动超过一半，就下一张，后续可以加入阈值参数判断, slide方法里会更新_activeIndex\n    this.slide(Math.round(index));\n  } else {\n    const { entity } = this._image || {};\n    if (entity) {\n      if (entity.isTransitioning()) {\n        return;\n      }\n      entity.resetBounce(point, this._onePoint);\n    }\n  }\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-07-28 09:57:17\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 14:42:44\n * @Description: ******\n */\n\nimport Gesture from '@huangjs888/gesture';\nimport rotate from './rotate';\nimport scale from './scale';\nimport swipe from './swipe';\nimport longTap from './longTap';\nimport singleTap from './singleTap';\nimport doubleTap from './doubleTap';\nimport pointerStart from './pointerStart';\nimport pointerMove from './pointerMove';\nimport pointerEnd from './pointerEnd';\nimport Gallery from '../gallery';\nimport SingleGallery from '../singleGallery';\n\nexport default function bindEvents(\n  this: Gallery | SingleGallery,\n  element: HTMLElement,\n) {\n  // 绑定手势\n  const gesture = new Gesture(element);\n  gesture.on('pointerStart', pointerStart.bind(this));\n  gesture.on('pointerMove', pointerMove.bind(this));\n  gesture.on('pointerEnd', pointerEnd.bind(this));\n  gesture.on('swipe', swipe.bind(this));\n  gesture.on('longTap', longTap.bind(this));\n  gesture.on('singleTap', singleTap.bind(this));\n  gesture.on('doubleTap', doubleTap.bind(this));\n  gesture.on('rotate', rotate.bind(this));\n  gesture.on('scale', scale.bind(this));\n  return gesture;\n}\n","/*\n * @Author: Huangjs\n * @Date: 2023-02-13 15:22:58\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-03 17:39:51\n * @Description: ******\n */\nimport Gesture from '@huangjs888/gesture';\nimport Transition, {\n  TAProperty,\n  easeOutQuart,\n  type EaseFn,\n} from '@huangjs888/transition';\nimport loadImage, { type Image, type ImageOption } from './image';\nimport bindGesture from './events';\nimport {\n  createContainer,\n  createBackdrop,\n  createIndicator,\n  createSubstance,\n  createItemIndicator,\n  createItemWrapper,\n  setStyle,\n} from './dom';\n\nclass Gallery {\n  _container: HTMLElement | null = null;\n  _substance: HTMLElement | null = null;\n  _backdrop: HTMLElement | null = null;\n  _indicator: HTMLElement | null = null;\n  _itemGap: number = 0;\n  _direction: Direction = 'horizontal';\n  _rectSize: RectSize | null = null; // 当前容器位置和尺寸\n  _isClose: boolean = true;\n  _swipeClose: boolean = false;\n  _closeDestory: boolean = false;\n  _originRect: RectSize | null = null;\n  _press: (() => void) | null = null;\n  _longPress: (() => void) | null = null;\n  _onChange: (() => void) | null = null;\n  _removeResize: (() => void) | null = null;\n  _images: Image[] | null = null;\n  _activeIndex: number = -1;\n  _translate: number = 0; // swiper位移值\n  _transition: Transition | null = null; // 过渡对象\n  _gesture: Gesture | null = null; // 手势对象\n  _onePoint: boolean = false; // 是否被视作单点移动\n  _fgBehavior: number = 0; // 当第一根手指放上去后，接着有三种行为：0: 直接拿开 1: 直接移动 2: 再放一根手指\n  _moveTarget: 'closures' | 'outside' | 'inside' | 'none' = 'none'; // 判断是内部的图片移动，还是外部swiper移动，还是直接关闭\n  constructor({\n    container: ele,\n    imageUrls = [],\n    activeIndex = 0,\n    direction = 'horizontal',\n    itemGap = 20,\n    hasLoading = true,\n    hasIndicator = true,\n    isLazy = true,\n    swipeClose = true,\n    closeDestory = true,\n    backdropColor = '#000f',\n    originRect,\n    press,\n    longPress,\n    onChange,\n    onResize,\n    options = {},\n  }: SOption) {\n    const container = (this._container = createContainer(ele));\n    this._backdrop = createBackdrop(backdropColor, container);\n    const substance = (this._substance = createSubstance(\n      direction === 'vertical',\n      container,\n    ));\n    const indicator = (this._indicator = createIndicator(\n      direction === 'vertical',\n      hasIndicator && imageUrls.length > 1,\n      container,\n    ));\n    const gesture = (this._gesture = bindGesture.apply(this, [container]));\n    this._images = imageUrls.map((url, index) => {\n      const image: Image = {\n        wrapper: createItemWrapper(\n          index === 0,\n          direction === 'vertical',\n          hasLoading,\n          itemGap,\n          substance,\n        ),\n        indicator: createItemIndicator(direction === 'vertical', indicator),\n        url,\n        width: 0,\n        height: 0,\n        options: {\n          rotation: !gesture.isTouch()\n            ? [-Number.MAX_VALUE, Number.MAX_VALUE]\n            : undefined,\n          scalation: !gesture.isTouch() ? [0.1, 10] : undefined,\n          ...options,\n        },\n      };\n      if (!isLazy) {\n        // 图片如果加载过慢，show的时候图片因为没有对象，不会计算尺寸，所以这里在加载成功的时候计算一下\n        loadImage(image).then((okay) => okay && this.resetItemSize(index));\n      }\n      return image;\n    });\n    // 创建过度\n    this._transition = new Transition({\n      element: substance,\n      propertyName: 'transform',\n      propertyValue: new (class extends TAProperty {\n        toString() {\n          return `translate${direction === 'vertical' ? 'Y' : 'X'}(${\n            this.value.translate\n          }px)`;\n        }\n      })({ translate: this._translate }),\n    });\n    this._itemGap = itemGap;\n    this._direction = direction;\n    this._swipeClose = swipeClose;\n    this._closeDestory = closeDestory;\n    this._originRect = originRect || null;\n    this._press = press || null;\n    this._longPress = longPress || null;\n    this._onChange = onChange || null;\n    this.slide(activeIndex, { duration: 0 });\n    // 浏览器窗口变化重新计算容器尺寸和所有图片尺寸\n    const resize = () => {\n      this.resetSize();\n      this.resetItemSize();\n      typeof onResize === 'function' && onResize();\n    };\n    const contextmenu = (e: Event) => {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    };\n    window.addEventListener('resize', resize);\n    window.addEventListener('contextmenu', contextmenu);\n    this._removeResize = () => {\n      window.removeEventListener('resize', resize);\n      window.removeEventListener('contextmenu', contextmenu);\n    };\n  }\n  resetSize() {\n    if (!this._container || !this._substance || !this._images) {\n      return;\n    }\n    // 容器宽高设置\n    const { left, top, width, height } =\n      this._container.getBoundingClientRect();\n    this._rectSize = { left, top, width, height };\n    const length = this._images.length;\n    if (length > 0) {\n      setStyle(this._substance, {\n        width:\n          this._direction === 'vertical'\n            ? width\n            : width * length + (length - 1) * this._itemGap,\n        height:\n          this._direction === 'vertical'\n            ? height * length + (length - 1) * this._itemGap\n            : height,\n      });\n    }\n  }\n  resetItemSize(index?: number) {\n    if (!this._rectSize || !this._images) {\n      return;\n    }\n    const { left, top, width, height } = this._rectSize;\n    const resize = (image: Image) => {\n      if (image && image.entity && width !== 0 && height !== 0) {\n        image.entity.setSizeInfo({\n          containerCenter: [left + width / 2, top + height / 2],\n          containerWidth: width,\n          containerHeight: height,\n          naturalWidth: image.width,\n          naturalHeight: image.height,\n        });\n        const { elementHeight } = image.entity.getSizeInfo();\n        if (this._direction !== 'vertical' && elementHeight > height) {\n          setStyle(image.wrapper, {\n            alignItems: 'flex-start',\n          });\n        }\n      }\n    };\n    if (typeof index === 'number') {\n      resize(this._images[index]);\n    } else {\n      this._images.forEach(resize);\n    }\n  }\n  getItemSize() {\n    if (!this._rectSize) {\n      return 0;\n    }\n    const { width, height } = this._rectSize;\n    const wh = this._direction === 'vertical' ? height : width;\n    return wh === 0 ? 0 : wh + this._itemGap;\n  }\n  slide(\n    index: number,\n    options?: {\n      duration?: number;\n      easing?: EaseFn;\n    },\n  ) {\n    if (!this._images || this._images.length === 0) {\n      return Promise.resolve();\n    }\n    const _index = Math.max(Math.min(index, this._images.length - 1), 0);\n    const isChange = this._activeIndex !== _index;\n    if (isChange) {\n      const { indicator: lastOne } = this._images[this._activeIndex] || {};\n      if (lastOne) {\n        setStyle(lastOne, {\n          width: 7,\n          height: 7,\n          opacity: 0.6,\n        });\n      }\n      const { indicator: thisOne } = this._images[_index] || {};\n      if (thisOne) {\n        setStyle(thisOne, {\n          width: 8,\n          height: 8,\n          opacity: 1,\n        });\n      }\n      this._activeIndex = _index;\n      loadImage(this._images[_index]).then(\n        // lazy的时候，滑到这里才加载图片，所以加载成功后需要计算该图片尺寸\n        (okay) => okay && this.resetItemSize(_index),\n      );\n    }\n    const _translate = -_index * this.getItemSize();\n    return this.transitionRun(_translate, options).then((v) => {\n      if (isChange && typeof this._onChange === 'function') {\n        this._onChange();\n      }\n      return v;\n    });\n  }\n  next(options?: { duration?: number; easing?: EaseFn }) {\n    return this.slide(this._activeIndex + 1, options);\n  }\n  prev(options?: { duration?: number; easing?: EaseFn }) {\n    return this.slide(this._activeIndex - 1, options);\n  }\n  transitionRun(\n    translate: number,\n    options: {\n      duration?: number;\n      easing?: EaseFn;\n      before?: EaseFn;\n    } = {},\n  ) {\n    const delta = translate - this._translate;\n    if (delta === 0 || !this._transition) {\n      return Promise.resolve({ translate: this._translate });\n    }\n    if (typeof options.duration === 'number' && options.duration <= 0) {\n      // 这里移动时不需要动画，可以直接进行绑定赋值\n      this._translate = translate;\n      this._transition.bind({ translate });\n      return Promise.resolve({ translate });\n    }\n    this._translate = translate;\n    return this._transition\n      .apply(\n        { translate: delta },\n        {\n          precision: { translate: 1 },\n          cancel: true,\n          duration: 500,\n          easing: easeOutQuart,\n          ...options,\n        },\n      )\n      .then((value) => {\n        if (!this.isTransitioning()) {\n          // 在最后一个动画的最后一帧结束重新绑定一下过渡值，目的是为了让_transition里的value和_transform保持一致\n          if (this._transition) {\n            this._transition.bind({ translate: this._translate });\n          }\n        }\n        return value;\n      });\n  }\n  transitionCancel() {\n    if (!this._transition) {\n      return 0;\n    }\n    // cancel返回值是动画未执行的部分\n    return this._transition.cancel().map((value) => {\n      // 取消动画时应该把this._transform内的值减掉还未执行的部分\n      this._translate -= value.translate;\n    }).length;\n  }\n  isTransitioning() {\n    if (!this._transition) {\n      return false;\n    }\n    return this._transition.transitioning();\n  }\n  destory() {\n    // 销毁手势事件\n    if (this._gesture) {\n      this._gesture.destory();\n      this._gesture = null;\n    }\n    if (this._removeResize) {\n      this._removeResize();\n      this._removeResize = null;\n    }\n    this._isClose = true;\n    this._transition = null;\n    this._rectSize = null;\n    this._originRect = null;\n    this._images = null;\n    this._press = null;\n    this._longPress = null;\n    this._onChange = null;\n    this._substance = null;\n    this._backdrop = null;\n    this._indicator = null;\n    if (this._container && this._container.parentNode) {\n      this._container.parentNode.removeChild(this._container);\n      this._container = null;\n    }\n  }\n  setSwipeClose(swipeClose: boolean = true) {\n    if (!this._container) {\n      return;\n    }\n    this._swipeClose = swipeClose;\n  }\n  setCloseDestory(closeDestory: boolean = true) {\n    if (!this._container) {\n      return;\n    }\n    this._closeDestory = closeDestory;\n  }\n  setOriginRect(originRect: RectSize | null = null) {\n    if (!this._container) {\n      return;\n    }\n    this._originRect = originRect;\n  }\n  open() {\n    if (!this._container || !this._isClose) {\n      return;\n    }\n    this._isClose = false;\n    setStyle(this._container, {\n      display: 'block',\n    });\n    // 设置容器宽高尺寸\n    this.resetSize();\n    // 要计算每一张图片尺寸\n    // 初始化显示的图片如果加载很快，还没open就加载完成触发了resetItemSize\n    // 由于此时container没有尺寸，图片也不会计算尺寸，那就需要在这里再次计算一下\n    this.resetItemSize();\n    // 计算完尺寸，自然要将当前activeIndex的图片展示出来，要计算一下swiper的位移\n    if (this._transition) {\n      this._translate = -this._activeIndex * this.getItemSize();\n      this._transition.bind({ translate: this._translate });\n    }\n    let x = 0;\n    let y = 0;\n    let k = 0.01;\n    if (this._originRect && this._rectSize) {\n      const { left, top, width, height } = this._originRect;\n      const {\n        left: _left = 0,\n        top: _top = 0,\n        width: _width = 0,\n        height: _height = 0,\n      } = this._rectSize || {};\n      x = left + width / 2 - (_left + _width / 2);\n      y = top + height / 2 - (_top + _height / 2);\n      k = width / _width || 0.01;\n    }\n    this.originTransform(x, y, k, 0, 0);\n    setTimeout(() => {\n      this.originTransform(0, 0, 1, 1, 300).then(() => {\n        if (this._indicator) {\n          setStyle(this._indicator, {\n            display: 'flex',\n          });\n        }\n      });\n    }, 1);\n  }\n  close() {\n    if (!this._container || this._isClose) {\n      return;\n    }\n    this._isClose = true;\n    let x = 0;\n    let y = 0;\n    let k = 0.01;\n    if (this._originRect && this._rectSize) {\n      const { left, top, width, height } = this._originRect;\n      const {\n        left: _left = 0,\n        top: _top = 0,\n        width: _width = 0,\n        height: _height = 0,\n      } = this._rectSize || {};\n      x = left + width / 2 - (_left + _width / 2);\n      y = top + height / 2 - (_top + _height / 2);\n      k = width / _width || 0.01;\n    }\n    // 需要把放大的图片归位到原始大小\n    const { entity } = (this._images && this._images[this._activeIndex]) || {};\n    if (entity) {\n      entity.reset();\n    }\n    if (this._indicator) {\n      setStyle(this._indicator, {\n        display: 'none',\n      });\n    }\n    this.originTransform(x, y, k, 0, 300).then(() => {\n      if (this._closeDestory) {\n        this.destory();\n      } else if (this._container) {\n        setStyle(this._container, {\n          display: 'none',\n        });\n      }\n    });\n  }\n  originTransform(\n    x: number,\n    y: number,\n    k: number,\n    o: number,\n    duration: number = 0,\n  ) {\n    const backdrop = this._backdrop;\n    if (backdrop) {\n      const { wrapper } =\n        (this._images && this._images[this._activeIndex]) || {};\n      if (wrapper) {\n        setStyle(wrapper, {\n          overflow: 'visible',\n          transform: `translate(${x}px,${y}px) scale(${k})`,\n          transition: duration > 0 ? `transform ${duration}ms` : '',\n        });\n      }\n      setStyle(backdrop, {\n        opacity: o,\n        transition: duration > 0 ? `opacity ${duration}ms` : '',\n      });\n      if (duration > 0) {\n        return new Promise<void>((resolve) => {\n          backdrop.ontransitionend = (e) => {\n            // 只有触发事件的目标元素与绑定的目标元素一致，同时触发事件的属性与需要的属性相同，才会执行事件并解绑\n            if (e.target === backdrop && e.propertyName === 'opacity') {\n              backdrop.ontransitionend = null;\n              if (wrapper) {\n                setStyle(wrapper, {\n                  overflow: 'hidden',\n                  transition: 'none',\n                });\n              }\n              setStyle(backdrop, {\n                transition: 'none',\n              });\n              resolve();\n            }\n          };\n        });\n      }\n    }\n    return Promise.resolve();\n  }\n}\n\nexport type RectSize = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n};\n\nexport type Direction = 'vertical' | 'horizontal';\n\nexport type SOption = {\n  container?: HTMLElement | string; // 容器元素\n  imageUrls?: string[]; // image的url列表\n  direction?: Direction; // 图片排列方向（上下滑动，还是左右滑动）\n  activeIndex?: number; // 当前展示的图片下标\n  itemGap?: number; // 图片之间的间距\n  backdropColor?: string; // backdrop背景色和透明度（rgba(0,0,0,0.9)）\n  hasLoading?: boolean; // 加载图片是否展示loading\n  hasIndicator?: boolean; // 多图片时是否需要指示器（页码）\n  isLazy?: boolean; // 图片是否是懒加载（滑到这个图片时再加载），否则一次性加载完\n  originRect?: RectSize; // 缩略图的位置和吃尺寸，用于点开和关闭时的动画\n  swipeClose?: boolean; // 向下滑动时是否执行关闭操作\n  closeDestory?: boolean; // 关闭时是否销毁组件还是hide\n  options?: ImageOption; // 图片实体的相关配置\n  press?: () => void; // singleTap回调\n  longPress?: () => void; // longTap回调\n  onChange?: () => void; // 滑动到另一张图片之后的回调\n  onResize?: () => void; // 窗口改变时的回调\n};\n\nexport default Gallery;\n","/*\n * @Author: Huangjs\n * @Date: 2022-05-11 17:49:45\n * @LastEditors: Huangjs\n * @LastEditTime: 2023-08-02 10:54:32\n * @Description: ******\n */\nimport Gallery, { type SOption } from './gallery';\nimport SingleGallery from './singleGallery';\nimport Entity from './entity';\nimport loadImage from './image';\n\nexport * from './gallery';\n\nexport * from './singleGallery';\n\nexport * from './entity';\n\nexport * from './image';\n\nexport { Gallery, SingleGallery, Entity, loadImage };\n\nexport default function previewImage({\n  urls,\n  current,\n  showMenu,\n  ...restOption\n}: {\n  urls: string[];\n  current?: string;\n  showMenu?: () => void;\n} & SOption) {\n  const index = !current ? 0 : urls.indexOf(current);\n  const gallery = new Gallery({\n    imageUrls: urls,\n    activeIndex: index,\n    longPress: () => {\n      typeof showMenu === 'function' && showMenu();\n    },\n    press: () => {\n      gallery.close();\n    },\n    ...restOption,\n  });\n  gallery.open();\n}\n"],"names":["ratioOffset","v","k","t","effectuate","fn","args","isBetween","min","max","between","_","Math","Entity","_element","element","sizeInfo","dblAdjust","dblScale","damping","rotation","scalation","translation","containerCenter","containerWidth","containerHeight","naturalWidth","naturalHeight","elementWidth","elementHeight","document","querySelector","e","HTMLElement","createElement","style","opacity","innerHTML","this","_transform","Transform","a","x","y","_transition","Transition","propertyName","propertyValue","value","toString","TAProperty","toRaw","setSizeInfo","setDblAdjust","setDamping","setDblScale","setRotation","setScalation","setTranslation","_sizeInfo","width","aspectRatio","height","reset","_rotation","_scalation","getDblScale","xy","setXTranslation","setYTranslation","getXTranslation","getYTranslation","_translation","getSizeInfo","bx","by","_dblScale","aj","_dblAdjust","key","_damping","indexOf","transform","transformTo","point","transformRaw","options","getTransform","ta","tk","tx","ty","_point","_options","Array","isArray","undefined","_a","_k","_x","_y","_transformRaw","getRotation","getScalation","computeOffset","ox","oy","transitionRun","duration","bind","Promise","resolve","deltaValue","precision","apply","cancel","easing","easeOutQuart","then","isTransitioning","map","Object","keys","forEach","val","length","transitioning","adjust","dk","cx","cy","cw","ch","ew","eh","angle","scale","deltaX","deltaY","aRange","isDamping","ba","revokeDamping","performDamping","kRange","bk","mode","xMax","yMax","getDblAdjust","stretch","transition","maxBounce","xyScale","xyPos","xyRange","getTranslation","sign","_stretch","abs","_duration","easeOutQuad","xySwipe","xyBounce","velocity","sqrt","xyMove","kt","loadingIcon","errorIcon","autoPxReg","setStyle","ele","css","cssText","replace","toLowerCase","suffix","test","setProperty","createItemIndicator","isVertical","item","borderRadius","display","margin","background","appendChild","createItemWrapper","isFirst","hasLoading","itemGap","wrapper","position","justifyContent","alignItems","overflow","flex","marginTop","marginLeft","loading","top","left","createLoading","image","entity","url","loadImage","error","color","fontSize","flexDirection","rotate","_isClose","_gesture","isTouch","Gallery","translate","_activeIndex","getItemSize","round","_translate","_images","isNaN","resetBounce","moveBounce","_image","swipe","_moveTarget","swipeComputed","option","all","before","progress","s","sb","b","diff","stretchX","stretchY","_direction","xRange","swipeBounce","yRange","_swipeClose","direction","close","index","slide","ceil","floor","longTap","_longPress","singleTap","_press","doubleTap","pointerStart","_fgBehavior","pointer","stopCount","transitionCancel","rest","isLast","_preventTap","_preventSingleTap","_preventDoubleTap","_firstPoint","_longTapTimer","clearTimeout","minScale","minOpacity","isRightDown","x0","y0","x1","y1","pointerMove","_onePoint","point0","fixedX","fixedY","rightDown","upMove","downMove","leftMove","rightMove","_deltaX","_deltaY","_delta","moveX","moveY","_rectSize","o","styles","split","xs","ys","ks","parseFloat","originTransform","swiperRange","bt","pointerEnd","target","size","bindEvents","gesture","Gesture","on","container","imageUrls","activeIndex","hasIndicator","isLazy","swipeClose","closeDestory","backdropColor","originRect","press","longPress","onChange","onResize","backdrop","_container","zIndex","body","createContainer","_backdrop","substance","_substance","createSubstance","indicator","_indicator","bottom","right","createIndicator","bindGesture","Number","MAX_VALUE","okay","resetItemSize","_itemGap","_closeDestory","_originRect","_onChange","resize","resetSize","contextmenu","preventDefault","stopImmediatePropagation","window","addEventListener","_removeResize","removeEventListener","getBoundingClientRect","wh","_index","isChange","lastOne","thisOne","delta","destory","parentNode","removeChild","_left","_top","_width","setTimeout","ontransitionend","previewImage","urls","current","showMenu","restOption","gallery","open"],"sourceRoot":""}