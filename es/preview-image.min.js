function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},t.apply(this,arguments)}function e(t,e){if(null==t)return{};var i,n,s={},o=Object.keys(t);for(n=0;o.length>n;n++)0>e.indexOf(i=o[n])&&(s[i]=t[i]);return s}let i;function n(t){if("undefined"==typeof document)return 0;if(t||void 0===i){const t=document.createElement("div");t.style.width="100%",t.style.height="200px";const e=document.createElement("div"),n=e.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const s=t.offsetWidth;e.style.overflow="scroll";let o=t.offsetWidth;s===o&&(o=e.clientWidth),document.body.removeChild(e),i=s-o}return i}function s(t){const e=t.match(/^(.*)px$/),i=Number(null==e?void 0:e[1]);return Number.isNaN(i)?n():i}const o=/^(?:-border(?:-top|-right|-bottom|-left)?(?:-width|)|(?:-margin|-padding)?(?:-top|-right|-bottom|-left)?|(?:-min|-max)?(?:-width|-height))$/;function r(t,e){if(t&&e){let i="";Object.keys(e).forEach((n=>{const s=n.replace(/([A-Z])/g,"-$1").toLocaleLowerCase(),r=e[n];if(r||0===r){const t="number"==typeof r&&/^[a-z]/.test(s)&&o.test("-"+s)?"px":"";i+=`${s}: ${r}${t};`}else t.style.removeProperty(s)})),t.style.cssText+=i}return t}function a(t,e){return!(!t||!e)&&t.classList.contains(e)}function l(t,e){return t&&e&&(Array.isArray(e)?e:e.split(" ")).forEach((e=>e&&t.classList.add(e))),t}function h(t,e){return t&&e&&(Array.isArray(e)?e:e.split(" ")).forEach((e=>e&&t.classList.remove(e))),t}function c(t){let e=t;return"string"==typeof t&&(e=document.querySelector(t)),"function"==typeof t&&(e=t()),e||null}function u(t,e,i,n){var s;let o,a,h,u;"string"==typeof t?(o=t,a=e||{},h=Array.isArray(i)?i:[i],u=n):(o="div",a=t||{},h=Array.isArray(e)?e:[e],u=i);const p=r(l(document.createElement(o),a.className),a.style),d=a.attrs||{};return Object.keys(d).forEach((t=>{"innerHTML"!==t&&"className"!==t&&"style"!==t&&t in p&&(p[t]=d[t])})),h.forEach((t=>{t instanceof Element?null==p||p.appendChild(t):p&&null!=t&&(p.innerHTML=t+"")})),null==(s=c(u))||s.appendChild(p),p}function p(t){if(t){const{left:e,top:i,width:n,height:s}=t.getBoundingClientRect();return{left:e,top:i,width:n,height:s}}return{left:0,top:0,width:0,height:0}}class d{constructor(){this.events={},this.events={}}one(t,e,i){const n="function"==typeof e?(...s)=>{e.apply(null,s),this.off(t,n,i)}:e;this.on(t,n,i)}on(t,e,i){const n=this.events[t]||{pool:[],single:-1};if("function"==typeof e)if(i)-1===n.single?n.single=n.pool.push(e)-1:n.pool[n.single]=e;else{let t=!0;for(let i=0,s=n.pool.length;s>i;i++)if(n.pool[i]===e&&i!==n.single){t=!1;break}t&&n.pool.push(e)}else i&&-1!==n.single&&(n.pool.splice(n.single,1),n.single=-1);this.events[t]=n}off(t,e,i){if(void 0===t)this.events={};else if(void 0===e)delete this.events[t];else if(i){const e=this.events[t];e&&-1!==e.single&&(e.pool.splice(e.single,1),e.single=-1)}else{const i=this.events[t];if(i)for(let t=i.pool.length-1;t>=0;t--)if(i.pool[t]===e&&t!==i.single){i.pool.splice(t,1);break}}}emit(t,e){const i=this.events[t];if(i)for(let n=0,s=i.pool.length;s>n;n++){const s=i.pool[n];if("function"==typeof s){if(!1===s.call(null,e,t))break}}}}const m=(t,e)=>{let i=t;for(;i&&i!==e;)i=i.parentNode;return!!i};function f(t,e,i){return"number"!=typeof t||i>t?e:t}function g(){return window.navigator.maxTouchPoints||"ontouchstart"in window.document}function _(t,e=!1){if(t.touches){if(e){const e=Array.prototype.filter.call(t.touches,(e=>m(e.target,t.currentTarget))).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})));return{points:e,isFirst:t.changedTouches.length===e.length}}return{points:Array.prototype.slice.call(t.changedTouches||[]).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})))}}return{points:[{pageX:t.pageX,pageY:t.pageY,identifier:-1}],isFirst:e}}function v([t,e],[i,n]){return"number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n?Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)):0}function y([t,e],[i,n]){return"number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n?180*Math.atan2(n-e,i-t)/Math.PI:0}function w([t,e],[i,n]){const s="number"==typeof t&&"number"==typeof e,o="number"==typeof i&&"number"==typeof n;return s||o?s&&!o?[t,e]:!s&&o?[i,n]:[(t+i)/2,(e+n)/2]:[0,0]}function b([t,e],[i,n]){if("number"==typeof t&&"number"==typeof i&&"number"==typeof e&&"number"==typeof n){const s=t-i,o=e-n;if(s!==o)return Math.abs(o)>Math.abs(s)?e-n>0?"Up":"Down":t-i>0?"Left":"Right"}return"None"}let T=class extends d{constructor(t){super(),this.wheelDelay=350,this.longTapInterval=750,this.doubleTapInterval=250,this.doubleTapDistance=30,this.touchMoveDistance=3,this.swipeVelocity=.3,this.swipeDuration=100,this.raiseDuration=100,this._rotateAngle=0,this._singleTapTimer=0,this._longTapTimer=0,this._wheelTimerEnd=null,this._preventTap=!0,this._swipePoints=null,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._firstPointer=null,this._pointer0=null,this._pointer1=null,this.resetOptions(t)}resetOptions(t){const{wheelDelay:e,longTapInterval:i,doubleTapInterval:n,doubleTapDistance:s,touchMoveDistance:o,swipeVelocity:r,swipeDuration:a,raiseDuration:l}=t||{};this.wheelDelay=f(e,350,1),this.longTapInterval=f(i,750,1),this.doubleTapInterval=f(n,250,1),this.doubleTapDistance=f(s,30,1),this.touchMoveDistance=f(o,3,0),this.swipeVelocity=f(r,.3,0),this.swipeDuration=f(a,100,1),this.raiseDuration=f(l,100,1)}preventAllTap(t=!0){this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,t&&(this._firstPointer=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0)}};function x(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]},{points:i,isFirst:n}=_(t,!0);n?(this._wheelTimerEnd&&(clearTimeout(this._wheelTimerEnd.timer),this._wheelTimerEnd.wheelEnd(),this._wheelTimerEnd=null),this._pointer0=null,this._pointer1=null):(this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1));for(let t=0,e=i.length;e>t;++t){const e=i[t],n=[e.pageX,e.pageY],s={start:n,previous:n,current:n,identifier:e.identifier,changed:!0};this._pointer0?this._pointer1||this._pointer0.identifier===e.identifier||(this._pointer1=s):this._pointer0=s}this.preventAllTap(!1),this._swipePoints=null,this._rotateAngle=0;const s=this._pointer0,o=this._pointer1;if(o&&s)this._firstPointer=null,e.pointers=[s,o],e.getPoint=()=>w(s.current,o.current),this.emit("gestureStart",e);else{if(!s)return;{e.pointers=[s],e.getPoint=()=>s.current,this._preventTap=!1,this._longTapTimer=+setTimeout((()=>{this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._longTapTimer=0,this._firstPointer=null,e.waitTime=this.longTapInterval,this.emit("longTap",e)}),this.longTapInterval);const t=this._firstPointer,i=this._singleTapTimer;i&&t&&v(t.current,s.current)<this.doubleTapDistance?(clearTimeout(i),this._singleTapTimer=0,this._preventSingleTap=!0,this._preventDoubleTap=!1,e.getPoint=()=>t.current):(this._firstPointer=s,this._preventSingleTap=!1,this._preventDoubleTap=!0)}}this.emit("pointerStart",e)}function D(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]};this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:i}=_(t);for(let t=0,e=i.length;e>t;++t){const e=i[t],n=[e.pageX,e.pageY];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,this._pointer0.previous=this._pointer0.current,this._pointer0.current=n):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,this._pointer1.previous=this._pointer1.current,this._pointer1.current=n)}const n=this._pointer0,s=this._pointer1;if(n&&v(n.start,n.current)>this.touchMoveDistance||s&&v(s.start,s.current)>this.touchMoveDistance){if(this.preventAllTap(),s&&n){e.pointers=[n,s];const{start:t,previous:i,current:o}=n,{start:r,previous:a,current:l}=s,h=w(o,l),c=w(i,a),u=w(t,r);e.getPoint=t=>"start"===t?u:"previous"===t?c:h,e.direction=b(c,h),e.moveDirection=b(u,h),e.deltaX=h[0]-c[0],e.moveX=h[0]-u[0],e.deltaY=h[1]-c[1],e.moveY=h[1]-u[1];const p=v(o,l),d=v(i,a),m=v(t,r);m>0&&p>0&&d>0&&(e.scale=p/d,e.moveScale=p/m);let f=y(o,l)-y(i,a);-180>f?f+=360:f>180&&(f-=360),e.angle=f,this._rotateAngle+=f,e.moveAngle=this._rotateAngle,this.emit("rotate",e),m>0&&p>0&&d>0&&this.emit("scale",e),this.emit("multiPan",e),this.emit("gestureMove",e)}else{if(!n)return;{e.pointers=[n];const{start:t,previous:i,current:s}=n;e.getPoint=e=>"start"===e?t:"previous"===e?i:s,e.direction=b(i,s),e.moveDirection=b(t,s),e.deltaX=s[0]-i[0],e.moveX=s[0]-t[0],e.deltaY=s[1]-i[1],e.moveY=s[1]-t[1];const o=Date.now(),r=this._swipePoints||[[],[]];o-((r[1][0]?r[1][0].timestamp:0)||0)>this.swipeDuration&&(r[0]=r[1],r[1]=[]),r[1].push({point:s,timestamp:o}),this._swipePoints=r,this.emit("pan",e)}}this.emit("pointerMove",e)}}function E(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]};let i=null,n=null;this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:s}=_(t);for(let t=0,e=s.length;e>t;++t){const e=s[t];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,i=this._pointer0,this._pointer0=null):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,n=this._pointer1,this._pointer1=null)}if(this._pointer1&&!this._pointer0&&(this._pointer0=this._pointer1,this._pointer1=null,n=i,i=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0),this._pointer0){e.pointers=[this._pointer0],this._pointer1?e.pointers.push(this._pointer1):n&&(e.leavePointers=[n],this._rotateAngle=0);const t=w(this._pointer0.start,this._pointer1?this._pointer1.start:n?n.start:[]),i=w(this._pointer0.previous,this._pointer1?this._pointer1.previous:n?n.previous:[]),s=w(this._pointer0.current,this._pointer1?this._pointer1.current:n?n.current:[]);e.getPoint=e=>"start"===e?t:"previous"===e?i:s,this.emit("gestureEnd",e)}else if(i){e.leavePointers=[i],n&&e.leavePointers.push(n);const t=n?w(i.start,n.start):i.start,s=n?w(i.previous,n.previous):i.previous,a=n?w(i.current,n.current):i.current;if(e.getPoint=e=>"start"===e?t:"previous"===e?s:a,this._preventTap||(this.emit("tap",e),this._preventTap=!0),this._preventSingleTap||(this._singleTapTimer=+setTimeout((()=>{this._singleTapTimer=0,e.delayTime=this.doubleTapInterval,this.emit("singleTap",e)}),this.doubleTapInterval),this._preventSingleTap=!0),!this._preventDoubleTap){const t=this._firstPointer;t&&(e.getPoint=()=>t.current),e.intervalTime=this.doubleTapInterval,this.emit("doubleTap",e),this._firstPointer=null,this._preventDoubleTap=!0}if(this._swipePoints){const[t,i]=this._swipePoints,n=i[i.length-1];if(Date.now()-n.timestamp<=this.raiseDuration){let s=i[0];for(let e=t.length-1;e>=0&&n.timestamp-t[e].timestamp<=this.swipeDuration;e--)s=t[e];const a=(o=n.timestamp-s.timestamp,"number"!=typeof(r=v(s.point,n.point))||0===r||"number"!=typeof o||0===o?0:r/o);if(a>this.swipeVelocity){const t=y(s.point,n.point);e.direction=b(s.point,n.point),e.angle=t,e.velocity=a,e.swipeComputed=(e,i=a)=>{let n=0,s=0,o=0;e>1?(n=e,s=i/n,o=i*n/2):e>0&&(s=e,n=i/s,o=i*i/(2*s));const[r,l]=function(t,e){if("number"!=typeof t||"number"!=typeof e)return[0,0];const i=e*Math.PI/180;return[t*Math.cos(i),t*Math.sin(i)]}(o,t);return{duration:n,stretchX:r,stretchY:l,deceleration:s}},this.emit("swipe",e),this._swipePoints=null}}}}var o,r;this.emit("pointerEnd",e)}function M(t){this.emit("pointerCancel",{sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]}),E.call(this,t)}function C(t){const e=this;function i(){"undefined"!=typeof window&&(window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",r),window.removeEventListener("blur",n),window.removeEventListener("dragstart",s),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",s))}function n(t){t.preventDefault(),t.stopPropagation(),i()}function s(t){t.preventDefault(),t.stopPropagation()}function o(i){if(0===t.button)D.call(e,i);else{const n={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]},s=[i.pageX,i.pageY];if(e._pointer0){e._pointer0.previous=e._pointer0.current,e._pointer0.current=s,n.pointers=[e._pointer0];const{start:t,previous:i,current:o}=e._pointer0;n.getPoint=e=>"start"===e?t:"previous"===e?i:o,n.direction=b(i,o),n.moveDirection=b(t,o),n.deltaX=o[0]-i[0],n.moveX=o[0]-t[0],n.deltaY=o[1]-i[1],n.moveY=o[1]-t[1],n.angle=n.deltaX/4,n.moveAngle=n.moveX/4,e.emit("rotate",n)}}}function r(n){if(i(),0===t.button)E.call(e,n);else{const i={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]},s=[n.pageX,n.pageY];if(e._pointer0){const t=e._pointer0;e._pointer0=null,t.previous=t.current,t.current=s,i.leavePointers=[t];const{start:n,previous:o,current:r}=t;i.getPoint=t=>"start"===t?n:"previous"===t?o:r}i.angle=NaN,e.emit("rotate",i)}}if("undefined"!=typeof window&&(window.addEventListener("mousemove",o),window.addEventListener("mouseup",r),window.addEventListener("blur",n),window.addEventListener("dragstart",s,{capture:!0,passive:!1}),"onselectstart"in window.document.documentElement&&window.addEventListener("selectstart",s,{capture:!0,passive:!1})),0===t.button)x.call(e,t);else{e._wheelTimerEnd&&(clearTimeout(e._wheelTimerEnd.timer),e._wheelTimerEnd.wheelEnd(),e._wheelTimerEnd=null);const i=[t.pageX,t.pageY];e._pointer0={start:i,previous:i,current:i,identifier:-1,changed:!0}}}function P(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0]},i=[t.pageX,t.pageY];this._wheelTimerEnd?(this._pointer0&&(this._pointer0.previous=this._pointer0.current,this._pointer0.current=i),clearTimeout(this._wheelTimerEnd.timer)):this._pointer0={start:i,previous:i,current:i,identifier:-1,changed:!0};const n=()=>{this._pointer0=null,this._wheelTimerEnd=null,e.timestamp=Date.now(),e.scale=NaN,this.emit("scale",e)};if(this._wheelTimerEnd={wheelEnd:n,timer:+setTimeout(n,this.wheelDelay),scale:this._wheelTimerEnd?this._wheelTimerEnd.scale:1},this._pointer0){e.pointers=[this._pointer0];const{start:i,previous:n,current:s}=this._pointer0;e.getPoint=t=>"start"===t?i:"previous"===t?n:s;const o=Math.pow(2,-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002));this._wheelTimerEnd.scale*=o,e.moveScale=this._wheelTimerEnd.scale,e.scale=o,this.emit("scale",e)}}class I extends T{constructor(t,e){super(e),this.element=null,this._unbind=null;const i=c(t);if(!i)throw Error("Please pass in a valid element...");if(this.element=i,g()){const t=x.bind(this),e=D.bind(this),n=E.bind(this),s=M.bind(this);i.addEventListener("touchstart",t,!1),i.addEventListener("touchmove",e,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",s,!1),this._unbind=()=>{i.removeEventListener("touchstart",t),i.removeEventListener("touchmove",e),i.removeEventListener("touchend",n),i.removeEventListener("touchcancel",s)}}else{const t=C.bind(this),e=P.bind(this);i.addEventListener("mousedown",t,!1),i.addEventListener("wheel",e,!1),this._unbind=()=>{i.removeEventListener("mousedown",t),i.removeEventListener("wheel",e)}}}destory(){super.off(),this._unbind&&(this._unbind(),this._unbind=null,this.element=null)}}const S="undefined"==typeof window?global:window,k=["moz","webkit"];let A=S.requestAnimationFrame,z=S.cancelAnimationFrame||S.cancelRequestAnimationFrame;if(!A||!z)for(var B=0;2>B;B++)A=S[k[B]+"RequestAnimationFrame"],z=S[k[B]+"CancelAnimationFrame"]||S[k[B]+"CancelRequestAnimationFrame"];A&&z||(A=function(){let t=0;return function(e){const i=Date.now(),n=Math.max(0,16-(i-t));return t=i+n,window.setTimeout(e,n)}}(),z=function(t){return window.clearTimeout(t)});const L=A,F=z,O=(t,e)=>e>0?+setTimeout(t,e):(t(Math.abs(e)),0);class X{constructor({duration:t,easing:e,delay:i}={}){this._delay=0,this._frameId=0,this._elapsed=0,this._sleepId=0,this._delayId=0,this._tick=null,this._delayFn=null,this.duration="number"==typeof t&&t>0?t:0,this.easing="function"!=typeof e?t=>t:e,this.delay="number"!=typeof i?0:i}start(t){if(!this._tick&&!this._delayFn){const{duration:e,easing:i,delay:n}=this;this._delayFn=n=>{if(this._delayId=0,this._delayFn=null,this._delay=0,e>0){const s=n=>{const o=Date.now();this._elapsed+=o-n,e>this._elapsed?(this._frameId=L((()=>s(o))),t(i(this._elapsed/e))):(this._tick=null,this._frameId=0,this._elapsed=0,t(1))};this._tick=s,this._elapsed=n||0,s(Date.now())}else t(1)},this._delay=Date.now(),this._delayId=O(this._delayFn,n)}}restart(){if((this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()),this._delayFn)){const t=this.delay+this._delay;this._delay+=Date.now(),this._delayId=O(this._delayFn,t)}}sleep(t){t&&t>0&&(this._tick||this._delayFn)&&(this.stop(),this._sleepId=+setTimeout((()=>{this._sleepId=0,this.restart()}),t))}stop(){(this._tick||this._delayFn)&&(this._delayId&&(clearTimeout(this._delayId),this._delayId=0,this._delay-=Date.now()),this._frameId&&(F(this._frameId),this._frameId=0),this._sleepId&&(clearTimeout(this._sleepId),this._sleepId=0))}end(){(this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()+this._elapsed-this.duration),this._delayFn&&this._delayFn(this.duration))}}class Y{constructor(t,e,i){const n=this.value="number"==typeof t?{default:t}:t;if("number"==typeof e){const t={};Object.keys(n).forEach((i=>{t[i]=e||0})),this.precision=t}else e&&(this.precision=e);"function"==typeof i&&(this.transform=i)}toRaw(){const t={value:this.value};return this.precision&&(t.precision=this.precision),this.transform&&(t.transform=this.transform),t}}const j=["value","precision"];const H=["value"],N=["before","after","cancel"];let V=class{constructor({cssProperties:t,apply:e}={}){this.cssProperties={},this._cssProperties=null,this._animations=[],this._apply=e||(()=>{}),t&&this.apply(t)}update(){!this.running()&&this._cssProperties&&(this.cssProperties=this._cssProperties,this._cssProperties=null);const{cssProperties:t}=this,e={};Object.keys(t).forEach((i=>{const{value:n,transform:s}=t[i];e[i.replace(/([A-Z])/g,"-$1").toLocaleLowerCase()]=s(n)})),this._apply(e)}value(){const t=this._cssProperties||this.cssProperties,e={};return Object.keys(t).forEach((i=>{e[i]=t[i].value})),e}apply(i,n){this._cssProperties||(this._cssProperties=this.cssProperties);const s=function(e,i){const n=t({},e);if(i instanceof Y){const s=Object.keys(e)[0];if(s){const o=e[s],r=i.toRaw();n[s]=t({},o,r,{value:t({},o.value,r.value)})}}else Object.keys(i).forEach((s=>{const o=e[s],r=i[s].toRaw();n[s]=o?t({},o,r,{value:t({},o.value,r.value)}):t({transform:t=>Object.keys(t).map((e=>t[e])).join(" "),precision:{}},r)}));return n}(this._cssProperties,i),o=function(i,n){const s={};return Object.keys(i).forEach((o=>{const r=i[o].value,a=n[o],{value:l,precision:h}=a,c=e(a,j);let u=null;Object.keys(r).forEach((t=>{const e=l[t]-r[t];Math.abs(e)>(h[t]||0)&&(u||(u={}),u[t]=e)})),u&&(s[o]=t({value:u,precision:h},c))})),s}(this._cssProperties,s);this._cssProperties=s;const r=Object.keys(o),a={};r.forEach((i=>{const n=o[i],{value:s}=n,r=e(n,H);a[i]=t({value:t({},s)},r),this.cssProperties[i]=t({},this.cssProperties[i],r)}));const l=n&&0!==r.length?n:{};return new Promise((t=>{const{before:i=(()=>{}),after:n=(()=>{}),cancel:s=!0}=l,h=e(l,N),c=new X(h);this._animations.push({animation:c,cancel:s,remain:a}),c.start((e=>{const s=i(e,this.value());if(!1!==s){let t=e;"number"==typeof s&&(t=s),r.forEach((e=>{const i=this.cssProperties[e].value,n=o[e].value,s=a[e].value;Object.keys(n).forEach((e=>{const o=n[e]*(1-t);i[e]+=s[e]-o,s[e]=o}))})),this.update()}if(n(e,this.value()),1===e){const e=this._animations.findIndex((t=>c===t.animation));-1!==e&&this._animations.splice(e,1),this.update(),t(this.value())}}))}))}cancel(t=!1){let e=0;return this._animations=this._animations.filter((({animation:i,remain:n,cancel:s})=>{if(s){i[t?"end":"stop"](),e+=1;const s=this._cssProperties;return s&&Object.keys(n).forEach((t=>{if(s[t]){const e=n[t].value,i=s[t].value;Object.keys(e).forEach((t=>{i[t]-=e[t]}))}})),!1}return!0})),this.update(),e}running(){return 0!==this._animations.length}};class W extends V{constructor(e,i){super(t({apply:t=>r(c(e),t)},i||{}))}}const R=t=>1-(1-t)*(1-t),G={cancel:!0,duration:500,easing:t=>1-(1-t)*(1-t)*(1-t)*(1-t)},$=["direction","itemModels","itemSize","enableSwipeClose","transitionEl"],q=["before","after"];class U extends W{constructor(t={}){let{direction:i,itemModels:n,itemSize:s,enableSwipeClose:o,transitionEl:r}=t;super(r||null,e(t,$)),this._direction="horizontal",this._itemModels=[],this._itemSize=0,this._activeIndex=-1,this._enableSwipeClose=!0,this._fgBehavior=0,this._moveTarget="none",this.apply({transform:new Y(0,1,(t=>`translateX(${t.default}px)`))}),this.swipeClose(o),this.direction(i),this.itemSize(s),this.itemModels(n)}activeIndex(){return this._activeIndex}isHorizontal(){return"horizontal"===this._direction}isVertical(){return"vertical"===this._direction}swipeClose(t){return void 0!==t&&(this._enableSwipeClose=t),this._enableSwipeClose}direction(t){if(t){this._direction=t;const e="vertical"===t?"Y":"X";this.apply(new Y(0,1,(t=>`translate${e}(${t.default}px)`)))}return this._direction}itemSize(t){return void 0!==t&&(this._itemSize=t,this.apply(new Y(-this.activeIndex()*t))),this._itemSize}itemModels(t,e){return void 0===t?this._itemModels:"number"==typeof t?this._itemModels[t]:Array.isArray(t)?(this._itemModels=t,t):(this._itemModels[e||0]=t,t)}currentItem(){return this.itemModels(this.activeIndex())}countItems(){return this.itemModels().length}slide(i,n={}){const{before:s,after:o}=n,r=e(n,q),a=Math.max(Math.min(i,this.countItems()-1),0),l=this.activeIndex()!==a;l&&(this._activeIndex=a,null==s||s(a));const h=-a*this.itemSize();return this.apply(new Y(h),t({},G,r)).then((()=>(l&&(null==o||o(a)),a)))}next(t){return this.slide(this._activeIndex+1,t)}prev(t){return this.slide(this._activeIndex-1,t)}}const Z=Math.PI/180,J={multiply:function(t,e,i){const n=e[0],s=e[4],o=e[8],r=e[12],a=e[1],l=e[5],h=e[9],c=e[13],u=e[2],p=e[6],d=e[10],m=e[14],f=e[3],g=e[7],_=e[11],v=e[15],y=i[0],w=i[1],b=i[2],T=i[3],x=i[4],D=i[5],E=i[6],M=i[7],C=i[8],P=i[9],I=i[10],S=i[11],k=i[12],A=i[13],z=i[14],B=i[15];t[0]=n*y+s*x+o*C+r*k,t[4]=n*w+s*D+o*P+r*A,t[8]=n*b+s*E+o*I+r*z,t[12]=n*T+s*M+o*S+r*B,t[1]=a*y+l*x+h*C+c*k,t[5]=a*w+l*D+h*P+c*A,t[9]=a*b+l*E+h*I+c*z,t[13]=a*T+l*M+h*S+c*B,t[2]=u*y+p*x+d*C+m*k,t[6]=u*w+p*D+d*P+m*A,t[10]=u*b+p*E+d*I+m*z,t[14]=u*T+p*M+d*S+m*B,t[3]=f*y+g*x+_*C+v*k,t[7]=f*w+g*D+_*P+v*A,t[11]=f*b+g*E+_*I+v*z,t[15]=f*T+g*M+_*S+v*B},identity:function(t){for(let e=0;16>e;e++)t[e]=0;for(let e=0;16>e;e+=5)t[e]=1},translate:function(t,e,i,n){for(let s=0;4>s;s++)t[12+s]+=t[s]*e+t[4+s]*i+t[8+s]*n},scale:function(t,e,i,n){for(let s=0;4>s;s++)t[s]*=e,t[4+s]*=i,t[8+s]*=n},rotate:function(t,e,i,n,s){const o=new Float32Array(16);o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1;const r=e*Z,a=Math.sin(r),l=Math.cos(r);if(1===i&&0===n&&0===s)o[5]=l,o[10]=l,o[6]=a,o[9]=-a,o[1]=0,o[2]=0,o[4]=0,o[8]=0,o[0]=1;else if(0===i&&0===n&&0===s)o[0]=l,o[10]=l,o[8]=a,o[2]=-a,o[1]=0,o[4]=0,o[6]=0,o[9]=0,o[5]=1;else if(0===i&&0===n&&1===s)o[0]=l,o[5]=l,o[1]=a,o[4]=-a,o[2]=0,o[6]=0,o[8]=0,o[9]=0,o[10]=1;else{const t=Math.sqrt(i*i+n*n+s*s);if(1!==t){const e=1/t;i*=e,n*=e,s*=e}const e=1-l,r=i*n,h=n*s,c=s*i,u=i*a,p=n*a,d=s*a;o[0]=i*i*e+l,o[4]=r*e-d,o[8]=c*e+p,o[1]=r*e+d,o[5]=n*n*e+l,o[9]=h*e-u,o[2]=c*e-p,o[6]=h*e+u,o[10]=s*s*e+l}J.multiply(t,t,o)},rotateEuler:function(t,e,i,n){const s=new Float32Array(16),o=e*Z,r=i*Z,a=n*Z,l=Math.cos(o),h=Math.sin(o),c=Math.cos(r),u=Math.sin(r),p=Math.cos(a),d=Math.sin(a),m=l*u,f=h*u;s[0]=c*p,s[1]=-c*d,s[2]=u,s[3]=0,s[4]=m*p+l*d,s[5]=-m*d+l*p,s[6]=-h*c,s[7]=0,s[8]=-f*p+h*d,s[9]=f*d+h*p,s[10]=l*c,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,J.multiply(t,t,s)},perspective:function(t,e,i,n,s){const o=1/Math.tan(e*(Math.PI/360)),r=1/(n-s);t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+n)*r,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*n*r,t[15]=0}};class K{constructor(t={}){"number"==typeof t.a&&(this.a=t.a),"number"==typeof t.k&&(this.k=t.k),"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y)}static identity(){return new K({a:0,k:1,x:0,y:0})}toRaw(){const t={};return"number"==typeof this.a&&(t.a=this.a),"number"==typeof this.k&&(t.k=this.k),"number"==typeof this.x&&(t.x=this.x),"number"==typeof this.y&&(t.y=this.y),t}toString(){const{a:t=0,k:e=1,x:i=0,y:n=0}=this,s=new Float32Array(16);return J.identity(s),J.translate(s,i,n,0),J.scale(s,e,e,e),J.rotate(s,-t,0,0,1),`matrix3d(${Array.prototype.slice.call(s).join(",")})`}}function Q(t,e,i,n=!1){return 1>t||1>e||n&&t>e||0>=i||i>1?t:n?Math.pow((e-1)*t/(e-t),1/i):e/(1+(e-1)/Math.pow(t,i))}function tt(t,e={}){if(0===t)return 0;const{max:i=9999,mode:n=0,expo:s=.88}=e;let o=Math.abs(t);return o=1>o?1===n?1/Q(1/o,i,s):Q(o+1,i,s)-1:Q(o,i,s),o*(t>0?1:-1)}function et(t,e={}){if(0===t)return 0;const{max:i=9999,mode:n=0,expo:s=.88}=e;let o=Math.abs(t);return o=1>o?1===n?1/Q(1/o,i,s,!0):Q(o+1,i,s,!0)-1:Q(o,i,s,!0),o*(t>0?1:-1)}function it(t,e,i){return t>(1-e)/(2*e)?(1+e-2*i)/(2*e)>t?(t-(1-i)/(2*e))/(1-i/e):.5:-.5}function nt(t,...e){return"function"==typeof t?t(...e):t}function st(t,[e,i]){return t>=e&&i>=t}function ot(t,[e,i],n){return Math.max(Math.min(t,i),e)}const rt=["sizePosition","dblAdjust","dblScale","damping","rotation","scalation","translation","transitionEl"];class at extends W{constructor(t={}){let{sizePosition:i,dblAdjust:n,dblScale:s,damping:o,rotation:r,scalation:a,translation:l,transitionEl:h}=t;super(h||null,e(t,rt)),this._dblAdjust=!0,this._dblScale=0,this._damping=[],this._rotation=[],this._scalation=[],this._translation=[],this._sizePosition={containerCenter:[0,0],containerWidth:0,containerHeight:0,naturalWidth:0,naturalHeight:0,elementWidth:0,elementHeight:0},this.apply({transform:new Y({a:0,k:1,x:0,y:0},{a:.001,k:.001,x:1,y:1},(t=>""+new K(t)))}),this.sizePosition(i),this.setDblAdjust(n),this.setDamping(o),this.setDblScale(s),this.setRotation(r),this.setScalation(a),this.setTranslation(l)}reset(e=0){const i=ot(0,this.getRotation()),n=ot(1,this.getScalation()),s=ot(0,this.getXTranslation(n)),o=ot(0,this.getYTranslation(n));this.apply(new Y({a:i,k:n,x:s,y:o}),t({},G,{duration:e}))}sizePosition(t){if(t){const{containerCenter:e,containerWidth:i,containerHeight:n,naturalWidth:s,naturalHeight:o}=t,r=s/o;let a=s;a=i/n>r?1/2.2>r?Math.min(i,s):n*r:i;this._sizePosition={containerCenter:e,containerWidth:i,containerHeight:n,naturalWidth:s,naturalHeight:o,elementWidth:a||0,elementHeight:a/r||0},this.reset()}return this._sizePosition}setRotation(t){this._rotation=!t||"number"!=typeof t[0]||"number"!=typeof t[1]||t[0]>t[1]?()=>[0,0]:t}getRotation(){return nt(this._rotation)}setScalation(t){this._scalation=t&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[1]>=t[0]&&t[0]>0?t:()=>[1,2*this.getDblScale()]}getScalation(){return nt(this._scalation)}setTranslation(t){this.setXTranslation(t&&t[0]),this.setYTranslation(t&&t[1])}getTranslation(t){return[this.getXTranslation(t),this.getYTranslation()]}setXTranslation(t){this._translation[0]=!t||"number"!=typeof t[0]||"number"!=typeof t[1]||t[0]>t[1]?t=>{const{containerWidth:e,elementWidth:i}=this.sizePosition(),n=Math.max((i*t-e)/2,0);return[-n,n]}:t}getXTranslation(t){return nt(this._translation[0],t||this.value().transform.k||1)}setYTranslation(t){this._translation[1]=!t||"number"!=typeof t[0]||"number"!=typeof t[1]||t[0]>t[1]?t=>{const{containerHeight:e,elementHeight:i}=this.sizePosition(),n=Math.max((i*t-e)/2,0);return[-n,n]}:t}getYTranslation(t){return nt(this._translation[1],t||this.value().transform.k||1)}setDblScale(t){this._dblScale="number"==typeof t&&t>0?t:()=>{const{containerWidth:t,containerHeight:e,naturalWidth:i,naturalHeight:n,elementWidth:s,elementHeight:o}=this.sizePosition();return Math.max(2,Math.max(t/s,e/o),Math.min(i/t,n/e))||1}}getDblScale(){return nt(this._dblScale)}setDblAdjust(t=!0){this._dblAdjust=t}getDblAdjust(){return this._dblAdjust}isDamping(t){var e;return-1!==(null==(e=this._damping)?void 0:e.indexOf(t))}setDamping(t){this._damping=t||["scale","translate"]}rotate(t){return this.transform(new K({a:t}))}rotateTo(t){return this.transformTo(new K({a:t}))}scale(t,e){return this.transform(new K({k:t}),e)}scaleTo(t,e){return this.transformTo(new K({k:t}),e)}translate(t,e){return this.transform(new K({x:t,y:e}))}translateTo(t,e){return this.transformTo(new K({x:t,y:e}))}translateX(t){return this.transform(new K({x:t}))}translateXTo(t){return this.transformTo(new K({x:t}))}translateY(t){return this.transform(new K({y:t}))}translateYTo(t){return this.transformTo(new K({y:t}))}transform(t,e,i){const n=this.value().transform;let{a:s,k:o,x:r,y:a}=t;return"number"==typeof s&&(s+=n.a||0),"number"==typeof o&&(o*=n.k||1),"number"==typeof r&&(r+=n.x||0),"number"==typeof a&&(a+=n.y||0),this.transformTo(new K({a:s,k:o,x:r,y:a}),e,i)}transformTo(e,i,n){let s=i,o=n;n||Array.isArray(i)||(o=i,s=void 0);const{a:r,k:a,x:l,y:h}=e,c=new K;if("number"==typeof r&&(c.a=ot(r,this.getRotation())),"number"==typeof a){const t=c.k=ot(a,this.getScalation());if(Array.isArray(s)){const[e,i]=this.computeOffset(s,t),n=this.value().transform;c.x=ot(("number"==typeof l?l:n.x)+e,this.getXTranslation(t)),c.y=ot(("number"==typeof h?h:n.y)+i,this.getYTranslation(t))}else"number"==typeof l&&(c.x=ot(l,this.getXTranslation(t))),"number"==typeof h&&(c.y=ot(h,this.getYTranslation(t)))}else"number"==typeof l&&(c.x=ot(l,this.getXTranslation())),"number"==typeof h&&(c.y=ot(h,this.getYTranslation()));return this.apply(new Y(c.toRaw()),t({},G,o))}computeOffset(t,e,i=!1){const{containerCenter:n,containerWidth:s,containerHeight:o,elementWidth:r,elementHeight:a}=this.sizePosition(),l=this.value().transform,h=e/l.k,[c,u]=n;let p=("number"==typeof t[0]?t[0]:c)-(c+l.x),d=("number"==typeof t[1]?t[1]:u)-(u+l.y);if(i){const t=s/1,e=o/1,i=r/l.k,n=a/l.k;p=ot(i-(t-i)/(h-1),[0,i])*it(p/i,h,ot(t/i,[1,2]))||0,d=ot(n-(e-n)/(h-1),[0,n])*it(d/n,h,ot(e/n,[1,2]))||0}return p*=1-h,d*=1-h,[p,d]}moveBounce(t,e,i,n,s=[]){let{a:o,k:r,x:a,y:l}=this.value().transform;const h=this.getRotation();if(this.isDamping("rotate")){let e=ot(o,h);o=e+et(o-e,{max:180}),e=ot(o+=t,h),o=e+tt(o-e,{max:180})}else o=ot(o+=t,h);const c=this.getScalation();if(this.isDamping("scale")){let t=ot(r,c);r=t*et(r/t,{max:2,mode:1}),t=ot(r*=e,c),r=t*tt(r/t,{max:2,mode:1})}else r=ot(r*=e,c);const[u,p]=this.computeOffset(s,r);if(this.isDamping("scale")){const{containerWidth:t,containerHeight:e}=this.sizePosition();let s=ot(a,this.getXTranslation());a=s+et(a-s,{max:t}),s=ot(a+=u+i,this.getXTranslation(r)),a=s+tt(a-s,{max:t});let o=ot(l,this.getYTranslation());l=o+et(l-o,{max:e}),o=ot(l+=p+n,this.getYTranslation(r)),l=o+tt(l-o,{max:e})}else a=ot(a+=u+i,this.getXTranslation(r)),l=ot(l+=p+n,this.getYTranslation(r));this.apply(new Y({a:o,k:r,x:a,y:l}))}resetBounce(t=[],e=!1){let{a:i,k:n,x:s,y:o}=this.value().transform;if(this.isDamping("rotate")){const t=ot(i,this.getRotation());i=t+et(i-t,{max:180})}if(this.isDamping("scale")){const t=ot(n,this.getScalation());n=t*et(n/t,{max:2,mode:1})}if(this.isDamping("translate")){const{containerWidth:t,containerHeight:e}=this.sizePosition(),i=ot(s,this.getXTranslation());s=i+et(s-i,{max:t});const n=ot(o,this.getYTranslation());o=n+et(o-n,{max:e})}this.transformTo(new K({a:i,k:n,x:s,y:o}),t,{cancel:e})}dblScale(t=[]){const e=this.value().transform.k||1,i=ot(this.getDblScale(),this.getScalation()),n=ot(1,this.getScalation());if(i>n&&n>=e||n>i&&e>=n)if(this.getDblAdjust()){const[e,n]=this.computeOffset(t,i,this.getDblAdjust()),s=this.value().transform;this.transformTo(new K({a:0,k:i,x:s.x+e,y:s.y+n}),{cancel:!1})}else this.transformTo(new K({k:i}),t,{cancel:!1});else this.getDblAdjust()?this.transformTo(new K({a:0,k:n,x:0,y:0}),{cancel:!1}):this.transformTo(new K({k:n}),t,{cancel:!1})}swipeBounce(e,i,n,s){const o=this.sizePosition()["x"===n?"containerWidth":"containerHeight"],r=1.2*this.getDblScale(),a=this.value().transform[n]||0,l=this.getTranslation()["x"===n?0:1],h=i>0?1:-1,c=Math.max(1,Math.min(Math.abs(i),r*o))*h,u=Math.max(800,Math.min(2500,e));if(st(a+c,l))"function"==typeof s?s(n,c,0,(()=>({duration:u,easing:R}))):this.apply(new Y({[n]:a+c}),t({},G,{easing:R,duration:u}));else{const e=ot(a+c,l)-a;let i=0;if(this.isDamping("translate")){const t=(st(a,l)?Math.sqrt(1-Math.abs(e/c)):1)*(2*Math.abs(c)/u);i=Math.min(30*t,o/4)*h}if("function"==typeof s)s(n,e,i,(t=>({duration:(1-Math.sqrt(1-Math.abs(t/c)))*u,easing:R})));else{const s=Math.max((e+i)*h,0)*h,o=1-Math.sqrt(1-Math.abs(s/c));0===s?this.apply(new Y({[n]:ot(a+s,l)}),t({},G)):this.apply(new Y({[n]:a+s}),t({},G,{duration:o*u,easing:R})).then((()=>{this.apply(new Y({[n]:ot(a+s,l)}),t({},G))}))}}}}const lt=function(t,e){return new Promise(((i,n)=>{const s=new Image,o=()=>{s.onload=null,s.onprogress=null,s.onerror=null};s.onload=()=>{i(s),o()},s.onerror=t=>{n(t),o()},"function"==typeof e&&(s.onprogress=t=>e(t.loaded/t.total)),s.src=t}))};function ht(t,e){return"function"==typeof e?function(t,e){return new Promise(((i,n)=>{const s=new XMLHttpRequest;s.onprogress=t=>{t.lengthComputable&&"function"==typeof e&&e(t)},s.onloadend=t=>{s.status>=200&&300>s.status||304===s.status?i(URL.createObjectURL(s.response)):n(t)},s.open("GET",t),s.responseType="blob",s.send()}))}(t,(t=>e(t.loaded/t.total))).then((t=>lt(t).then((e=>(URL.revokeObjectURL(t),e))))).catch((()=>lt(t))):lt(t)}let ct=class extends at{constructor({container:t,style:e,className:i,src:n="",viewBox:s,loading:o,error:r,active:a=!0}){let l=null;super({transitionEl:()=>null==l?void 0:l(),rotation:g()?void 0:[-Number.MAX_VALUE,Number.MAX_VALUE],scalation:g()?void 0:[.1,10]}),this._viewBox=null,this._src="",this._active=!1,this._wrapper=u({className:["preview-image__image__wrapper",i||""],style:e},null,t),this._loading=o||null,this._error=r||null,this.setViewBox(s),this.setSrc(n),this.setActive(a),l=()=>this.getImageElement()}getElement(){return this._wrapper}getImageElement(){return this._image||null}setActive(t=!0){this._active=t,this.load()}setSrc(t){this._src=t||"",this._image=void 0;const e=this.getElement();if(e){e.innerHTML="";const t=this._loading;!1!==t&&e.appendChild(c(t)||u("span",{className:"preview-image__image__loading",style:{background:"url(data:image/svg+xml,%3Csvg%20width%3D%22100%25%22%20height%3D%22100%25%22%20viewBox%3D%220%200%2080%2080%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%3Cdefs%3E%20%20%20%20%3ClinearGradient%20%20%20%20%20%20x1%3D%2294.0869141%25%22%20%20%20%20%20%20y1%3D%220%25%22%20%20%20%20%20%20x2%3D%2294.0869141%25%22%20%20%20%20%20%20y2%3D%2290.559082%25%22%20%20%20%20%20%20id%3D%22linearGradient-1%22%20%20%20%20%3E%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23fff%22%20stop-opacity%3D%220%22%20offset%3D%220%25%22%20%2F%3E%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23fff%22%20stop-opacity%3D%220.3%22%20offset%3D%22100%25%22%20%2F%3E%20%20%20%20%3C%2FlinearGradient%3E%20%20%20%20%3ClinearGradient%20%20%20%20%20%20x1%3D%22100%25%22%20%20%20%20%20%20y1%3D%228.67370605%25%22%20%20%20%20%20%20x2%3D%22100%25%22%20%20%20%20%20%20y2%3D%2290.6286621%25%22%20%20%20%20%20%20id%3D%22linearGradient-2%22%20%20%20%20%3E%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23fff%22%20offset%3D%220%25%22%20%2F%3E%20%20%20%20%20%20%3Cstop%20stop-color%3D%22%23fff%22%20stop-opacity%3D%220.3%22%20offset%3D%22100%25%22%20%2F%3E%20%20%20%20%3C%2FlinearGradient%3E%20%20%3C%2Fdefs%3E%20%20%3Cg%20%20%20%20stroke%3D%22none%22%20%20%20%20stroke-width%3D%221%22%20%20%20%20fill%3D%22none%22%20%20%20%20fill-rule%3D%22evenodd%22%20%20%20%20opacity%3D%220.9%22%20%20%3E%20%20%20%20%3Cg%3E%20%20%20%20%20%20%3Cpath%20%20%20%20%20%20%20%20d%3D%22M40%2C0%20C62.09139%2C0%2080%2C17.90861%2080%2C40%20C80%2C62.09139%2062.09139%2C80%2040%2C80%20L40%2C73%20C58.2253967%2C73%2073%2C58.2253967%2073%2C40%20C73%2C21.7746033%2058.2253967%2C7%2040%2C7%20L40%2C0%20Z%22%20%20%20%20%20%20%20%20fill%3D%22url%28%23linearGradient-1%29%22%20%20%20%20%20%20%2F%3E%20%20%20%20%20%20%3Cpath%20%20%20%20%20%20%20%20d%3D%22M40%2C0%20L40%2C7%20C21.7746033%2C7%207%2C21.7746033%207%2C40%20C7%2C58.2253967%2021.7746033%2C73%2040%2C73%20L40%2C80%20C17.90861%2C80%200%2C62.09139%200%2C40%20C0%2C17.90861%2017.90861%2C0%2040%2C0%20Z%22%20%20%20%20%20%20%20%20fill%3D%22url%28%23linearGradient-2%29%22%20%20%20%20%20%20%2F%3E%20%20%20%20%20%20%3Ccircle%20id%3D%22Oval%22%20fill%3D%22%23fff%22%20cx%3D%2240.5%22%20cy%3D%223.5%22%20r%3D%223.5%22%20%2F%3E%20%20%20%20%3C%2Fg%3E%20%20%20%20%3CanimateTransform%20%20%20%20%20%20attributeName%3D%22transform%22%20%20%20%20%20%20begin%3D%220s%22%20%20%20%20%20%20dur%3D%221s%22%20%20%20%20%20%20type%3D%22rotate%22%20%20%20%20%20%20values%3D%220%2040%2040%3B360%2040%2040%22%20%20%20%20%20%20repeatCount%3D%22indefinite%22%20%20%20%20%2F%3E%20%20%3C%2Fg%3E%3C%2Fsvg%3E)"}})),this._active&&this.load()}}setViewBox(t){this._viewBox=t||null,this.resize()}load(){const t=this.getElement();t&&void 0===this._image&&(this._image=null,ht(this._src).then((e=>{this._image=e,this.resize(),t.innerHTML="",t.appendChild(e)})).catch((()=>{this._image=null,t.innerHTML="";const e=this._error;!1!==e&&t.appendChild(c(e)||u({className:"preview-image__image__error"},[u("span",{style:{background:"url(data:image/svg+xml,%3Csvg%20width%3D%22100%25%22%20height%3D%22100%25%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23fff%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%3Cpath%20%20%20%20d%3D%22M12%2022C6.477%2022%202%2017.523%202%2012S6.477%202%2012%202s10%204.477%2010%2010-4.477%2010-10%2010zm-.763-15.864l.11%207.596h1.305l.11-7.596h-1.525zm.759%2010.967c.512%200%20.902-.383.902-.882%200-.5-.39-.882-.902-.882a.878.878%200%2000-.896.882c0%20.499.396.882.896.882z%22%20%2F%3E%3C%2Fsvg%3E)"}}),u("span",{},"图片加载失败")]))})))}resize(){const t=this._image;if(t){const e=t.naturalWidth,i=t.naturalHeight,{left:n=0,top:s=0,width:o=0,height:r=0}=this._viewBox||{},{elementWidth:a,elementHeight:l}=super.sizePosition({containerCenter:[n+o/2,s+r/2],containerWidth:o,containerHeight:r,naturalWidth:e,naturalHeight:i});t.width=a,t.height=l}}destory(){this._wrapper=null,this._image=void 0,this._viewBox=null,this._loading=null,this._error=null}};function ut(t){if(g())return;const e=this.currentItem();if(this.running()||null!=e&&e.running())return;const i=-this.activeIndex()*this.itemSize();if(0===Math.round(this.value().transform.default-i)){const{angle:i=0}=t;isNaN(i)?null==e||e.resetBounce():null==e||e.moveBounce(i,1,0,0)}}function pt(t){if(g())return;const e=this.currentItem();if(this.running()||null!=e&&e.running())return;const i=-this.activeIndex()*this.itemSize();if(0===Math.round(this.value().transform.default-i)){const{scale:i=1}=t;isNaN(i)?null==e||e.resetBounce():null==e||e.moveBounce(0,i,0,0)}}function dt(t,{popupMenu:e}){const i=this.currentItem();this.running()||null!=i&&i.running()||null==e||e(t)}function mt(t,{internalClose:e}){const i=this.currentItem();this.running()||null!=i&&i.running()||null==e||e(t)}function ft(e,{internalClose:i,slideBefore:n,slideAfter:s}){const o=this.currentItem();if(this.running()||null!=o&&o.running())return;const{direction:r}=e,a="Right"===r&&this.isHorizontal()||"Down"===r&&this.isVertical(),l=-this.activeIndex()*this.itemSize(),h=this.value().transform.default-l,c=(a&&0>h||!a&&h>0)&&0!==Math.round(h)?-h:0;if("inside"===this._moveTarget){if(o){const{velocity:i=0,swipeComputed:n}=e;if(i>0&&n){const e=this,i=(i,n,s,r)=>{if(0!==n){const{duration:a,easing:h}=r(n+s);0!==s?Promise.all([0!==c?e.apply(new Y(l),t({},G,{duration:a,easing:h,before:t=>Math.min(Math.abs(c+n+s)*t/Math.abs(c),1)})):Promise.resolve(),o.apply(new Y({[i]:(o.value().transform[i]||0)+n}),t({},G,{duration:a,easing:h,before:t=>Math.min(Math.max((Math.abs(c+n+s)*t-Math.abs(c))/Math.abs(n),0),1)})),e.apply(new Y(l+s),t({},G,{duration:a,easing:h,before:t=>Math.max((Math.abs(c+n+s)*t-Math.abs(c)-Math.abs(n))/Math.abs(s),0)}))]).then((()=>{e.apply(new Y(l),t({},G))})):(0!==c&&e.apply(new Y(l),t({},G,{duration:a,easing:h,before:t=>Math.min(Math.abs(c+n)*t/Math.abs(c),1)})),o.apply(new Y({[i]:(o.value().transform[i]||0)+n}),t({},G,{duration:a,easing:h,before:t=>Math.max((Math.abs(c+n)*t-Math.abs(c))/Math.abs(n),0)})))}else{const i=h>0?1:-1,n=Math.max((s-h)*i,0)*i,{duration:o,easing:a}=r(n);0===n?e.apply(new Y(l),t({},G)):e.apply(new Y(l+h+n),t({},G,{duration:o,easing:a})).then((()=>{e.apply(new Y(l),t({},G))}))}},{duration:s,stretchX:r,stretchY:a}=n(.003);if(this.isVertical()){const t=o.getXTranslation();0===t[0]&&0===t[1]||o.swipeBounce(s,r,"x"),o.swipeBounce(s,a-c,"y",i)}else{o.swipeBounce(s,r-c,"x",i);const t=o.getYTranslation();0===t[0]&&0===t[1]||o.swipeBounce(s,a,"y")}}}else this.slide(this.activeIndex(),{before:n,after:s});return}if("closures"===this._moveTarget){const t="Down"===r&&this.isHorizontal()||"Right"===r&&this.isVertical();return void(this.swipeClose()&&t&&null!=i&&i(e)&&(this._moveTarget="none"))}const u=this.itemSize(),p=0===u?0:-this.value().transform.default/u;this.slide(Math[a?"floor":"ceil"](p),{before:n,after:s})}function gt(t){const e=this.currentItem();if(this.running()||null!=e&&e.running())return;const i=-this.activeIndex()*this.itemSize();0===Math.round(this.value().transform.default-i)&&(null==e||e.dblScale(t.getPoint()))}const _t=["x","y"];function vt(i,{preventAllTap:n}){0===this._fgBehavior&&i.pointers.length>1&&(this._fgBehavior=2);let s=0;s+=this.cancel();const o=this.currentItem();if(s+=(null==o?void 0:o.cancel())||0,s>0){if(o){const i=o.value().transform,{x:n=0,y:s=0}=i,r=e(i,_t),[a,l]=o.getTranslation(),h=0===this.activeIndex(),c=this.activeIndex()===this.countItems()-1;this.isVertical()?st(n,a)||(s>l[0]||c)&&(l[1]>s||h)||o.apply(new Y(t({x:ot(n,a),y:s},r))):st(s,l)||(n>a[0]||c)&&(a[1]>n||h)||o.apply(new Y(t({x:n,y:ot(s,l)},r)))}null==n||n()}}const yt=(t,[e,i],[n,s])=>t?Math.abs(e-n)>4*Math.abs(i-s)&&0>=e-n:Math.abs(i-s)>4*Math.abs(e-n)&&0>=i-s;function wt(t,{openStyleChange:e}){0===this._fgBehavior&&1===t.pointers.length&&(this._fgBehavior=1);const i=this.currentItem();if(this.running()||null!=i&&i.running())return;const n=1===t.pointers.length||1===this._fgBehavior,s={max:this.itemSize()},{getPoint:o,direction:r,angle:a=0,scale:l=1,deltaX:h=0,deltaY:c=0,moveX:u=0,moveY:p=0}=t,d=o();if("none"===this._moveTarget){const t=o("previous");if(i){if(this._moveTarget="inside",n){const e=0===this.activeIndex(),n=this.activeIndex()===this.countItems()-1,s=yt(this.isVertical(),t,d),{x:o=0,y:a=0}=i.value().transform,[l,u]=i.getTranslation();if(this.isVertical())if(this.swipeClose()&&o>=l[1]&&s)this._moveTarget="closures";else{const t=0===l[0]&&0===l[1];(u[0]>=a&&(t?0>c:"Up"===r)&&!n||a>=u[1]&&(t?c>0:"Down"===r)&&!e)&&(this._moveTarget="outside")}else if(this.swipeClose()&&a>=u[1]&&s)this._moveTarget="closures";else{const t=0===u[0]&&0===u[1];(l[0]>=o&&(t?0>h:"Left"===r)&&!n||o>=l[1]&&(t?h>0:"Right"===r)&&!e)&&(this._moveTarget="outside")}}}else this._moveTarget=this.swipeClose()&&yt(this.isVertical(),t,d)?"closures":"outside"}if("inside"===this._moveTarget){if(i){const t=-this.activeIndex()*this.itemSize(),e=et(this.value().transform.default-t,s);let o=h,r=c;if(this.isVertical()?r+=e:o+=e,n){const{x:e=0,y:n=0}=i.value().transform,[a,l]=i.getTranslation();let h=0;if(this.isVertical()){h=r,o=0===a[0]&&0===a[1]?0:o,r=ot(r+n,l)-n,h-=r}else{const t=0===l[0]&&0===l[1];h=o,o=ot(o+e,a)-e,r=t?0:r,h-=o}i.moveBounce(0,1,o,r,d),this.apply(new Y(t+tt(h,s)))}else i.moveBounce(a,l,o,r,d),0!==e&&this.apply(new Y(t))}return}if("closures"===this._moveTarget)return void(null==e||e(((t,e)=>{const{width:i=0,height:n=0,left:s=0,top:o=0}=e,r=Math.min(Math.max(1-((this.isVertical()?u/i:p/n)||0),.3),1),a=.01+.99*(r-.3)/.7,{k:l=1,x:m=0,y:f=0}=t;return{o:a,k:r,x:m+h+(d[0]-(m+s+i/2))*(1-r/l),y:f+c+(d[1]-(f+o+n/2))*(1-r/l)}})));const m=[(1-this.countItems())*this.itemSize(),0];let f=ot(this.value().transform.default,m),g=f+et(this.value().transform.default-f,s);f=ot(g+=this.isVertical()?c:h,m),g=f+tt(g-f,s),this.apply(new Y(g))}function bt(t,{openStyleChange:e,slideBefore:i,slideAfter:n}){const s=this._moveTarget,o=1===t.leavePointers.length||1===this._fgBehavior;if(0===t.pointers.length)this._fgBehavior=0,this._moveTarget="none";else if(1===this._fgBehavior){if(!this.running()&&"outside"===s){const t=this.itemSize(),e=0===t?0:-this.value().transform.default/t;this.slide(Math.round(e),{before:i,after:n})}return}const r=this.currentItem();if(this.running()||null!=r&&r.running())return;if("closures"===s)return void(null==e||e((()=>({o:1,k:1,x:0,y:0,t:300}))));null==r||r.resetBounce(t.getPoint(),o);let a=this.activeIndex();if("outside"===s){const t=this.itemSize();a=Math.round(0===t?0:-this.value().transform.default/t)}this.slide(a,{before:i,after:n})}class Tt extends U{constructor({container:e,style:i,className:n,backdropStyle:s,backdropClassName:o,wrapperStyle:r,wrapperClassName:p,indicatorStyle:d,indicatorClassName:m,current:f=0,imageUrls:g=[],direction:_="horizontal",itemGap:v=20,isLazy:y=!0,hasIndicator:w=!0,destroyOnClose:b=!1,enableSwipeClose:T=!0,loading:x,error:D,originBox:E,onPopupMenu:M,onChange:C,onAfterChange:P,onClose:S,onAfterClose:k,onAfterOpenChange:A}){let z=null;super({transitionEl:()=>null==z?void 0:z()}),this._openStyle=null,this._originBox=null,this._viewBox=null,this._overflow="",this._destoryOnClose=!1,this._itemGap=0;const B=g.length,L=f&&f>=0&&B>f?f:0,F=this._container=u({className:["preview-image__gallery__container","preview-image__gallery__container-"+_,n||""],style:i},null,c(e)||document.body),O=this._backdrop=u({className:["preview-image__gallery__backdrop",o||""],style:t({backgroundColor:"#000f"},s||{})},null,F),X=this._wrapper=u({className:["preview-image__gallery__wrapper",p||""],style:r},null,F),Y=this._indicator=w&&B>1?u({className:["preview-image__gallery__indicator",m||""],style:d},null,F):null,j=[];g.forEach(((t,e)=>{Y&&j.push(u("span",{className:["preview-image__gallery__indicator-item",L===e?"active":""]},null,Y));const i=new ct({container:X,src:t,active:!y||L===e,loading:x,error:D});super.itemModels(i,e)})),this.setOriginBox(E),this.setDestoryOnClose(b),this.setItemGap(v),this.setDirection(_),this.enableSwipeClose(T),this.slide(L,{duration:0,before:C,after:P});const H=new I(F),N=(t,e)=>{t.call(this,e,{preventAllTap:()=>{H.preventAllTap()},popupMenu:t=>{null==M||M(t)},internalClose:t=>{if("function"==typeof S)return S(t),!0},openStyleChange:t=>{this.openStyle(t(this._openStyle||{},this._viewBox||{}))},slideBefore:t=>{super.itemModels().forEach(((e,i)=>{e.setActive(t===i);const n=j[i];i!==t&&a(n,"active")&&h(n,"active"),i!==t||a(n,"active")||l(n,"active")})),null==C||C(t)},slideAfter:t=>null==P?void 0:P(t)})};H.on("pointerStart",(t=>N(vt,t))),H.on("pointerMove",(t=>N(wt,t))),H.on("pointerEnd",(t=>N(bt,t))),H.on("doubleTap",(t=>N(gt,t))),H.on("singleTap",(t=>N(mt,t))),H.on("longTap",(t=>N(dt,t))),H.on("rotate",(t=>N(ut,t))),H.on("scale",(t=>N(pt,t))),H.on("swipe",(t=>N(ft,t)));const V=t=>{if(t.target===O&&"opacity"===t.propertyName){const{o:t,k:e,x:i,y:n,end:s,open:o=!1}=this._openStyle||{};s&&(o||null==k||k(),null==A||A(o)),this.openStyle({o:t,k:e,x:i,y:n}),null==s||s()}};O.addEventListener("transitionend",V);const W=t=>{t.preventDefault(),t.stopPropagation()},R=()=>this.updateViewBox();window.addEventListener("resize",R),window.addEventListener("contextmenu",W),this._unbind=()=>{H.destory(),O.removeEventListener("transitionend",V),window.removeEventListener("resize",R),window.removeEventListener("contextmenu",W)},z=()=>X}updateViewBox(){const t=this._viewBox=p(this._container);super.itemModels().forEach((e=>e.setViewBox(t))),this.updateImageSize()}updateImageGap(){super.itemModels().forEach(((t,e)=>r(t.getElement(),{marginTop:this.isVertical()&&0!==e?this._itemGap:0,marginLeft:this.isVertical()||0===e?0:this._itemGap})))}updateImageSize(){let{width:t=0,height:e=0}=this._viewBox||{},i=this.isVertical()?e:t;i=i?i+this._itemGap:0,super.itemSize(i);i=i*this.countItems()-this._itemGap,this.isVertical()?e=i:t=i,r(this._wrapper,{width:t,height:e})}setDestoryOnClose(t){this._destoryOnClose=t||!1}setOriginBox(t){this._originBox=t||null}setItemGap(t){this._itemGap=t||0,this.updateImageGap(),this.updateImageSize()}setDirection(t){const e=t||"horizontal";l(h(this._container,"preview-image__gallery__container-"+super.direction()),"preview-image__gallery__container-"+e),super.direction(e),this.updateImageGap(),this.updateImageSize()}currentItem(t=!0){const e=super.currentItem();return!t||null!=e&&e.getImageElement()?e:null}enableSwipeClose(t){super.swipeClose(t||!1)}destory(){var t,e;null==(t=this._unbind)||t.call(this),null==(e=this._container)||null==(e=e.parentNode)||e.removeChild(this._container),super.itemModels([]),this._indicator=null,this._backdrop=null,this._wrapper=null,this._container=null,this._openStyle=null,this._originBox=null,this._viewBox=null,this._unbind=null}animateOpen(e,i){const n=this.currentItem(!1);null==n||n.reset();const{elementWidth:s=0,elementHeight:o=0}=(null==n?void 0:n.sizePosition())||{},{left:r=0,top:a=0,width:l=0,height:h=0}=this._originBox||{},{left:c=0,top:u=0,width:d=0,height:m=0}=this._viewBox||{};let f=.001,g=0,_=0,v=0,y=0;if(d>0&&m>0&&l>0&&h>0&&(g=r+l/2-(c+d/2),_=a+h/2-(u+m/2)),s>0&&o>0&&l>0&&h>0){const t=s/o>l/h;f=t?h/o:l/s,v=t?o*(l/h):s,y=t?o:s/(l/h)}const w={o:0,k:f,x:g,y:_,w:v,h:y},b={o:1,k:1,x:0,y:0,w:s,h:o};this.openStyle(t({},e?w:t({},b,this._openStyle))),p(this._container),this.openStyle(t({},e?b:w,{t:300,end:i,open:e}))}openStyle(t){this._openStyle=t;const{o:e,k:i,x:n,y:s,w:o,h:a,t:l}=t;r(this._backdrop,{opacity:e,transition:l?`opacity ${l}ms`:""});const h=this.currentItem(!1);r(null==h?void 0:h.getElement(),{transform:`translate(${n}px,${s}px) scale(${i})`,transition:l?`transform ${l}ms`:"",overflow:1>(i||1)||l?"visible":void 0}),r(null==h?void 0:h.getImageElement(),{width:o||void 0,height:a||void 0,transition:l&&o&&a?`width ${l}ms, height ${l}ms`:"",objectFit:o&&a?"cover":void 0})}lockOverflow(t=!0){const e=document.body,i=e.parentElement;if(t){const t=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth,o=function(t){if("boolean"==typeof t){const e=n(t);return{width:e,height:e}}if(!("undefined"!=typeof document&&t&&t instanceof Element))return{width:0,height:0};const{width:e,height:i}=getComputedStyle(t,"::-webkit-scrollbar");return{width:s(e),height:s(i)}}(e).width,r=t?`calc(100% - ${o}px)`:"",a=[];a[0]=e.style.overflow,e.style.overflow="hidden",a[1]=e.style.width,e.style.width=r,i&&(a[2]=i.style.overflow,i.style.overflow="hidden",a[3]=i.style.width,i.style.width=r),this._overflow=a.join("-")}else{const t=this._overflow.split("-");this._overflow="",e.style.overflow=t[0],e.style.width=t[1],i&&(i.style.overflow=t[2],i.style.width=t[3])}}open(){l(this._container,"visible"),this.updateViewBox(),this.lockOverflow(!0),this.animateOpen(!0,(()=>{l(this._indicator,"visible")}))}close(){h(this._indicator,"visible"),this.lockOverflow(!1),this.animateOpen(!1,(()=>{this._destoryOnClose?this.destory():h(this._container,"visible")}))}}function xt({urls:t=[],current:e="",showMenu:i,originBox:n}={}){const s=t.indexOf(e),o=new Tt({current:s,imageUrls:t,originBox:n,destroyOnClose:!0,enableSwipeClose:!0,onPopupMenu:i,onClose:()=>{o.close()}});o.open()}export{Tt as Gallery,ct as Image,xt as default};
//# sourceMappingURL=preview-image.min.js.map
