import*as t from"react";import e from"react";import n from"react-dom";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(this,arguments)}function s(t,e){if(null==t)return{};var n,i,s={},r=Object.keys(t);for(i=0;r.length>i;i++)0>e.indexOf(n=r[i])&&(s[n]=t[n]);return s}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r.apply(this,arguments)}const o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?e.useLayoutEffect:e.useEffect;function a(t,e,n){o((()=>{const i=t();if(i){const t=t=>{"function"==typeof n&&n.call(null,t)};return i.on(e,t),()=>{i.off(e,t)}}return()=>{}}),[n,e,t])}let l=class{constructor(){this.events={},this.events={}}one(t,e,n){const i="function"==typeof e?(...s)=>{e.apply(null,s),this.off(t,i,n)}:e;this.on(t,i,n)}on(t,e,n){const i=this.events[t]||{pool:[],single:-1};if("function"==typeof e)if(n)-1===i.single?i.single=i.pool.push(e)-1:i.pool[i.single]=e;else{let t=!0;for(let n=0,s=i.pool.length;s>n;n++)if(i.pool[n]===e&&n!==i.single){t=!1;break}t&&i.pool.push(e)}else n&&-1!==i.single&&(i.pool.splice(i.single,1),i.single=-1);this.events[t]=i}off(t,e,n){if(void 0===t)this.events={};else if(void 0===e)delete this.events[t];else if(n){const e=this.events[t];e&&-1!==e.single&&(e.pool.splice(e.single,1),e.single=-1)}else{const n=this.events[t];if(n)for(let t=n.pool.length-1;t>=0;t--)if(n.pool[t]===e&&t!==n.single){n.pool.splice(t,1);break}}}emit(t,e){const n=this.events[t];if(n)for(let i=0,s=n.pool.length;s>i;i++){const s=n.pool[i];if("function"==typeof s&&!1===s.call(null,e,t))break}}};const c=(t,e)=>{let n=t;for(;n&&n!==e;)n=n.parentNode;return!!n};function h(t,e,n){return"number"!=typeof t||n>t?e:t}function u(){return window.navigator.maxTouchPoints||"ontouchstart"in window.document}function p(t,e=!1){if(t.touches){if(e){const e=Array.prototype.filter.call(t.touches,(e=>c(e.target,t.currentTarget))).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})));return{points:e,isFirst:t.changedTouches.length===e.length}}return{points:Array.prototype.slice.call(t.changedTouches||[]).map((t=>({pageX:t.pageX,pageY:t.pageY,identifier:t.identifier})))}}return{points:[{pageX:t.pageX,pageY:t.pageY,identifier:-1}],isFirst:e}}function m([t,e],[n,i]){return"number"==typeof t&&"number"==typeof n&&"number"==typeof e&&"number"==typeof i?Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)):0}function d([t,e],[n,i]){return"number"==typeof t&&"number"==typeof n&&"number"==typeof e&&"number"==typeof i?180*Math.atan2(i-e,n-t)/Math.PI:0}function f([t,e],[n,i]){const s="number"==typeof t&&"number"==typeof e,r="number"==typeof n&&"number"==typeof i;return s||r?s&&!r?[t,e]:!s&&r?[n,i]:[(t+n)/2,(e+i)/2]:[0,0]}function g([t,e],[n,i]){if("number"==typeof t&&"number"==typeof n&&"number"==typeof e&&"number"==typeof i){const s=t-n,r=e-i;if(s!==r)return Math.abs(r)>Math.abs(s)?e-i>0?"Up":"Down":t-n>0?"Left":"Right"}return"None"}let v=class extends l{constructor(t){super(),this.wheelDelay=350,this.longTapInterval=750,this.doubleTapInterval=250,this.doubleTapDistance=30,this.touchMoveDistance=3,this.swipeVelocity=.3,this.swipeDuration=100,this.raiseDuration=100,this._rotateAngle=0,this._singleTapTimer=0,this._longTapTimer=0,this._wheelTimerEnd=null,this._preventTap=!0,this._swipePoints=null,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._firstPointer=null,this._pointer0=null,this._pointer1=null,this.resetOptions(t)}resetOptions(t){const{wheelDelay:e,longTapInterval:n,doubleTapInterval:i,doubleTapDistance:s,touchMoveDistance:r,swipeVelocity:o,swipeDuration:a,raiseDuration:l}=t||{};this.wheelDelay=h(e,350,1),this.longTapInterval=h(n,750,1),this.doubleTapInterval=h(i,250,1),this.doubleTapDistance=h(s,30,1),this.touchMoveDistance=h(r,3,0),this.swipeVelocity=h(o,.3,0),this.swipeDuration=h(a,100,1),this.raiseDuration=h(l,100,1)}preventAllTap(t=!0){this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,t&&(this._firstPointer=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0)}};function _(){this.nativeEvent||(this.preventDefault?this.preventDefault():this.returnValue=!1)}function y(){this.stopPropagation?this.stopPropagation():this.cancelBubble=!0}function w(){this.nativeEvent?this.nativeEvent.stopImmediatePropagation&&this.nativeEvent.stopImmediatePropagation():this.stopImmediatePropagation?this.stopImmediatePropagation():y.call(this)}function b(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!!u()&&!!t.touches,preventDefault:_.bind(t),stopPropagation:y.bind(t),stopImmediatePropagation:w.bind(t)},{points:n,isFirst:i}=p(t,!0);i?(this._wheelTimerEnd&&(clearTimeout(this._wheelTimerEnd.timer),this._wheelTimerEnd.wheelEnd(),this._wheelTimerEnd=null),this._pointer0=null,this._pointer1=null):(this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1));for(let t=0,e=n.length;e>t;++t){const e=n[t],i=[e.pageX,e.pageY],s={start:i,previous:i,current:i,identifier:e.identifier,changed:!0};this._pointer0?this._pointer1||this._pointer0.identifier===e.identifier||(this._pointer1=s):this._pointer0=s}this.preventAllTap(!1),this._swipePoints=null,this._rotateAngle=0;const s=this._pointer0,r=this._pointer1;if(r&&s)this._firstPointer=null,e.pointers=[s,r],e.getPoint=()=>f(s.current,r.current),this.emit("gestureStart",e);else{if(!s)return;{e.pointers=[s],e.getPoint=()=>s.current,this._preventTap=!1,this._longTapTimer=+setTimeout((()=>{this._preventTap=!0,this._preventSingleTap=!0,this._preventDoubleTap=!0,this._longTapTimer=0,this._firstPointer=null,e.waitTime=this.longTapInterval,this.emit("longTap",e)}),this.longTapInterval);const t=this._firstPointer,n=this._singleTapTimer;n&&t&&m(t.current,s.current)<this.doubleTapDistance?(clearTimeout(n),this._singleTapTimer=0,this._preventSingleTap=!0,this._preventDoubleTap=!1,e.getPoint=()=>t.current):(this._firstPointer=s,this._preventSingleTap=!1,this._preventDoubleTap=!0)}}this.emit("pointerStart",e)}function T(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!!u()&&!!t.touches,preventDefault:_.bind(t),stopPropagation:y.bind(t),stopImmediatePropagation:w.bind(t)};this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:n}=p(t);for(let t=0,e=n.length;e>t;++t){const e=n[t],i=[e.pageX,e.pageY];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,this._pointer0.previous=this._pointer0.current,this._pointer0.current=i):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,this._pointer1.previous=this._pointer1.current,this._pointer1.current=i)}const i=this._pointer0,s=this._pointer1;if(i&&m(i.start,i.current)>this.touchMoveDistance||s&&m(s.start,s.current)>this.touchMoveDistance){if(this.preventAllTap(),s&&i){e.pointers=[i,s];const{start:t,previous:n,current:r}=i,{start:o,previous:a,current:l}=s,c=f(r,l),h=f(n,a),u=f(t,o);e.getPoint=t=>"start"===t?u:"previous"===t?h:c,e.direction=g(h,c),e.moveDirection=g(u,c),e.deltaX=c[0]-h[0],e.moveX=c[0]-u[0],e.deltaY=c[1]-h[1],e.moveY=c[1]-u[1];const p=m(r,l),v=m(n,a),_=m(t,o);_>0&&p>0&&v>0&&(e.scale=p/v,e.moveScale=p/_);let y=d(r,l)-d(n,a);-180>y?y+=360:y>180&&(y-=360),e.angle=y,this._rotateAngle+=y,e.moveAngle=this._rotateAngle,this.emit("rotate",e),_>0&&p>0&&v>0&&this.emit("scale",e),this.emit("multiPan",e),this.emit("gestureMove",e)}else{if(!i)return;{e.pointers=[i];const{start:t,previous:n,current:s}=i;e.getPoint=e=>"start"===e?t:"previous"===e?n:s,e.direction=g(n,s),e.moveDirection=g(t,s),e.deltaX=s[0]-n[0],e.moveX=s[0]-t[0],e.deltaY=s[1]-n[1],e.moveY=s[1]-t[1];const r=Date.now(),o=this._swipePoints||[[],[]];r-((o[1][0]?o[1][0].timestamp:0)||0)>this.swipeDuration&&(o[0]=o[1],o[1]=[]),o[1].push({point:s,timestamp:r}),this._swipePoints=o,this.emit("pan",e)}}this.emit("pointerMove",e)}}function E(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!!u()&&!!t.touches,preventDefault:_.bind(t),stopPropagation:y.bind(t),stopImmediatePropagation:w.bind(t)};let n=null,i=null;this._pointer0&&(this._pointer0.changed=!1),this._pointer1&&(this._pointer1.changed=!1);const{points:s}=p(t);for(let t=0,e=s.length;e>t;++t){const e=s[t];this._pointer0&&this._pointer0.identifier===e.identifier?(this._pointer0.changed=!0,n=this._pointer0,this._pointer0=null):this._pointer1&&this._pointer1.identifier===e.identifier&&(this._pointer1.changed=!0,i=this._pointer1,this._pointer1=null)}if(this._pointer1&&!this._pointer0&&(this._pointer0=this._pointer1,this._pointer1=null,i=n,n=null),this._longTapTimer&&(clearTimeout(this._longTapTimer),this._longTapTimer=0),this._pointer0){e.pointers=[this._pointer0],this._pointer1?e.pointers.push(this._pointer1):i&&(e.leavePointers=[i],this._rotateAngle=0);const t=f(this._pointer0.start,this._pointer1?this._pointer1.start:i?i.start:[]),n=f(this._pointer0.previous,this._pointer1?this._pointer1.previous:i?i.previous:[]),s=f(this._pointer0.current,this._pointer1?this._pointer1.current:i?i.current:[]);e.getPoint=e=>"start"===e?t:"previous"===e?n:s,this.emit("gestureEnd",e)}else if(n){e.leavePointers=[n],i&&e.leavePointers.push(i);const t=i?f(n.start,i.start):n.start,s=i?f(n.previous,i.previous):n.previous,a=i?f(n.current,i.current):n.current;if(e.getPoint=e=>"start"===e?t:"previous"===e?s:a,this._preventTap||(this.emit("tap",e),this._preventTap=!0),this._preventSingleTap||(this._singleTapTimer=+setTimeout((()=>{this._singleTapTimer=0,e.delayTime=this.doubleTapInterval,this.emit("singleTap",e)}),this.doubleTapInterval),this._preventSingleTap=!0),!this._preventDoubleTap){const t=this._firstPointer;t&&(e.getPoint=()=>t.current),e.intervalTime=this.doubleTapInterval,this.emit("doubleTap",e),this._firstPointer=null,this._preventDoubleTap=!0}if(this._swipePoints){const[t,n]=this._swipePoints,i=n[n.length-1];if(Date.now()-i.timestamp<=this.raiseDuration){let s=n[0];for(let e=t.length-1;e>=0&&this.swipeDuration>=i.timestamp-t[e].timestamp;e--)s=t[e];const a=(r=i.timestamp-s.timestamp,"number"!=typeof(o=m(s.point,i.point))||0===o||"number"!=typeof r||0===r?0:o/r);if(a>this.swipeVelocity){const t=d(s.point,i.point);e.direction=g(s.point,i.point),e.angle=t,e.velocity=a,e.swipeComputed=(e,n=a)=>{let i=0,s=0,r=0;e>1?(i=e,s=n/i,r=n*i/2):e>0&&(s=e,i=n/s,r=n*n/(2*s));const[o,l]=function(t,e){if("number"!=typeof t||"number"!=typeof e)return[0,0];const n=e*Math.PI/180;return[t*Math.cos(n),t*Math.sin(n)]}(r,t);return{duration:i,stretchX:o,stretchY:l,deceleration:s}},this.emit("swipe",e),this._swipePoints=null}}}}var r,o;this.emit("pointerEnd",e)}function x(t){this.emit("pointerCancel",{sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!!u()&&!!t.touches,preventDefault:_.bind(t),stopPropagation:y.bind(t),stopImmediatePropagation:w.bind(t)}),E.call(this,t)}function M(t){const e=this;function n(){"undefined"!=typeof window&&(window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",o),window.removeEventListener("blur",s),window.removeEventListener("dragstart",i),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",i))}function i(t){t.preventDefault()}function s(t){i(t),n()}function r(n){if(0===t.button)T.call(e,n);else{const t={sourceEvent:n,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!1,preventDefault:_.bind(n),stopPropagation:y.bind(n),stopImmediatePropagation:w.bind(n)},i=[n.pageX,n.pageY];if(e._pointer0&&m(e._pointer0.start,i)>e.touchMoveDistance){e._pointer0.previous=e._pointer0.current,e._pointer0.current=i,t.pointers=[e._pointer0];const{start:n,previous:s,current:r}=e._pointer0;t.getPoint=t=>"start"===t?n:"previous"===t?s:r,t.direction=g(s,r),t.moveDirection=g(n,r),t.deltaX=r[0]-s[0],t.moveX=r[0]-n[0],t.deltaY=r[1]-s[1],t.moveY=r[1]-n[1],t.angle=t.deltaX/4,t.moveAngle=t.moveX/4,e.emit("rotate",t)}}}function o(i){if(n(),0===t.button)E.call(e,i);else{const t={sourceEvent:i,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!1,preventDefault:_.bind(i),stopPropagation:y.bind(i),stopImmediatePropagation:w.bind(i)},n=[i.pageX,i.pageY];if(e._pointer0){const i=e._pointer0;e._pointer0=null,i.previous=i.current,i.current=n,t.leavePointers=[i];const{start:s,previous:r,current:o}=i;t.getPoint=t=>"start"===t?s:"previous"===t?r:o}t.angle=NaN,e.emit("rotate",t)}}if("undefined"!=typeof window&&(window.addEventListener("mousemove",r,{capture:!1,passive:!1}),window.addEventListener("mouseup",o,{capture:!1,passive:!1}),window.addEventListener("blur",s,{capture:!0,passive:!1}),window.addEventListener("dragstart",i,{capture:!0,passive:!1}),"onselectstart"in window.document.documentElement&&window.addEventListener("selectstart",i,{capture:!0,passive:!1})),0===t.button)b.call(e,t);else{e._wheelTimerEnd&&(clearTimeout(e._wheelTimerEnd.timer),e._wheelTimerEnd.wheelEnd(),e._wheelTimerEnd=null);const n=[t.pageX,t.pageY];e._pointer0={start:n,previous:n,current:n,identifier:-1,changed:!0}}}function P(t){const e={sourceEvent:t,timestamp:Date.now(),pointers:[],leavePointers:[],getPoint:()=>[0,0],isTouching:()=>!1,preventDefault:_.bind(t),stopPropagation:y.bind(t),stopImmediatePropagation:w.bind(t)},n=[t.pageX,t.pageY];this._wheelTimerEnd?(this._pointer0&&(this._pointer0.previous=this._pointer0.current,this._pointer0.current=n),clearTimeout(this._wheelTimerEnd.timer)):this._pointer0={start:n,previous:n,current:n,identifier:-1,changed:!0};const i=()=>{this._pointer0=null,this._wheelTimerEnd=null,e.timestamp=Date.now(),e.scale=NaN,this.emit("scale",e)};if(this._wheelTimerEnd={wheelEnd:i,timer:+setTimeout(i,this.wheelDelay),scale:this._wheelTimerEnd?this._wheelTimerEnd.scale:1},this._pointer0){e.pointers=[this._pointer0];const{start:n,previous:i,current:s}=this._pointer0;e.getPoint=t=>"start"===t?n:"previous"===t?i:s;const r=Math.pow(2,-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002));this._wheelTimerEnd.scale*=r,e.moveScale=this._wheelTimerEnd.scale,e.scale=r,this.emit("scale",e)}}const D=["children","options","preventAllTap"],I=e.forwardRef(((t,i)=>{let{children:s,options:l,preventAllTap:c}=t,h=function(t,e){if(null==t)return{};var n,i,s={},r=Object.keys(t);for(i=0;r.length>i;i++)0>e.indexOf(n=r[i])&&(s[n]=t[n]);return s}(t,D);const p=e.useRef(null),m=e.useRef(null);o((()=>{m.current=new v}),[]),o((()=>{m.current&&m.current.resetOptions(l)}),[l]),o((()=>{c&&m.current&&m.current.preventAllTap()}),[c]),function(t,e){const{onPan:n,onTap:i,onSwipe:s,onSingleTap:r,onLongTap:o,onDoubleTap:l,onMultiPan:c,onScale:h,onRotate:u,onPointerStart:p,onPointerMove:m,onPointerEnd:d,onPointerCancel:f,onGestureStart:g,onGestureMove:v,onGestureEnd:_}=t;a(e,"pan",n),a(e,"tap",i),a(e,"swipe",s),a(e,"singleTap",r),a(e,"longTap",o),a(e,"doubleTap",l),a(e,"multiPan",c),a(e,"scale",h),a(e,"rotate",u),a(e,"pointerStart",p),a(e,"pointerMove",m),a(e,"pointerEnd",d),a(e,"pointerCancel",f),a(e,"gestureStart",g),a(e,"gestureMove",v),a(e,"gestureEnd",_)}(h,e.useCallback((()=>m.current),[])),e.useImperativeHandle(i,(()=>({findDOMElement:()=>p.current,getInstance:()=>m.current})),[]);const d=e.useCallback((t=>{let i=t;!(t instanceof Element)&&t instanceof e.Component&&(i=n.findDOMNode(t)),i instanceof Element||(i=null),p.current=i}),[]),f=(t,e)=>{const n=m.current;n&&t.apply(n,e)},g=e.useMemo((()=>r({},u()?{onTouchStart:(...t)=>f(b,t),onTouchMove:(...t)=>f(T,t),onTouchEnd:(...t)=>f(E,t),onTouchCancel:(...t)=>f(x,t)}:{},{onMouseDown:(...t)=>f(M,t),onWheel:(...t)=>f(P,t)})),[]);return s?e.Children.only(e.cloneElement(s,r({ref:d},g))):(console.warn("Warning: Gesture children must exist."),null)}));function S(t,n=((t,e)=>t!==e)){const i=e.useRef(t),s=n(i.current,t);return s&&(i.current=t),s}function k(t,n=((t,e)=>S(e)?e:t)){const i="function"==typeof t?t():t,s=e.useRef(i);s.current=n(s.current,i);const r=function(){const t=e.useState({})[1];return e.useCallback((()=>t({})),[t])}(),o=e.useCallback((t=>{const e="function"==typeof t?t(s.current):t;e!==s.current&&(s.current=e,r())}),[r]);return[s.current,o]}function C(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}const O=C()?e.useLayoutEffect:e.useEffect;function A(){return A=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},A.apply(this,arguments)}function z(t,e){if(null==t)return{};var n,i,s={},r=Object.keys(t);for(i=0;r.length>i;i++)0>e.indexOf(n=r[i])&&(s[n]=t[n]);return s}const j=/^(?:-border(?:-top|-right|-bottom|-left)?(?:-width|)|(?:-margin|-padding)?(?:-top|-right|-bottom|-left)?|(?:-min|-max)?(?:-width|-height))$/,L="undefined"==typeof window?global:window,X=["moz","webkit"];let Y=L.requestAnimationFrame,R=L.cancelAnimationFrame||L.cancelRequestAnimationFrame;if(!Y||!R)for(var H=0;2>H;H++)Y=L[X[H]+"RequestAnimationFrame"],R=L[X[H]+"CancelAnimationFrame"]||L[X[H]+"CancelRequestAnimationFrame"];Y&&R||(Y=function(){let t=0;return function(e){const n=Date.now(),i=Math.max(0,16-(n-t));return t=n+i,window.setTimeout(e,i)}}(),R=function(t){return window.clearTimeout(t)});const B=Y,N=R,F=(t,e)=>e>0?+setTimeout(t,e):(t(Math.abs(e)),0);let W=class{constructor({duration:t,easing:e,delay:n}={}){this._delay=0,this._frameId=0,this._elapsed=0,this._sleepId=0,this._delayId=0,this._tick=null,this._delayFn=null,this.duration="number"==typeof t&&t>0?t:0,this.easing="function"!=typeof e?t=>t:e,this.delay="number"!=typeof n?0:n}start(t){if(!this._tick&&!this._delayFn){const{duration:e,easing:n,delay:i}=this;this._delayFn=i=>{if(this._delayId=0,this._delayFn=null,this._delay=0,e>0){const s=i=>{const r=Date.now();this._elapsed+=r-i,e>this._elapsed?(this._frameId=B((()=>s(r))),t(n(this._elapsed/e))):(this._tick=null,this._frameId=0,this._elapsed=0,t(1))};this._tick=s,this._elapsed=i||0,s(Date.now())}else t(1)},this._delay=Date.now(),this._delayId=F(this._delayFn,i)}}restart(){if((this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()),this._delayFn)){const t=this.delay+this._delay;this._delay+=Date.now(),this._delayId=F(this._delayFn,t)}}sleep(t){t&&t>0&&(this._tick||this._delayFn)&&(this.stop(),this._sleepId=+setTimeout((()=>{this._sleepId=0,this.restart()}),t))}stop(){(this._tick||this._delayFn)&&(this._delayId&&(clearTimeout(this._delayId),this._delayId=0,this._delay-=Date.now()),this._frameId&&(N(this._frameId),this._frameId=0),this._sleepId&&(clearTimeout(this._sleepId),this._sleepId=0))}end(){(this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()+this._elapsed-this.duration),this._delayFn&&this._delayFn(this.duration))}},$=class{constructor(t,e,n){const i=this.value="number"==typeof t?{default:t}:t;if("number"==typeof e){const t={};Object.keys(i).forEach((n=>{t[n]=e||0})),this.precision=t}else e&&(this.precision=e);"function"==typeof n&&(this.transform=n)}toRaw(){const t={value:this.value};return this.precision&&(t.precision=this.precision),this.transform&&(t.transform=this.transform),t}};const V=["value","precision"],q=["value"],G=["before","after","cancel"];let U=class{constructor({cssProperties:t,apply:e}={}){this.cssProperties={},this._cssProperties=null,this._animations=[],this._apply=e||(()=>{}),t&&this.apply(t)}update(){!this.running()&&this._cssProperties&&(this.cssProperties=this._cssProperties,this._cssProperties=null);const{cssProperties:t}=this,e={};Object.keys(t).forEach((n=>{const{value:i,transform:s}=t[n];e[n.replace(/([A-Z])/g,"-$1").toLocaleLowerCase()]=s(i)})),this._apply(e)}value(){const t=this._cssProperties||this.cssProperties,e={};return Object.keys(t).forEach((n=>{e[n]=t[n].value})),e}apply(t,e){this._cssProperties||(this._cssProperties=this.cssProperties);const n=function(t,e){const n=A({},t);if(e instanceof $){const i=Object.keys(t)[0];if(i){const s=t[i],r=e.toRaw();n[i]=A({},s,r,{value:A({},s.value,r.value)})}}else Object.keys(e).forEach((i=>{const s=t[i],r=e[i].toRaw();n[i]=s?A({},s,r,{value:A({},s.value,r.value)}):A({transform:t=>Object.keys(t).map((e=>t[e])).join(" "),precision:{}},r)}));return n}(this._cssProperties,t),i=function(t,e){const n={};return Object.keys(t).forEach((i=>{const s=t[i].value,r=e[i],{value:o,precision:a}=r,l=z(r,V);let c=null;Object.keys(s).forEach((t=>{const e=o[t]-s[t];Math.abs(e)>(a[t]||0)&&(c||(c={}),c[t]=e)})),c&&(n[i]=A({value:c,precision:a},l))})),n}(this._cssProperties,n);this._cssProperties=n;const s=Object.keys(i),r={};s.forEach((t=>{const e=i[t],{value:n}=e,s=z(e,q);r[t]=A({value:A({},n)},s),this.cssProperties[t]=A({},this.cssProperties[t],s)}));const o=e&&0!==s.length?e:{};return new Promise((t=>{const{before:e=(()=>{}),after:n=(()=>{}),cancel:a=!0}=o,l=z(o,G),c=new W(l);this._animations.push({animation:c,cancel:a,remain:r}),c.start((o=>{const a=e(o,this.value());if(!1!==a){let t=o;"number"==typeof a&&(t=a),s.forEach((e=>{const n=this.cssProperties[e].value,s=i[e].value,o=r[e].value;Object.keys(s).forEach((e=>{const i=s[e]*(1-t);n[e]+=o[e]-i,o[e]=i}))})),this.update()}if(n(o,this.value()),1===o){const e=this._animations.findIndex((t=>c===t.animation));-1!==e&&this._animations.splice(e,1),this.update(),t(this.value())}}))}))}cancel(t=!1){let e=0;return this._animations=this._animations.filter((({animation:n,remain:i,cancel:s})=>{if(s){n[t?"end":"stop"](),e+=1;const s=this._cssProperties;return s&&Object.keys(i).forEach((t=>{if(s[t]){const e=i[t].value,n=s[t].value;Object.keys(e).forEach((t=>{n[t]-=e[t]}))}})),!1}return!0})),this.update(),e}running(){return 0!==this._animations.length}};const Z=$;class J extends U{constructor(t,e){super(A({apply:e=>function(t,e){if(t&&e){let n="";Object.keys(e).forEach((i=>{const s=function(t){return t.replace(/([A-Z])/g,"-$1").toLocaleLowerCase()}(i),r=e[i];if(r||0===r){const t="number"==typeof r&&/^[a-z]/.test(s)&&j.test("-"+s)?"px":"";n+=`${s}: ${r}${t};`}else t.style.removeProperty(s)})),t.style.cssText+=n}return t}(function(t){let e=t;return"string"==typeof t&&(e=document.querySelector(t)),"function"==typeof t&&(e=t()),e||null}(t),e)},e||{}))}}const K=t=>1-(1-t)*(1-t),Q={cancel:!0,duration:500,easing:t=>1-(1-t)*(1-t)*(1-t)*(1-t)},tt=["direction","itemModels","itemSize","enableSwipeClose","transitionEl"],et=["before","after"];class nt extends J{constructor(t={}){let{direction:e,itemModels:n,itemSize:i,enableSwipeClose:r,transitionEl:o}=t;super(o||null,s(t,tt)),this._direction="horizontal",this._itemModels=[],this._itemSize=0,this._activeIndex=-1,this._enableSwipeClose=!0,this._fgBehavior=0,this._moveTarget="none",this.apply({transform:new Z(0,1,(t=>`translateX(${t.default}px)`))}),this.swipeClose(r),this.direction(e),this.itemSize(i),this.itemModels(n)}activeIndex(){return this._activeIndex}isHorizontal(){return"horizontal"===this._direction}isVertical(){return"vertical"===this._direction}swipeClose(t){return void 0!==t&&(this._enableSwipeClose=t),this._enableSwipeClose}direction(t){if(t){this._direction=t;const e="vertical"===t?"Y":"X";this.apply(new Z(0,1,(t=>`translate${e}(${t.default}px)`)))}return this._direction}itemSize(t){return void 0!==t&&(this._itemSize=t,this.apply(new Z(-this.activeIndex()*t))),this._itemSize}itemModels(t,e){return void 0===t?this._itemModels:"number"==typeof t?this._itemModels[t]:Array.isArray(t)?(this._itemModels=t,t):(this._itemModels[e||0]=t,t)}currentItem(){return this.itemModels(this.activeIndex())}countItems(){return this.itemModels().length}slide(t,e={}){const{before:n,after:r}=e,o=s(e,et),a=Math.max(Math.min(t,this.countItems()-1),0),l=this.activeIndex()!==a;l&&(this._activeIndex=a,null==n||n(a));const c=-a*this.itemSize();return this.apply(new Z(c),i({},Q,o)).then((()=>(l&&(null==r||r(a)),a)))}next(t){return this.slide(this._activeIndex+1,t)}prev(t){return this.slide(this._activeIndex-1,t)}}const it=Math.PI/180,st={multiply:function(t,e,n){const i=e[0],s=e[4],r=e[8],o=e[12],a=e[1],l=e[5],c=e[9],h=e[13],u=e[2],p=e[6],m=e[10],d=e[14],f=e[3],g=e[7],v=e[11],_=e[15],y=n[0],w=n[1],b=n[2],T=n[3],E=n[4],x=n[5],M=n[6],P=n[7],D=n[8],I=n[9],S=n[10],k=n[11],C=n[12],O=n[13],A=n[14],z=n[15];t[0]=i*y+s*E+r*D+o*C,t[4]=i*w+s*x+r*I+o*O,t[8]=i*b+s*M+r*S+o*A,t[12]=i*T+s*P+r*k+o*z,t[1]=a*y+l*E+c*D+h*C,t[5]=a*w+l*x+c*I+h*O,t[9]=a*b+l*M+c*S+h*A,t[13]=a*T+l*P+c*k+h*z,t[2]=u*y+p*E+m*D+d*C,t[6]=u*w+p*x+m*I+d*O,t[10]=u*b+p*M+m*S+d*A,t[14]=u*T+p*P+m*k+d*z,t[3]=f*y+g*E+v*D+_*C,t[7]=f*w+g*x+v*I+_*O,t[11]=f*b+g*M+v*S+_*A,t[15]=f*T+g*P+v*k+_*z},identity:function(t){for(let e=0;16>e;e++)t[e]=0;for(let e=0;16>e;e+=5)t[e]=1},translate:function(t,e,n,i){for(let s=0;4>s;s++)t[12+s]+=t[s]*e+t[4+s]*n+t[8+s]*i},scale:function(t,e,n,i){for(let s=0;4>s;s++)t[s]*=e,t[4+s]*=n,t[8+s]*=i},rotate:function(t,e,n,i,s){const r=new Float32Array(16);r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1;const o=e*it,a=Math.sin(o),l=Math.cos(o);if(1===n&&0===i&&0===s)r[5]=l,r[10]=l,r[6]=a,r[9]=-a,r[1]=0,r[2]=0,r[4]=0,r[8]=0,r[0]=1;else if(0===n&&0===i&&0===s)r[0]=l,r[10]=l,r[8]=a,r[2]=-a,r[1]=0,r[4]=0,r[6]=0,r[9]=0,r[5]=1;else if(0===n&&0===i&&1===s)r[0]=l,r[5]=l,r[1]=a,r[4]=-a,r[2]=0,r[6]=0,r[8]=0,r[9]=0,r[10]=1;else{const t=Math.sqrt(n*n+i*i+s*s);if(1!==t){const e=1/t;n*=e,i*=e,s*=e}const e=1-l,o=n*i,c=i*s,h=s*n,u=n*a,p=i*a,m=s*a;r[0]=n*n*e+l,r[4]=o*e-m,r[8]=h*e+p,r[1]=o*e+m,r[5]=i*i*e+l,r[9]=c*e-u,r[2]=h*e-p,r[6]=c*e+u,r[10]=s*s*e+l}st.multiply(t,t,r)},rotateEuler:function(t,e,n,i){const s=new Float32Array(16),r=e*it,o=n*it,a=i*it,l=Math.cos(r),c=Math.sin(r),h=Math.cos(o),u=Math.sin(o),p=Math.cos(a),m=Math.sin(a),d=l*u,f=c*u;s[0]=h*p,s[1]=-h*m,s[2]=u,s[3]=0,s[4]=d*p+l*m,s[5]=-d*m+l*p,s[6]=-c*h,s[7]=0,s[8]=-f*p+c*m,s[9]=f*m+c*p,s[10]=l*h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,st.multiply(t,t,s)},perspective:function(t,e,n,i,s){const r=1/Math.tan(e*(Math.PI/360)),o=1/(i-s);t[0]=r/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(s+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*s*i*o,t[15]=0}};let rt=class t{constructor(t={}){"number"==typeof t.a&&(this.a=t.a),"number"==typeof t.k&&(this.k=t.k),"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y)}static identity(){return new t({a:0,k:1,x:0,y:0})}toRaw(){const t={};return"number"==typeof this.a&&(t.a=this.a),"number"==typeof this.k&&(t.k=this.k),"number"==typeof this.x&&(t.x=this.x),"number"==typeof this.y&&(t.y=this.y),t}toString(){const{a:t=0,k:e=1,x:n=0,y:i=0}=this,s=new Float32Array(16);return st.identity(s),st.translate(s,n,i,0),st.scale(s,e,e,e),st.rotate(s,-t,0,0,1),`matrix3d(${Array.prototype.slice.call(s).join(",")})`}};function ot(t,e,n,i=!1){return 1>t||1>e||i&&t>e||0>=n||n>1?t:i?Math.pow((e-1)*t/(e-t),1/n):e/(1+(e-1)/Math.pow(t,n))}function at(t,e={}){if(0===t)return 0;const{max:n=9999,mode:i=0,expo:s=.88}=e;let r=Math.abs(t);return r=1>r?1===i?1/ot(1/r,n,s):ot(r+1,n,s)-1:ot(r,n,s),r*(t>0?1:-1)}function lt(t,e={}){if(0===t)return 0;const{max:n=9999,mode:i=0,expo:s=.88}=e;let r=Math.abs(t);return r=1>r?1===i?1/ot(1/r,n,s,!0):ot(r+1,n,s,!0)-1:ot(r,n,s,!0),r*(t>0?1:-1)}function ct(t,e,n){return t>(1-e)/(2*e)?(1+e-2*n)/(2*e)>t?(t-(1-n)/(2*e))/(1-n/e):.5:-.5}function ht(t,...e){return"function"==typeof t?t(...e):t}function ut(t,[e,n]){return t>=e&&n>=t}function pt(t,[e,n],i){return Math.max(Math.min(t,n),e)}function mt(t){if(t){const{left:e,top:n,width:i,height:s}=t.getBoundingClientRect();return{x:e+i/2,y:n+s/2,w:i,h:s}}return{x:0,y:0,w:0,h:0}}function dt(t){return t.preventDefault()}const ft=["sizePosition","dblAdjust","dblScale","damping","rotation","scalation","translation","transitionEl"],gt=["touching"];class vt extends J{constructor(t={}){let{sizePosition:e,dblAdjust:n,dblScale:i,damping:r,rotation:o,scalation:a,translation:l,transitionEl:c}=t;super(c||null,s(t,ft)),this._dblAdjust=!0,this._dblScale=0,this._damping=[],this._rotation=[],this._scalation=[],this._translation=[],this._sizePosition={containerCenter:[0,0],containerWidth:0,containerHeight:0,naturalWidth:0,naturalHeight:0,elementWidth:0,elementHeight:0},this.apply({transform:new Z({a:0,k:1,x:0,y:0},{a:.001,k:.001,x:1,y:1},(t=>""+new rt(t)))}),this.sizePosition(e),this.setDblAdjust(n),this.setDamping(r),this.setDblScale(i),this.setRotation(o),this.setScalation(a),this.setTranslation(l)}reset(t=0){const e=pt(0,this.getRotation()),n=pt(1,this.getScalation()),s=pt(0,this.getXTranslation(n)),r=pt(0,this.getYTranslation(n));this.apply(new Z({a:e,k:n,x:s,y:r}),i({},Q,{duration:t}))}sizePosition(t){if(t){const{containerCenter:e,containerWidth:n,containerHeight:i,naturalWidth:s,naturalHeight:r}=t,o=s/r;let a=s;a=n/i>o?1/2.2>o?Math.min(n,s):i*o:n;this._sizePosition={containerCenter:e,containerWidth:n,containerHeight:i,naturalWidth:s,naturalHeight:r,elementWidth:a||0,elementHeight:a/o||0},this.reset()}return this._sizePosition}setRotation(t){this._rotation=t}getRotation(...t){const e=ht(this._rotation,...t);return e&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[1]>=e[0]?e:[0,0]}setScalation(t){this._scalation=t}getScalation(...t){const e=ht(this._scalation,...t);return e&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[1]>=e[0]&&e[0]>0?e:[1,2*this.getDblScale()]}setTranslation(t){this.setXTranslation(t&&t[0]),this.setYTranslation(t&&t[1])}getTranslation(t,...e){return[this.getXTranslation(t,...e),this.getYTranslation(t,...e)]}setXTranslation(t){this._translation[0]=t}getXTranslation(t,...e){const n=ht(this._translation[0],...e);if(n&&"number"==typeof n[0]&&"number"==typeof n[1]&&n[1]>=n[0])return n;const i=t||this.value().transform.k||1,{containerWidth:s,elementWidth:r}=this.sizePosition(),o=Math.max((r*i-s)/2,0);return[-o,o]}setYTranslation(t){this._translation[1]=t}getYTranslation(t,...e){const n=ht(this._translation[1],...e);if(n&&"number"==typeof n[0]&&"number"==typeof n[1]&&n[1]>=n[0])return n;const i=t||this.value().transform.k||1,{containerHeight:s,elementHeight:r}=this.sizePosition(),o=Math.max((r*i-s)/2,0);return[-o,o]}setDblScale(t){this._dblScale=t}getDblScale(...t){const e=ht(this._dblScale,...t);if("number"==typeof e&&e>0)return e;const{containerWidth:n,containerHeight:i,naturalWidth:s,naturalHeight:r,elementWidth:o,elementHeight:a}=this.sizePosition();return Math.max(2,Math.max(n/o,i/a),Math.min(s/n,r/i))||1}setDblAdjust(t=!0){this._dblAdjust=t}getDblAdjust(){return this._dblAdjust}isDamping(t){var e;return-1!==(null==(e=this._damping)?void 0:e.indexOf(t))}setDamping(t){this._damping=t||["scale","translate"]}rotate(t){return this.transform(new rt({a:t}))}rotateTo(t){return this.transformTo(new rt({a:t}))}scale(t,e){return this.transform(new rt({k:t}),e)}scaleTo(t,e){return this.transformTo(new rt({k:t}),e)}translate(t,e){return this.transform(new rt({x:t,y:e}))}translateTo(t,e){return this.transformTo(new rt({x:t,y:e}))}translateX(t){return this.transform(new rt({x:t}))}translateXTo(t){return this.transformTo(new rt({x:t}))}translateY(t){return this.transform(new rt({y:t}))}translateYTo(t){return this.transformTo(new rt({y:t}))}transform(t,e,n){const i=this.value().transform;let{a:s,k:r,x:o,y:a}=t;return"number"==typeof s&&(s+=i.a||0),"number"==typeof r&&(r*=i.k||1),"number"==typeof o&&(o+=i.x||0),"number"==typeof a&&(a+=i.y||0),this.transformTo(new rt({a:s,k:r,x:o,y:a}),e,n)}transformTo(t,e,n){let r=e,o=n;n||Array.isArray(e)||(o=e,r=void 0);const a=o||{},{touching:l}=a,c=s(a,gt),{a:h,k:u,x:p,y:m}=t,d=new rt;if("number"==typeof h&&(d.a=pt(h,this.getRotation(l))),"number"==typeof u){const t=d.k=pt(u,this.getScalation(l));if(Array.isArray(r)){const[e,n]=this.computeOffset(r,t),i=this.value().transform;d.x=pt(("number"==typeof p?p:i.x)+e,this.getXTranslation(t,l)),d.y=pt(("number"==typeof m?m:i.y)+n,this.getYTranslation(t,l))}else"number"==typeof p&&(d.x=pt(p,this.getXTranslation(t,l))),"number"==typeof m&&(d.y=pt(m,this.getYTranslation(t,l)))}else"number"==typeof p&&(d.x=pt(p,this.getXTranslation(0,l))),"number"==typeof m&&(d.y=pt(m,this.getYTranslation(0,l)));return this.apply(new Z(d.toRaw()),i({},Q,c))}computeOffset(t,e,n=!1){const{containerCenter:i,containerWidth:s,containerHeight:r,elementWidth:o,elementHeight:a}=this.sizePosition(),l=this.value().transform,c=e/l.k,[h,u]=i;let p=("number"==typeof t[0]?t[0]:h)-(h+l.x),m=("number"==typeof t[1]?t[1]:u)-(u+l.y);if(n){const t=s/1,e=r/1,n=o/l.k,i=a/l.k;p=pt(n-(t-n)/(c-1),[0,n])*ct(p/n,c,pt(t/n,[1,2]))||0,m=pt(i-(e-i)/(c-1),[0,i])*ct(m/i,c,pt(e/i,[1,2]))||0}return p*=1-c,m*=1-c,[p,m]}moveBounce(t,e,n,i,s,r=[]){let{a:o,k:a,x:l,y:c}=this.value().transform;const h=this.getRotation(t);if(this.isDamping("rotate")){let t=pt(o,h);o=t+lt(o-t,{max:180}),t=pt(o+=e,h),o=t+at(o-t,{max:180})}else o=pt(o+=e,h);const u=this.getScalation(t);if(this.isDamping("scale")){let t=pt(a,u);a=t*lt(a/t,{max:2,mode:1}),t=pt(a*=n,u),a=t*at(a/t,{max:2,mode:1})}else a=pt(a*=n,u);const[p,m]=this.computeOffset(r,a);if(this.isDamping("scale")){const{containerWidth:e,containerHeight:n}=this.sizePosition();let r=pt(l,this.getXTranslation(0,t));l=r+lt(l-r,{max:e}),r=pt(l+=p+i,this.getXTranslation(a,t)),l=r+at(l-r,{max:e});let o=pt(c,this.getYTranslation(0,t));c=o+lt(c-o,{max:n}),o=pt(c+=m+s,this.getYTranslation(a,t)),c=o+at(c-o,{max:n})}else l=pt(l+=p+i,this.getXTranslation(a,t)),c=pt(c+=m+s,this.getYTranslation(a,t));this.apply(new Z({a:o,k:a,x:l,y:c}))}resetBounce(t,e=[],n=!1){let{a:i,k:s,x:r,y:o}=this.value().transform;if(this.isDamping("rotate")){const e=pt(i,this.getRotation(t));i=e+lt(i-e,{max:180})}if(this.isDamping("scale")){const e=pt(s,this.getScalation(t));s=e*lt(s/e,{max:2,mode:1})}if(this.isDamping("translate")){const{containerWidth:e,containerHeight:n}=this.sizePosition(),i=pt(r,this.getXTranslation(0,t));r=i+lt(r-i,{max:e});const s=pt(o,this.getYTranslation(0,t));o=s+lt(o-s,{max:n})}this.transformTo(new rt({a:i,k:s,x:r,y:o}),e,{cancel:n,touching:t})}dblScale(t,e=[]){const n=this.value().transform.k||1,i=pt(this.getDblScale(t),this.getScalation(t)),s=pt(1,this.getScalation(t));if(i>s&&s>=n||s>i&&n>=s)if(this.getDblAdjust()){const[t,n]=this.computeOffset(e,i,this.getDblAdjust()),s=this.value().transform;this.transformTo(new rt({a:0,k:i,x:s.x+t,y:s.y+n}),{cancel:!1})}else this.transformTo(new rt({k:i}),e,{cancel:!1,touching:t});else this.getDblAdjust()?this.transformTo(new rt({a:0,k:s,x:0,y:0}),{cancel:!1,touching:t}):this.transformTo(new rt({k:s}),e,{cancel:!1,touching:t})}swipeBounce(t,e,n,s,r){const o=this.sizePosition()["x"===s?"containerWidth":"containerHeight"],a=1.2*this.getDblScale(t),l=this.value().transform[s]||0,c=this.getTranslation(0,t)["x"===s?0:1],h=n>0?1:-1,u=Math.max(1,Math.min(Math.abs(n),a*o))*h,p=Math.max(800,Math.min(2500,e));if(ut(l+u,c))"function"==typeof r?r(s,u,0,(()=>({duration:p,easing:K}))):this.apply(new Z({[s]:l+u}),i({},Q,{easing:K,duration:p}));else{const t=pt(l+u,c)-l;let e=0;if(this.isDamping("translate")){const n=(ut(l,c)?Math.sqrt(1-Math.abs(t/u)):1)*(2*Math.abs(u)/p);e=Math.min(30*n,o/4)*h}if("function"==typeof r)r(s,t,e,(t=>({duration:(1-Math.sqrt(1-Math.abs(t/u)))*p,easing:K})));else{const n=Math.max((t+e)*h,0)*h,r=1-Math.sqrt(1-Math.abs(n/u));0===n?this.apply(new Z({[s]:pt(l+n,c)}),i({},Q)):this.apply(new Z({[s]:l+n}),i({},Q,{duration:r*p,easing:K})).then((()=>{this.apply(new Z({[s]:pt(l+n,c)}),i({},Q))}))}}}}var _t,yt;function wt(){return wt=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wt.apply(this,arguments)}var bt,Tt=function(e){return t.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80 80",width:"1em",height:"1em"},e),_t||(_t=t.createElement("defs",null,t.createElement("linearGradient",{id:"loading_svg__a",x1:"94.087%",x2:"94.087%",y1:"0%",y2:"90.559%"},t.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:0}),t.createElement("stop",{offset:"100%",stopColor:"#fff",stopOpacity:.3})),t.createElement("linearGradient",{id:"loading_svg__b",x1:"100%",x2:"100%",y1:"8.674%",y2:"90.629%"},t.createElement("stop",{offset:"0%",stopColor:"#fff"}),t.createElement("stop",{offset:"100%",stopColor:"#fff",stopOpacity:.3})))),yt||(yt=t.createElement("g",{fill:"none",fillRule:"evenodd",opacity:.9},t.createElement("path",{fill:"url(#loading_svg__a)",d:"M40 0c22.091 0 40 17.909 40 40S62.091 80 40 80v-7c18.225 0 33-14.775 33-33S58.225 7 40 7V0Z"}),t.createElement("path",{fill:"url(#loading_svg__b)",d:"M40 0v7C21.775 7 7 21.775 7 40s14.775 33 33 33v7C17.909 80 0 62.091 0 40S17.909 0 40 0Z"}),t.createElement("circle",{cx:40.5,cy:3.5,r:3.5,fill:"#fff"}),t.createElement("animateTransform",{attributeName:"transform",begin:"0s",dur:"1s",repeatCount:"indefinite",type:"rotate",values:"0 40 40;360 40 40"}))))};function Et(){return Et=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Et.apply(this,arguments)}var xt=function(e){return t.createElement("svg",Et({xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),bt||(bt=t.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.763-15.864.11 7.596h1.305l.11-7.596h-1.525zm.759 10.967c.512 0 .902-.383.902-.882 0-.5-.39-.882-.902-.882a.878.878 0 0 0-.896.882c0 .499.396.882.896.882z"})))};const Mt=()=>e.createElement("div",{className:"preview-image__image__error"},e.createElement("span",null,e.createElement(xt,{width:"100%",height:"100%"})),e.createElement("span",{style:{marginTop:16}},"图片加载失败")),Pt=()=>e.createElement("span",{className:"preview-image__image__loading"},e.createElement(Tt,{width:"100%",height:"100%"}));var Dt=e.forwardRef((({src:t="",alt:n="",style:s,imgStyle:r,className:o,viewPosition:a,loading:l,error:c,active:h=!0},u)=>{const p=e.useRef(null),m=e.useRef(null),d=e.useRef(null),[f,g]=k(0,(function(e){let n=e;return S(t)&&(n=0),0===n&&h&&(n=1),n}));O((()=>{d.current=new vt({transitionEl:()=>m.current,rotation:t=>t?void 0:[-Number.MAX_VALUE,Number.MAX_VALUE],scalation:t=>t?void 0:[.1,10]})}),[]),e.useImperativeHandle(u,(()=>({findImageElement:()=>2===f?m.current:null,findDOMElement:()=>2===f?p.current:null,getInstance:()=>2===f?d.current:null})),[f]);const v=e.useMemo((()=>{const t={containerCenter:[0,0],containerWidth:0,containerHeight:0,naturalWidth:0,naturalHeight:0},e=m.current;if(e&&2===f){const n=e.naturalWidth,i=e.naturalHeight,{x:s=0,y:r=0,w:o=0,h:l=0}=a||{};t.containerCenter=[s,r],t.containerWidth=o,t.containerHeight=l,t.naturalWidth=n,t.naturalHeight=i}const n=d.current,i={width:0,height:0};if(n){const{elementWidth:e,elementHeight:s}=n.sizePosition(t);i.width=e,i.height=s}return i}),[a,f]);return e.createElement("div",{ref:p,className:"preview-image__image__wrapper"+(o?" "+o:""),style:i({alignItems:v.height>((null==a?void 0:a.h)||0)?"flex-start":"center"},s||{})},e.createElement("img",i({ref:m,style:i({},r),alt:n,onLoad:()=>g(2),onError:()=>g(3)},f>0?{src:t}:{},v)),1>=f&&!1!==l&&(l||Pt)(),3===f&&!1!==c&&(c||Mt)())}));function It(t){if(!1===t)return!1;if(!C())return null;let e=t;return"string"==typeof t&&(e=document.querySelector(t)),"function"==typeof t&&(e=t()),e||null}var St=({container:t,destroy:i,prevent:s,children:r})=>{const[o,a]=e.useState((()=>It(t))),[l]=e.useState((()=>C()?document.createElement("div"):null));O((()=>a(It(t))),[t]);const c=!i&&null===o;O((()=>{var t;c?l&&document.body.appendChild(l):null==l||null==(t=l.parentElement)||t.removeChild(l);return()=>{var t;null==l||null==(t=l.parentElement)||t.removeChild(l)}}),[l,c]);const h=null!=o?o:l,u=s&&C()&&(h===l||h===document.body);return O((()=>(u?(window.addEventListener("contextmenu",dt,{capture:!1,passive:!1}),window.addEventListener("touchstart",dt,{capture:!1,passive:!1}),window.addEventListener("wheel",dt,{capture:!1,passive:!1}),window.addEventListener("dragstart",dt,{capture:!1,passive:!1}),"onselectstart"in window.document.documentElement&&window.addEventListener("selectstart",dt,{capture:!1,passive:!1})):(window.removeEventListener("contextmenu",dt),window.removeEventListener("touchstart",dt),window.removeEventListener("wheel",dt),window.removeEventListener("dragstart",dt),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",dt)),()=>{window.removeEventListener("contextmenu",dt),window.removeEventListener("touchstart",dt),window.removeEventListener("wheel",dt),window.removeEventListener("dragstart",dt),"onselectstart"in window.document.documentElement&&window.removeEventListener("selectstart",dt)})),[u]),i||!C()||null===h?null:e.createElement(e.Fragment,null,!1===h?r:n.createPortal(r,h))};function kt(t){const n=e.useRef({data:t});return n.current.data=t,e.useMemo((()=>n.current),[])}let Ct=!1;function Ot(t,{contextMenu:e}){if(!t.isTouching()){const n=this.currentItem();if(this.running()||null!=n&&n.running())return;const i=-this.activeIndex()*this.itemSize();if(0===Math.round(this.value().transform.default-i)){const{angle:i=0}=t;isNaN(i)?(Ct||null==e||e(t),Ct=!1,null==n||n.resetBounce(!1)):(Ct=!0,null==n||n.moveBounce(!1,i,1,0,0))}}}function At(t){if(!t.isTouching()){const e=this.currentItem();if(this.running()||null!=e&&e.running())return;const n=-this.activeIndex()*this.itemSize();if(0===Math.round(this.value().transform.default-n)){const{scale:n=1}=t;isNaN(n)?null==e||e.resetBounce(!1):null==e||e.moveBounce(!1,0,n,0,0)}}}function zt(t,{contextMenu:e}){if(t.isTouching()){const n=this.currentItem();if(this.running()||null!=n&&n.running())return;null==e||e(t)}}function jt(t,{internalClose:e}){const n=this.currentItem();this.running()||null!=n&&n.running()||null==e||e(t)}function Lt(t,{internalClose:e,slideBefore:n,slideAfter:s}){const r=this.currentItem();if(this.running()||null!=r&&r.running())return;const{direction:o}=t,a="Right"===o&&this.isHorizontal()||"Down"===o&&this.isVertical(),l=-this.activeIndex()*this.itemSize(),c=this.value().transform.default-l,h=(a&&0>c||!a&&c>0)&&0!==Math.round(c)?-c:0;if("inside"===this._moveTarget){if(r){const{velocity:e=0,swipeComputed:n}=t;if(e>0&&n){const e=this,s=(t,n,s,o)=>{if(0!==n){const{duration:a,easing:c}=o(n+s);0!==s?Promise.all([0!==h?e.apply(new Z(l),i({},Q,{duration:a,easing:c,before:t=>Math.min(Math.abs(h+n+s)*t/Math.abs(h),1)})):Promise.resolve(),r.apply(new Z({[t]:(r.value().transform[t]||0)+n}),i({},Q,{duration:a,easing:c,before:t=>Math.min(Math.max((Math.abs(h+n+s)*t-Math.abs(h))/Math.abs(n),0),1)})),e.apply(new Z(l+s),i({},Q,{duration:a,easing:c,before:t=>Math.max((Math.abs(h+n+s)*t-Math.abs(h)-Math.abs(n))/Math.abs(s),0)}))]).then((()=>{e.apply(new Z(l),i({},Q))})):(0!==h&&e.apply(new Z(l),i({},Q,{duration:a,easing:c,before:t=>Math.min(Math.abs(h+n)*t/Math.abs(h),1)})),r.apply(new Z({[t]:(r.value().transform[t]||0)+n}),i({},Q,{duration:a,easing:c,before:t=>Math.max((Math.abs(h+n)*t-Math.abs(h))/Math.abs(n),0)})))}else{const t=c>0?1:-1,n=Math.max((s-c)*t,0)*t,{duration:r,easing:a}=o(n);0===n?e.apply(new Z(l),i({},Q)):e.apply(new Z(l+c+n),i({},Q,{duration:r,easing:a})).then((()=>{e.apply(new Z(l),i({},Q))}))}},{duration:o,stretchX:a,stretchY:u}=n(.003);if(this.isVertical()){const e=r.getXTranslation(0,t.isTouching());0===e[0]&&0===e[1]||r.swipeBounce(t.isTouching(),o,a,"x"),r.swipeBounce(t.isTouching(),o,u-h,"y",s)}else{r.swipeBounce(t.isTouching(),o,a-h,"x",s);const e=r.getYTranslation(0,t.isTouching());0===e[0]&&0===e[1]||r.swipeBounce(t.isTouching(),o,u,"y")}}}else this.slide(this.activeIndex(),{before:n,after:s});return}if("closures"===this._moveTarget){const n="Down"===o&&this.isHorizontal()||"Right"===o&&this.isVertical();return void(this.swipeClose()&&n&&null!=e&&e(t)&&(this._moveTarget="none"))}const u=this.itemSize(),p=0===u?0:-this.value().transform.default/u;this.slide(Math[a?"floor":"ceil"](p),{before:n,after:s})}function Xt(t){const e=this.currentItem();if(this.running()||null!=e&&e.running())return;const n=-this.activeIndex()*this.itemSize();0===Math.round(this.value().transform.default-n)&&(null==e||e.dblScale(t.isTouching(),t.getPoint()))}const Yt=["x","y"];function Rt(t,{preventAllTap:e}){0===this._fgBehavior&&t.pointers.length>1&&(this._fgBehavior=2);let n=0;n+=this.cancel();const r=this.currentItem();if(n+=(null==r?void 0:r.cancel())||0,n>0){if(r){const e=r.value().transform,{x:n=0,y:o=0}=e,a=s(e,Yt),[l,c]=r.getTranslation(0,t.isTouching()),h=0===this.activeIndex(),u=this.activeIndex()===this.countItems()-1;this.isVertical()?ut(n,l)||(o>c[0]||u)&&(c[1]>o||h)||r.apply(new Z(i({x:pt(n,l),y:o},a))):ut(o,c)||(n>l[0]||u)&&(l[1]>n||h)||r.apply(new Z(i({x:n,y:pt(o,c)},a)))}null==e||e()}}const Ht=(t,[e,n],[i,s])=>t?Math.abs(e-i)>4*Math.abs(n-s)&&0>=e-i:Math.abs(n-s)>4*Math.abs(e-i)&&0>=n-s;function Bt(t,{openStyleChange:e}){0===this._fgBehavior&&1===t.pointers.length&&(this._fgBehavior=1);const n=this.currentItem();if(this.running()||null!=n&&n.running())return;const i=1===t.pointers.length||1===this._fgBehavior,s={max:this.itemSize()},{getPoint:r,direction:o,angle:a=0,scale:l=1,deltaX:c=0,deltaY:h=0,moveX:u=0,moveY:p=0}=t,m=r();if("none"===this._moveTarget){const e=r("previous");if(n){if(this._moveTarget="inside",i){const i=0===this.activeIndex(),s=this.activeIndex()===this.countItems()-1,r=Ht(this.isVertical(),e,m),{x:a=0,y:l=0}=n.value().transform,[u,p]=n.getTranslation(0,t.isTouching());if(this.isVertical())if(this.swipeClose()&&a>=u[1]&&r)this._moveTarget="closures";else{const t=0===u[0]&&0===u[1];(p[0]>=l&&(t?0>h:"Up"===o)&&!s||l>=p[1]&&(t?h>0:"Down"===o)&&!i)&&(this._moveTarget="outside")}else if(this.swipeClose()&&l>=p[1]&&r)this._moveTarget="closures";else{const t=0===p[0]&&0===p[1];(u[0]>=a&&(t?0>c:"Left"===o)&&!s||a>=u[1]&&(t?c>0:"Right"===o)&&!i)&&(this._moveTarget="outside")}}}else this._moveTarget=this.swipeClose()&&Ht(this.isVertical(),e,m)?"closures":"outside"}if("inside"===this._moveTarget){if(n){const e=-this.activeIndex()*this.itemSize(),r=lt(this.value().transform.default-e,s);let o=c,u=h;if(this.isVertical()?u+=r:o+=r,i){const{x:i=0,y:r=0}=n.value().transform,[a,l]=n.getTranslation(0,t.isTouching());let c=0;if(this.isVertical()){c=u,o=0===a[0]&&0===a[1]?0:o,u=pt(u+r,l)-r,c-=u}else{const t=0===l[0]&&0===l[1];c=o,o=pt(o+i,a)-i,u=t?0:u,c-=o}n.moveBounce(t.isTouching(),0,1,o,u,m),this.apply(new Z(e+at(c,s)))}else n.moveBounce(t.isTouching(),a,l,o,u,m),0!==r&&this.apply(new Z(e))}return}if("closures"===this._moveTarget)return void(null==e||e(((t,e)=>{const{w:n=0,h:i=0,x:s=0,y:r=0}=e,o=Math.min(Math.max(1-((this.isVertical()?u/n:p/i)||0),.3),1),a=.01+.99*(o-.3)/.7,{k:l=1,x:d=0,y:f=0}=t;return{o:a,k:o,x:d+c+(m[0]-(d+s))*(1-o/l),y:f+h+(m[1]-(f+r))*(1-o/l)}})));const d=[(1-this.countItems())*this.itemSize(),0];let f=pt(this.value().transform.default,d),g=f+lt(this.value().transform.default-f,s);f=pt(g+=this.isVertical()?h:c,d),g=f+at(g-f,s),this.apply(new Z(g))}function Nt(t,{openStyleChange:e,slideBefore:n,slideAfter:i}){const s=this._moveTarget,r=1===t.leavePointers.length||1===this._fgBehavior;if(0===t.pointers.length)this._fgBehavior=0,this._moveTarget="none";else if(1===this._fgBehavior){if(!this.running()&&"outside"===s){const t=this.itemSize(),e=0===t?0:-this.value().transform.default/t;this.slide(Math.round(e),{before:n,after:i})}return}const o=this.currentItem();if(this.running()||null!=o&&o.running())return;if("closures"===s)return void(null==e||e((()=>({o:1,k:1,x:0,y:0,t:300}))));null==o||o.resetBounce(t.isTouching(),t.getPoint(),r);let a=this.activeIndex();if("outside"===s){const t=this.itemSize();a=Math.round(0===t?0:-this.value().transform.default/t)}this.slide(a,{before:n,after:i})}var Ft=e.forwardRef((({style:t,className:n,backdropStyle:s,backdropClassName:r,wrapperStyle:o,wrapperClassName:a,indicatorStyle:l,indicatorClassName:c,open:h=!1,current:u=0,container:p,clickPosition:m,imageUrls:d=[],itemGap:f=20,direction:g="horizontal",isLazy:v=!0,hasLoading:_=!0,renderLoading:y,hasError:w=!0,renderError:b,hasIndicator:T=!0,destroyOnClose:E=!1,enableSwipeClose:x=!0,onContextMenu:M,onChange:P,onAfterChange:D,onClose:S,onAfterClose:C,onAfterOpenChange:A},z)=>{const j=d.length,L=u&&u>=0&&j>u?u:0,X=e.useRef(null),Y=e.useRef(null),R=e.useRef(null),[H,B]=e.useState(0),[N,F]=e.useState({}),[W,$]=e.useState({}),[V,q]=k(L);e.useImperativeHandle(z,(()=>({findDOMElement:()=>{var t;return null==(t=X.current)?void 0:t.findDOMElement()},getInstance:()=>Y.current})),[]),O((()=>{Y.current=new nt({transitionEl:()=>R.current})}),[]);const G=kt(i({},h&&2===H?{}:{duration:0},{before:P,after:D}));O((()=>{const t=Y.current;t&&t.slide(V,i({},G.data))}),[V,G]),O((()=>{var t;h&&0===H&&($(mt(null==(t=X.current)?void 0:t.findDOMElement())),B(1));h||2!==H||B(1)}),[h]);const U=kt({clickPosition:m,viewPosition:W});O((()=>{if(1===H){var t;const e=null==(t=Y.current)?void 0:t.currentItem();null==e||e.reset();const{elementWidth:n=0,elementHeight:s=0}=(null==e?void 0:e.sizePosition())||{},{x:r=0,y:o=0,w:a=0,h:l=0}=U.data.viewPosition||{},{x:c=0,y:u=0,w:p=0,h:m=0}=U.data.clickPosition||{},d=0==n&&0===s?a:n,f=0==n&&0===s?l:s,g=d/f>p/m,v={o:0,k:(g?m/f:p/d)||.001,x:0===p&&0===m?0:c-r,y:0===p&&0===m?0:u-o,w:(g?f*(p/m):d)||0,h:(g?f:d/(p/m))||0},_={o:1,k:1,x:0,y:0,w:n,h:s};F((t=>i({},h?v:i({},_,t)))),Promise.resolve().then((()=>{var t;mt(null==(t=X.current)?void 0:t.findDOMElement()),F(i({},h?_:v,{t:300}))}))}}),[h,H,U]),O((()=>{const t=Y.current;t&&t.swipeClose(x)}),[x]),O((()=>{const t=Y.current;t&&t.direction(g)}),[g]),O((()=>{const t=Y.current;if(t){const{w:e,h:n}=W;let i="horizontal"!==g?n:e;i=i?i+f:0,t.itemSize(i)}}),[g,f,W]),O((()=>{const t=function(t,e=0){let n=0;return(...i)=>{n&&clearTimeout(n),n=+setTimeout((()=>{t.apply(null,i)}),e)}}((()=>{var t;return $(mt(null==(t=X.current)?void 0:t.findDOMElement()))}),50);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const Z=e.useMemo((()=>{let{w:t=0,h:e=0}=W;const n=(j-1)*f;return"horizontal"!==g?e=e*j+n:t=t*j+n,{width:t,height:e}}),[g,f,W,j]);const J=(t,e)=>{const n=Y.current;n&&t.call(n,e,{preventAllTap:()=>{var t;const e=null==(t=X.current)?void 0:t.getInstance();e&&e.preventAllTap()},contextMenu:t=>{null==M||M(t)},internalClose:t=>{if("function"==typeof S)return S(t),!0},openStyleChange:t=>{F((e=>t(e,W)))},slideBefore:t=>{q(t),null==P||P(t)},slideAfter:t=>null==D?void 0:D(t)})};return E&&!h&&0===H?null:e.createElement(St,{prevent:h&&2===H,container:p},e.createElement(I,{ref:X,onPointerStart:t=>J(Rt,t),onPointerMove:t=>J(Bt,t),onPointerEnd:t=>J(Nt,t),onDoubleTap:t=>J(Xt,t),onSingleTap:t=>J(jt,t),onLongTap:t=>J(zt,t),onRotate:t=>J(Ot,t),onScale:t=>J(At,t),onSwipe:t=>J(Lt,t)},e.createElement("div",{className:`preview-image__gallery__container preview-image__gallery__container-${g}${n?" "+n:""}${h||0!==H?" visible":""}`,style:t},e.createElement("div",{className:"preview-image__gallery__backdrop"+(r?" "+r:""),style:i({backgroundColor:"#000f"},s||{},{opacity:N.o,transition:N.t?`opacity ${N.t}ms`:""}),onTransitionEnd:t=>{"opacity"===t.nativeEvent.propertyName&&(1===H&&(B(h?2:0),h||null==C||C(),null==A||A(h)),F((({o:t,k:e,x:n,y:i})=>({o:t,k:e,x:n,y:i}))))}}),e.createElement("div",{ref:R,className:"preview-image__gallery__wrapper"+(a?" "+a:""),style:i({},o||{},Z)},d.map(((t,n)=>e.createElement(Dt,{ref:t=>{var e;return null==(e=Y.current)?void 0:e.itemModels(t&&t.getInstance(),n)},key:n,style:i({},n===V?{transform:`translate(${N.x}px,${N.y}px) scale(${N.k})`,transition:N.t?`transform ${N.t}ms`:"",overflow:1>(N.k||1)||N.t?"visible":void 0}:{},{marginTop:"horizontal"!==g&&0!==n?f:0,marginLeft:"horizontal"!==g||0===n?0:f}),imgStyle:n===V?{width:N.w||void 0,height:N.h||void 0,transition:N.t&&N.w&&N.h?`width ${N.t}ms, height ${N.t}ms`:"",objectFit:N.w&&N.h?"cover":void 0}:{},src:t,error:!!w&&b,loading:!!_&&y,active:!v||V===n,viewPosition:W})))),T&&j>1&&e.createElement("div",{className:`preview-image__gallery__indicator${c?" "+c:""}${h&&2===H?" visible":""}`,style:l},d.map(((t,n)=>e.createElement("span",{key:n,className:"preview-image__gallery__indicator-item"+(V===n?" active":"")})))))))}));const Wt=function({open:t=!1,urls:n=[],current:i="",onClose:s,clickPosition:r,onContextMenu:o}){const a=n.indexOf(i);return e.createElement(Ft,{open:t,current:a,imageUrls:n,enableSwipeClose:!0,destroyOnClose:!0,onClose:s,clickPosition:r,onContextMenu:o})};export{Ft as Gallery,Dt as Image,vt as ItemModel,St as Portal,Wt as PreviewImage,nt as SwiperModel,Q as defaultAnimationExtendOptions};
//# sourceMappingURL=react-preview-image.min.js.map
